<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.21 $ -->
<!-- EN-Revision: 1.41 Maintainer: hirokawa Status: ready -->
<!-- CREDITS: takagi -->

 <chapter id="language.constants">
  <title>定数</title>

  <simpara>
   定数は簡単な値のためのID(名前)です。この名前が示すように、定数の値
   はスクリプト実行中に変更できません。(<link 
   linkend="language.constants.predefined">magic constants</link>は
   例外で、これらは実際は定数ではありません。)
   デフォルトで定数では大文字小文字を区別します。慣習的に定数は常に大
   文字で表記されます。
  </simpara>
  <para>
   定数の名前は、PHPのラベルと同じ規則に従います。有効な定数の名前は、
   文字またはアンダースコアで始まり、任意の数の文字、数字、アンダース
   コアが後に続きます。正規表現で示すと、次のようになります。
   <literal>[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*</literal>
  </para>
  <para>
   <example>
    <title>有効/無効な定数名の例</title>
    <programlisting role="php">
<![CDATA[
<?php

// 有効な定数名
define("FOO",     "something");
define("FOO2",    "something else");
define("FOO_BAR", "something more")

// 無効な定数名
define("2FOO",    "something");

// 有効だが、避けるべき。
// PHP が、今後、自動的に定義される定数を追加すると、
// スクリプトが動作しなくなる可能性がある
define("__FOO__", "something"); 

?>
]]>
    </programlisting>
   </example>
  </para>
  <note>
   <simpara>
    本節の目的においては、文字は a-z, A-Z, および127から255まで
    (0x7f-0xff)のASCII文字を指します。
   </simpara>
  </note>
  <simpara>
   &link.superglobals;と同様に定数のスコープはグローバルです。
   つまり、スコープによらずスクリプトの中ではどこでも定数に
   アクセスできます。スコープの詳細についてはマニュアルの
   <link linkend="language.variables.scope">変数のスコープ</link>
   をご覧ください。
  </simpara>

  <sect1 id="language.constants.syntax">
   <title>構文</title>
   <simpara>
    <function>define</function>関数を使用することにより、定数を定義す
    ることが可能です。定数が一度定義されると、変更または未定義とするこ
    とはできません。
   </simpara>
   <simpara>
    スカラーデータ(<type>boolean</type>, <type>integer</type>, 
    <type>double</type>, <type>string</type>) のみが定数の中に含むこと
    が可能です。
   </simpara>
   <simpara>
    単に定数の名前を指定することにより、その値を得ることが可能です。
    変数とは異なり、その前に<literal>$</literal>は不要です。
    定数の名前を動的に得る必要がある場合、定数の値を読むために関数
    <function>constant</function>を使用することも可能です。
    定義済の定数の一覧を得るには、
    <function>get_defined_constants</function>を使用してください。
   </simpara>
   <note>
    <simpara>
     定数と(グローバル)変数は、異なる名前空間にあります。
     例えば、&true; と <varname>$TRUE</varname> は違うものを意味します。
    </simpara>
   </note>
   <simpara>
    未定義の定数を使用した場合、ちょうど<type>string</type>として
    コールしたかのように(CONSTANT vs "CONSTANT")、
    PHPはその定数自体の名前を使用したと仮定します。
    この際、<link linkend="ref.errorfunc">E_NOTICE</link> が発生します。
    ある定数が設定されているかどうかを知るには、
    <function>defined</function> 関数を使用してください。
    なぜ
    <link linkend="language.types.array.foo-bar">$foo[bar]</link>が間違っている
    （まず<literal>bar</literal>を定数として<function>define</function>しなければ）
    のかというマニュアルもご覧ください。
    定数がセットされているかを単にチェックするには
    <function>defined</function>を使用してください。
   </simpara>
   <para>
    変数との違いは次のようになります。
    <itemizedlist>
     <listitem>
      <simpara>
       定数は、前にドル記号(<literal>$</literal>)を要しません。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
      定数を定義することができるのは、<function>define</function>関数
      のみです。単なる代入による定義はできません。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       定数は、定義することができ、変数のスコープ規則に関係なく、あら
       ゆる場所からアクセス可能です。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       定数は一度設定されると再定義または未定義とすることはできません。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       定数は、スカラー値としてのみ評価可能です。
      </simpara>
     </listitem>
    </itemizedlist>
   </para>
    
   <para>
    <example>
     <title>定数の定義</title>
     <programlisting role="php">
<![CDATA[
<?php
define("CONSTANT", "Hello world.");
echo CONSTANT; // "Hello world."を出力
echo Constant; // outputs "Constant" および通知を発生。
?>
]]>
     </programlisting>
    </example>
   </para>

   <simpara>
    <link linkend="language.oop5.constants">オブジェクト定数</link>
    も参照ください。
   </simpara>
  </sect1>
  
  <sect1 id="language.constants.predefined">
   <title>自動的に定義される定数</title>

   <simpara>
    PHPには実行されるスクリプトで使用可能な多くの
    <link
    linkend="reserved.constants">定義済みの定数</link>があります。
    しかし、これらの定数の多くは、種々の拡張モジュールにより作成さ
    れ、動的なロードやコンパイル時の組込みにより、これらの拡張モジュー
    ルが使用可能である場合にのみ定義されます。
   </simpara>

   <para>
    使われ方によって変化する自動的に定義される定数（マジカル定数）が5つあります。
    例えば、<constant>__LINE__</constant>はスクリプト上において
    呼び出された行番号です。特別定数は大文字小文字を区別しません。
    内容は以下のとおりです:
   </para>
   <para>
    <table>
     <title>A few "magical" PHP constants</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>名前</entry>
        <entry>説明</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry><constant>__LINE__</constant></entry>
        <entry>
         ファイル上の現在の行番号。
        </entry>
       </row>
       <row>
        <entry><constant>__FILE__</constant></entry>
        <entry>
         ファイルのフルパスとファイル名。インクルードされるファイルの
         中で使用された場合、インクルードされるファイルの名前が返されます。
         PHP 4.0.2 以降では、<constant>__FILE__</constant>
         は常に絶対パスです。それより前のバージョンでは、場合によっては
         相対パスが返されることもあります。
        </entry>
       </row>
       <row>
        <entry><constant>__FUNCTION__</constant></entry>
        <entry>
         関数名（PHP4.3.0で追加されました）。
         PHP 5以降、この定数は宣言時の関数名(ケース依存)を返します。
         PHP 4では、この値は常に小文字で返されました。
        </entry>
       </row>
       <row>
        <entry><constant>__CLASS__</constant></entry>
        <entry>
         クラス名（PHP4.3.0で追加されました）。
         PHP 5以降、この定数は宣言時のクラス名(ケース依存)を返します。
         PHP 4では、この値は常に小文字で返されました。
        </entry>
       </row>
       <row>
        <entry><constant>__METHOD__</constant></entry>
        <entry>
         クラスのメソッド名（PHP5.0.0で追加されました）。
         メソッド名は宣言時と同じ(ケース依存)を返します。
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </para>
   <para>
    <function>get_class</function>,
    <function>get_object_vars</function>,
    <function>file_exists</function>,
    <function>function_exists</function>も参照してください。
   </para>

  </sect1>
 </chapter>
 
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

