  <reference id="ref.nis">
  <title>YP/NIS関数</title>
  <titleabbrev>YP/NIS</titleabbrev>

  <partintro>
   <para>
    (以前はイエローページと呼ばれていた) NIS は、
    (パスワードファイルのような)重要な管理ファイルのネットワーク管理を
    可能にします。
    詳細は、NIS のmanpageおよび
    <ulink url="&url.nis;">Introduction to YP/NIS</ulink>を参照下さい。
    Hal Stern による<ulink url="&url.nis.book;">Managing NFS and NIS</ulink>
    という本もあります。
   </para>
   <para>
    これらの関数が動作するためには、configure を実行する際に
    <option role="configure">--with-yp</option> (PHP 3)または
    <option role="configure">--enable-yp</option>(PHP 4) を付ける必要
    があります。
   </para>
  </partintro>

  <refentry id="function.yp-get-default-domain">
   <refnamediv>
    <refname>yp_get_default_domain</refname>
    <refpurpose>デフォルト NIS ドメインを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>yp_get_default_domain</function></funcdef>
      <paramdef>void <parameter></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    
    <para>
     <function>yp_get_default_domain</function> は、ノードのデフォルト
     ドメインまたは FALSE を返します。返り値は、この後の NIS コールで
     ドメインパラメータとして使用可能です。
    </para>
    <para> 
     NIS ドメインは、NIS マップの集合として説明できます。情報を検索す
     る必要がある各ホストは、そのホスト自体あるドメインに属しています。
     詳細な情報については、冒頭に示したドキュメントを参照下さい。
    </para>
    <para>
     <example>
      <title>デフォルトドメインの例</title>
      <programlisting role="php">
&lt;?php
$domain = yp_get_default_domain();

echo "デフォルトのNIS ドメイン: " . $domain;
?>
      </programlisting>
     </example>
    </para>

    <para>
     <function>yp-get-default-domain</function> も参照下さい。
<!--
     linkend="function.yp-errno">yp_errno</link> and <link
     linkend="function.yp-err-string">yp_err_string</link>
-->
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.yp-order">
   <refnamediv>
    <refname>yp_order</refname>
    <refpurpose>マップの呼出番号を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>yp_order</function></funcdef>
      <paramdef>string <parameter>domain</parameter></paramdef>
      <paramdef>string <parameter>map</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>

    <para>
     <function>yp_order</function> は、マップの呼出番号またはFALSE を
     返します。
    </para>
    <para>
     <example>
      <title>NIS 呼出番号の例</title>
      <programlisting role="php">
&lt;?php
    $number = yp_order($domain,$mapname);

    if(!$number) {
       echo "エントリが見つかりません\n";
       <!-- echo yp_errno() . ": " . yp_err_string(); -->
    }

    echo "このマップの呼出番号は、" . $order . "です。";
?>
      </programlisting>
     </example>
    </para>
    <para>
     <function>yp-get-default-domain</function>も参照下さい。
 <!--
      linkend="function.yp-errno">yp_errno</link> and <link
      linkend="function.yp-err-string">yp_err_string</link>
 -->
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.yp-master">
   <refnamediv>
    <refname>yp_master</refname> 
    <refpurpose>
     指定したマップのマスターNISサーバーのマシン名を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>yp_master</function></funcdef> 
      <paramdef>string <parameter>domain</parameter></paramdef>
      <paramdef>string <parameter>map</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>yp_master</function> は、指定したマップのマスターNISサー
     バーのマシン名を返します。
    </para>
    <para>
     <example>
      <title>NIS マスターの例</title>
      <programlisting role="php">
&lt;?php
    $number = yp_master ($domain, $mapname);

    echo "このNISマップのマスタ: " . $master;
?>
      </programlisting>
     </example>
    </para>
    <para>
     <function>yp-get-default-domain</function>も参照下さい。
<!--
     linkend="function.yp-errno">yp_errno</link> and <link
     linkend="function.yp-err-string">yp_err_string</link>
-->
    </para>
   </refsect1>
  </refentry>
 
  <refentry id="function.yp-match">
   <refnamediv>
    <refname>yp_match</refname>
    <refpurpose>検索した行を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>yp_match</function></funcdef>
      <paramdef>string <parameter>domain</parameter></paramdef>
      <paramdef>string <parameter>map</parameter></paramdef>
      <paramdef>string <parameter>key</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>yp_match</function> は、指定したmap の中から
     指定した key に関連する値、または FALSE を返します。
     この key は正確である必要があります。
    </para>
    <para>
     <example>
      <title>NIS 検索の例</title>
      <programlisting role="php">
&lt;?php
$entry = yp_match ($domain, "passwd.byname", "joe");

echo "検索にマッチしたエントリ: " . $entry;
?>
      </programlisting>
     </example>
    </para>
    <para>
    この場合の出力は次のようになります。: 
     joe:##joe:11111:100:Joe
     User:/home/j/joe:/usr/local/bin/bash
    </para>
    <para>
    <function>yp-get-default-domain</function>も参照下さい。
<!--
     linkend="function.yp-errno">yp_errno</link> and <link
     linkend="function.yp-err-string">yp_err_string</link>
-->
    </para>

   </refsect1>
  </refentry>

  <refentry id="function.yp-first">
   <refnamediv>
    <refname>yp_first</refname> 
    <refpurpose> 
     指定したマップから最初のキー/値の組を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>yp_first</function></funcdef>
      <paramdef>string <parameter>domain</parameter></paramdef>
      <paramdef>string <parameter>map</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>

    <para>
     <function>yp_first</function> は、ドメイン
     <parameter>domain</parameter>のマップ<parameter>map</parameter>か
     ら、最初のキー/値の組、さもなくば FALSE を返します。
    </para>
    <para>
     <example>
      <title>NIS first の例</title>
      <programlisting role="php">
&lt;?php
$entry = yp_first($domain, "passwd.byname");
$key = $entry ["key"];
$value = $entry ["value"];
echo "このマップの最初のエントリにはキー " . $key . " と値 " . $value
       . "があります。";
?>
      </programlisting>
     </example>
    </para>
    <para>
     <function>yp-get-default-domain</function>も参照下さい。
<!--
     <link linkend="function.yp-errno">yp_errno</link> and <link
     linkend="function.yp-err-string">yp_err_string</link>
-->     
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.yp-next">
   <refnamediv>
    <refname>yp_next</refname>
    <refpurpose>マップ map から次のキー/値の組を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>yp_next</function></funcdef>
      <paramdef>string <parameter>domain</parameter></paramdef>
      <paramdef>string <parameter>map</parameter></paramdef>
      <paramdef>string <parameter>key</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>yp_next</function> は、指定した key の後にあるマップ
     map の次のキー/値の組、または FALSE を返します。
    </para>
    <para>
     <example>
      <title>NIS next の例</title>
      <programlisting role="php">
&lt;?php
$entry = yp_next ($domain, "passwd.byname", "joe");

if(!$entry) {
   echo yp_errno() . ": " . yp_err_string();
}

$key = key($entry);

echo "joe の次のエントリのキーは、" . $key 
     . " 、値は " . $entry[$key] . "です。";
?>
      </programlisting>
     </example>
    </para>
    <para> 
     <function>yp-get-default-domain</function>も参照下さい。
<!--
     <link linkend="function.yp-errno">yp_errno</link> and <link
     linkend="function.yp-err-string">yp_err_string</link>
-->
    </para>
   </refsect1>
  </refentry>
    
<!-- Function doesn't exist 
  <refentry id="function.yp-errno">
   <refnamediv>
    <refname>yp_errno</refname> 
    <refpurpose>前の操作のエラーコードを返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>yp_errno</function></funcdef>
      <void/>
     </funcprototype>
    </funcsynopsis>
    <para> 
     <function>yp_errno</function> は、前に行った操作のエラーコードを
     返します。</para>
    <para>
     発生しうるエラーを次に示します。
    </para>
    <para>
     <simplelist>
      <member>1 関数への引数が不正</member> 
      <member>2 RPC エラー - ドメインが閉じられていない</member>
      <member>3 このドメインのサーバーをバインドできない</member>
      <member>4 サーバーのドメインに指定したmapがない</member>
      <member>5 map に指定したkeyがない</member>
      <member>6 内部 yp サーバーまたはクライアントエラー</member>
      <member>7 リソース確保に失敗した</member> 
      <member>8 map データベースにレコードがもうない</member>
      <member>9 portmapper と通信できない</member>
      <member>10 ypbind と通信できない</member>
      <member>11 ypserv と通信できない</member>
      <member>12 ローカルドメイン名が設定されていない</member> 
      <member>13 yp データベースが不正</member> 
      <member>14 yp バージョンが不整合</member> 
      <member>15 不正なアクセス</member> 
      <member>16 データベースがビジー</member>
     </simplelist>
     </para>
     <para>
      <function>yp_err_string</function>も参照下さい。
     </para>
   </refsect1>
  </refentry>

-->

<!-- Function doesn't exist 

  <refentry id="function.yp-err-string">
   <refnamediv>
    <refname>yp_err_string</refname> 
    <refpurpose>前の操作に関するエラー文字列を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>yp_err_string</function></funcdef>
      <paramdef>void <parameter></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>

    <para>
     <function>yp_err_string</function> は、前の操作に関するエラーメッセージ
     を返します。何が悪いかを正確に調べる際に便利です。</para>

    <para>
     <example>
      <title>NIS エラーの例</title>
      <programlisting role="php">
&lt;?php
    echo "Error: " . yp_err_string();
?>
      </programlisting>
     </example></para>
    <para>
     <function>yp_errno</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

-->

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
