 <reference id="ref.mnogo">
  <title>mnoGoSearch 関数</title>
  <titleabbrev>mnoGoSearch</titleabbrev>
  <partintro>
   <simpara>
    ここで示す関数により、フリーの検索エンジン mnoGoSearch (旧名は
    UdmSearch)へアクセスすることが可能となります。これらの関数を利用可
    能とするためには、オプション <option
    role="configure">--with-mnogosearch</option> により mnogosearchサ
    ポートを指定してPHPをコンパイルする必要があります。mnogosearchのパ
    スを指定せずにこのオプションを使用した場合、PHPはデフォルトで
    mnogosearchが/usr/local/mnogosearchにあるものとして検索を行います。
    mnogosearchを他の場所にインストールしている場合には、
    <option role="configure">--with-mnogosearch=DIR</option>のようにそ
    のパスを指定する必要があります。
   </simpara>
   <para>
    mnoGoSearchは、イントラネットおよびインターネットサーバ用の多機能
    な検索エンジンソフトウエアであり、GNUライセンスのもとで配布されて
    います。mnoGoSearchは、サイト内の検索から料理レシピまたは新聞検索、
    ftpアーカイブ検索、新聞記事検索といった特定の検索システムといった
    広い範囲のアプリケーションを構築する等といったユニークないくつかの
    機能を有しています。mnoGoSearchによりHTML、PDF、テキストドキュメン
    トに関する全文テキストインデックス作成と検索が可能になります。
    mnoGoSearch は二つの部分から構成されます。最初の部分は、インデック
    ス機構(indexer)です。indexerは、HTTP, FTP, NEWS サーバまたはローカ
    ルファイルにアクセスし、再帰的に全てのドキュメントを取得して、その
    ドキュメントに関するメタデータを優れた効率的な手法でSQLデータベー
    スに保存します。各ドキュメントがその対応するURLで参照された後、
    indexerにより収集されたメタデータが後で検索処理において使用されま
    す。検索は、Webインターフェースにより行われます。C CGI、PHP、Perl
    用の検索フロントエンドが含まれています。
   </para>
   <note>
    <para>
     PHPには、MySQLとの接続ライブラリが組み込まれており、MySQLにアクセ
     スすることが可能です。mnoGoSearchは、この組み込みライブラリと互換
     性がなく、通常のMySQLライブラリとの組合せでのみ動作します。このた
     め、mnoGoSearchをMySQLと組み合わせて使用する際には、PHPの
     configureにMySQLをインストールしたディレクトリを指定する必要が
     あります。これは、mnoGoSearchに関する設定で使用され、例えば、次の
     ようになります。
     <option role="configure">--with-mnogosearch --with-mysql=/usr</option>
    </para>
   </note>
   <simpara>
    これらの関数を使用するには、3.1.10以降のバージョンのmnoGoSearchが
    インストールされている必要があります。
   </simpara>
   <simpara>
    mnoGoSearchに関するより詳細な情報は、<ulink
    url="&url.mnogo;">&url.mnogo;</ulink>にあります。
   </simpara>
  </partintro>

  <refentry id="function.udm-alloc-agent">
   <refnamediv>
    <refname>udm_alloc_agent</refname>
    <refpurpose>mnoGoSearch セッションを確保する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_alloc_agent</function></funcdef>
      <paramdef>string <parameter>dbaddr</parameter></paramdef>
      <paramdef>string
       <parameter>
        <optional>dbmode</optional>
       </parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_alloc_agent</function> は、成功時にmnogosearchエー
     ジェントID、エラー時に&false;を返します。この関
     数は、データベースパラメータを有するセッションを生成します。
    </para>
    <para>
     <parameter>dbaddr</parameter> - URL形式のデータベース名。SQLデー
     タベースへ接続する際のオプション(型、ホスト、データベース名、ポー
     ト、ユーザ、パスワード)。
     組み込みのテキストファイルサポートには関係ありません。フォーマッ
     ト: DBAddr DBType:[//[DBUser[:DBPass]@]DBHost[:DBPort]]/DBName/
     現在、サポートされている DBType の値は次のものです。: mysql,
     pgsql, msql, solid, mssql, oracle, ibase
     実際、ネーティブなライブラリのサポートは重要ではありません。しかし、
     ODBCユーザは、サポートされる値の一つを指定する必要があります。使
     用するデータベース型がサポートされていない場合、"unknown"を代わり
     に使用することも可能です。
    </para>
    <para>
     <parameter>dbmode</parameter> - 単語の記憶用SQLデータベースモー
     ドを選択可能です。"single"を指定した場合、全ての単語は、同じテー
     ブルに保存されます。"multi"を選択した場合、単語はその長さに応じて
     別々のテーブルに保存されます。"multi"モードの方が通常高速ですが、
     データベース上でより多くのテーブルを必要とします。"crc"モードが選
     択された場合、mnoGoSearch は、単語の代わりにCRC32アルゴリズムで計
     算された32ビット整数の単語IDを保存します。このモードで必要なディ
     スク容量はより小さいですが、"single"および"multi"モードと比較して
     より高速です。"crc-multi" は、"crc"モードと同じ記憶構造を使用しま
     すが、"multi"モードのように単語長に応じて別々のデータベースに単語
     を保存します。フォーマット: DBMode single/multi/crc/crc-multi
    </para>
    <note>
     <para>
     <parameter>dbaddr</parameter> および
     <parameter>dbmode</parameter> は、インデックス作成時に使用される
     これらの選択子に一致している必要があります。
     </para>
    </note>
    <note>
     <para>
      実際、これらの関数はデータベースへの接続をオープンする必要はなく、
      よって、ログイン名やパスワードを確認しません。実際のデータベース
      への接続およびログイン/パスワード認証は、
      <function>udm_find</function>で行われます。
     </para>
    </note>
   </refsect1>
  </refentry>

  <refentry id="function.udm-set-agent-param">
   <refnamediv>
    <refname>udm_set_agent_param</refname>
    <refpurpose>
     mnoGoSearch エージェントのセッションパラメータを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_set_agent_param</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
      <paramdef>int <parameter>var</parameter></paramdef>
      <paramdef>string <parameter>val</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_set_agent_param</function> は成功時に
     &true;、エラー時に&false;を返し
     ます。mnoGoSearch セッションパラメータを定義します。
    </para>
    <simpara>
     以下のパラメータおよびそれらの値が利用可能です。
    </simpara>
    <itemizedlist>
     <listitem>
      <simpara>
       UDM_PARAM_PAGE_NUM - はページ番号を検索結果とするために使用さ
       れます。(結果は、ページ毎にUDM_PARAM_PAGE_SIZE個の結果を有する0
       から始まるページで返されます)
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_PARAM_PAGE_SIZE - は一ページに表示される検索結果の数。
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_PARAM_SEARCH_MODE - 検索モード。次の値が利用可能です。: 
       UDM_MODE_ALL - 全ての単語を検索します。; 
       UDM_MODE_ANY - 全ての単語で検索する; 
       UDM_MODE_PHRASE - 熟語検索;
       UDM_MODE_BOOL - 論理値検索。論理値検索に関する詳細については
       <function>udm_find</function> を参照下さい。
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_PARAM_CACHE_MODE - 検索結果のキャッシュモードをオンまたはオ
       フにします。有効の場合、検索エンジンは検索結果をディスクに保存
       します。似たような検索が後で実行された場合、エンジンはより高速
       にキャッシュから結果を得ることが可能です。
       利用可能な値: UDM_CACHE_ENABLED, UDM_CACHE_DISABLED.
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_PARAM_TRACK_MODE - クエリ追跡モードをオンまたはオフにします。
       バージョン3.1.2以降、mnoGoSearch はクエリ追跡モードをサポートし
       ています。追跡はSQLバージョンにのみ実装されており、組み込みデー
       タベースでは利用できません。追跡を使用するには、テーブルを追跡
       サポート用に作成する必要があります。MySQLの場合、
       create/mysql/track.txtを使用して下さい。検索実行時に、フロント
       エンドはクエリ単語、見つけたドキュメントの数、カレントの秒単位
       のUNIXタイムスタンプを保存するためにこれらのテーブルを使用しま
       す。
       利用可能な値: UDM_TRACK_ENABLED, UDM_TRACK_DISABLED.
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_PHRASE_MODE - 熟語を用いたインデックスデータベースか
       どうかを定義します。(indexer.confにおける"phrase" パラメータ)
       使用可能な値: UDM_PHRASE_ENABLED および UDM_PHRASE_DISABLED。
       熟語検索が有効な場合(UDM_PHRASE_ENABLED)でも、全てのモード
       (ANY、ALL、BOOL、PHRASE)で検索が可能であることに注意して下さい。
       mnoGoSearchのバージョン3.1.10で熟語検索がSQLと組み込みデータベー
       スモードでのみサポートされました。一方、3.1.11で熟語がcachemode
       でもサポートされ始めました。
      </simpara>
      <simpara>
       熟語検索の例:
      </simpara>
      <simpara>
       "Arizona desert" - このクエリは、"Arizona desert"を熟語として含
       む全てのドキュメントを返します。熟語の前後に二重引用符が必要で
       あることに注意して下さい。
      </simpara>
     </listitem>  
     <listitem>
      <simpara>
       UDM_PARAM_CHARSET - ローカルなcharsetを定義します。利用可能な値:
       mnoGoSearchによりサポートされるcharsetの組,
       例えば、koi8-r, cp1251, ...
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_PARAM_STOPFILE - stopfileの名前とパスを定義します。
       (mnoGoSearchと若干違いがあります。つまり、mnoGoSearchにおいては、
       相対パスまたはパスが入力されなかった場合、UDM_CONF_DIRに関して
       このファイルが探されます。モジュールは、このファイルをカレント
       のパス(すなわち、PHPスクリプトが実行されるパス)で探します。
      </simpara>
     </listitem>
     <listitem>
       <simpara>
       UDM_PARAM_STOPTABLE - 指定したSQLテーブルから停止単語をロードし
       ます。複数のStopwordTableコマンドを使用可能です。このコマンドは、
       SQLデータベースサポートを有効にせずにコンパイルした場合は使用で
       きません。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_WEIGHT_FACTOR - 指定したドキュメント部分の重み係数を
       表します。現在、body, title, keywords, description, urlがサポー
       トされています。この機能を有効にするには、indexer.confの*Weight
       コマンドに2の累乗を指定して下さい。ここで次のような重みを指定し
       た場合を考えてみましょう。
      </simpara>
      <simpara>URLWeight     1</simpara>
      <simpara>BodyWeight    2</simpara>
      <simpara>TitleWeight   4</simpara>
      <simpara>KeywordWeight 8</simpara> 
      <simpara>DescWeight    16</simpara>
      <simpara>
       同じドキュメントにいくつかの単語が複数回現れる場合、
       indexerが単語の重みにOR演算子を使用するので、異なったドキュメン
       トの部分に単語が現れる回数を検出可能です。全てのドキュメント部
       分で使用される単語は、重み集合 00011111 を有します。
      </simpara>
      <simpara>
       このパラメータの値は、16進数文字列 ABCDE です。各桁は、単語重み
       の対応するビットの因子です。上で指定した重み設定は次のようにな
       ります。
      </simpara>
      <simpara>E は重み1の因子 (URL Weight ビット)</simpara>
      <simpara>D は重み2の因子 (BodyWeight ビット)</simpara>
      <simpara>C は重み4の因子 (TitleWeight ビット)</simpara>
      <simpara>B は重み8の因子 (KeywordWeight ビット)</simpara>
      <simpara>A は重み16の因子 (DescWeight ビット)</simpara>
      <simpara>
       例:
      </simpara>
      <simpara>
       UDM_PARAM_WEIGHT_FACTOR=00001 は、URLのみを検索します。
      </simpara>	
      <simpara>
       UDM_PARAM_WEIGHT_FACTOR=00100 は、Titleのみを検索します。
      </simpara>	
      <simpara>
       UDM_PARAM_WEIGHT_FACTOR=11100 は、Title,Keywords,Desctriptionを
       検索しますが、URL と Bodyは検索しません。
      </simpara>
      <simpara>
       UDM_PARAM_WEIGHT_FACTOR=F9421 は、次の検索を行います。
      </simpara>
      <simpara>Description with factor 15  (16進数 F)</simpara>
      <simpara>Keywords with factor 9</simpara>
      <simpara>Title with factor  4</simpara>
      <simpara>Body with factor 2</simpara>
      <simpara>URL with factor 1</simpara>
      <simpara>
       UDM_PARAM_WEIGHT_FACTOR 変数が省略された場合、元の重みの値はソー
       ト結果から引き出されます。上記で指定した重み設定の場合、ドキュ
       メントのDescriptionは、最大重み16を有するドキュメントの
       descriptionを意味します。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_WORD_MATCH - 単語にマッチ。このパラメータを単語検索型
       を選択する際に使用可能です。この機能は、"single"および"multi"モー
       ドでSQLデータベースおよび組み込みのデータベースを使用する場合に
       のみ動作します。この機能は、cachemodeおよび他のモードでは動作し
       ません。これは、これらのモードが、単語CRCを使用しており、部分文
       字列検索をサポートしていないからです。
       利用可能な値は次のようになります。
      </simpara>
      <simpara>UDM_MATCH_BEGIN - 単語の始めにマッチ</simpara>
      <simpara>UDM_MATCH_END - 単語の終りにマッチ</simpara>
      <simpara>UDM_MATCH_WORD - 単語全体にマッチ</simpara>
      <simpara>UDM_MATCH_SUBSTR - 単語の部分文字列にマッチ</simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_MIN_WORD_LEN - 単語の最短長を定義します。
       この制限より短い単語は、stopwordとみなされます。このパラメータ
       はその値自身も範囲に含むことに注意して下さい。つまり、
       UDM_PARAM_MIN_WORD_LEN=3 の場合、3文字の長さの単語はstopwordと
       見なされませんが、2文字の単語はstopwordとみなされます。デフォル
       トは1です。
      </simpara>
     </listitem>    
     <listitem>
      <simpara>
       UDM_PARAM_MAX_WORD_LEN - 最長の単語を定義します。この制限よりも
       長い単符は、stopwordとみなされます。このパラメータはその値も範
       囲に含むことに注意して下さい。つまり、UDM_PARAM_MAX_WORD_LEN=32
       の場合、32文字の単語はstopwordとみなされませんが、33文字の単語
       はみなされます。デフォルトは、32です。
      </simpara>
     </listitem>    
    </itemizedlist>
    </refsect1>
  </refentry>
  
  <refentry id="function.udm-add-search-limit">
   <refnamediv>
    <refname>udm_add_search_limit</refname>
    <refpurpose>種々の検索の制約を設定する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_add_search_limit</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
      <paramdef>int <parameter>var</parameter></paramdef>
      <paramdef>string <parameter>val</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_add_search_limit</function> は、成功時に
     &true;、エラー時に&false;を返し
     ます。検索の制約を追加します。
    </para>
    <para>
     <parameter>agent</parameter> -
     <function>udm_alloc_agent</function>から返されたエージェントへの
     リンク
    </para>
    <para>
     <parameter>var</parameter> - パラメータを定義、制限を示す。
    </para>
    <para>
     <parameter>val</parameter> - カレントのパラメータの値を定義
    </para>
     <para>
     使用可能な<parameter>var</parameter>の値は次のようになります。
    </para>
    <itemizedlist>
     <listitem>
      <simpara>
       UDM_LIMIT_URL - データベースのサブセクションにおける検索を制限
       するためにドキュメントURLに制限を課します。この機能は、SQL の %
       および _ LIKE ワイルドカードをサポートします。ただし、% は、(ゼ
       ロを含む)任意の数の文字の並びで、 _ は1文字だけにマッチします。
       例えば、http://my.domain.__/catalog は
       http://my.domain.ru/catalog および http://my.domain.ua/catalog
       を表すことが可能です。
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_LIMIT_TAG - サイトTAG制約を定義します。indexer-confにおいて特
       定のTAGを様々なサイトやあるサイトの一部に割り付けることが可能です。
       mnoGoSearch 3.1.x のタグは複数行とすることが可能で、メタ記号 %
       および _ を含むことが可能です。メタ記号は、タグ集合により中から
       の検索が可能となります。例えば、ABCDおよびABCEを有するリンクが
       あり、検索の制約がABC_であるとすると、この検索は両方のタグにつ
       いて行われます。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_LIMIT_LANG - ドキュメントの言語に関する制限を定義します。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_LIMIT_CAT - ドキュメントのカテゴリに関する制限を定義します。
       カテゴリはタグ機能に似ていますが、ネストすることが可能です。こ
       のため、あるカテゴリの中に他のカテゴリを有するといったことが可
       能です。各レベルについて2つの文字を使用する必要があります。0-F
       の16進数または0-Zの36進数を使用して下さい。この場合、'Auto'のよ
       うな最上位のカテゴリは01になります。このカテゴリが'Ford'のよう
       なサブカテゴリを有している場合、トップカテゴリが01(親カテゴリ)、
       'Ford'が01となります。この結果をまとめると0101となります。'
       Auto'が'VW'という名前の他のサブカテゴリを有している場合、
       'Ford'カテゴリに属しているためにそのIDは01になるかもしれません
       が、通常は次のカテゴリであるために02になります。このため、その
       IDは0102となるでしょう。VWが'Engine'という名前のサブカテゴリを
       有している場合には、そのIDは再び01になり、'VW'がID02を有してお
       り、'Auto'のIDが01であるので、まとめると、010201となります。こ
       のカテゴリに関してサイトの検索を行う場合には、URLに cat=010201
       を指定します。
      </simpara>
     </listitem>
    </itemizedlist>
   </refsect1>
  </refentry>
  
<refentry id="function.udm-clear-search-limits">
   <refnamediv>
    <refname>udm_clear_search_limits</refname>
    <refpurpose>
     mnoGoSearch 検索に関する全ての制約をクリアする
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_clear_search_limits</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_clear_search_limits</function> は、検索に関する制約
     をリセットし、&true;を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.udm-find">
   <refnamediv>
    <refname>udm_find</refname>
    <refpurpose>検索を実行する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_find</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
      <paramdef>string <parameter>query</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_find</function> は成功時に結果リンクID、エラー時に
      &false; を返します。
    </para>
    <para>
     検索を行います。最初の引数はセッション、次の引数はクエリ本体です。
     検索の実行は、探す単語を入力し、投稿ボタンを押すだけで可能です。
     例えば、"mysql odbc"。この例で引用符は他のテキストから区別するた
     めに使用されており、クエリに引用符 " を使用する必要はありません。
     mnoGoSearchは、単語"mysql" かつ/または単語"odbc"を含む全ての文書
     を見付けます。最も大きな重みを有する文書が最初に表示されます。検
     索モードにALLを使用している場合、検索は入力した単語(とその他の単
     語)を共に含む文書を返します。モードANYを使用している場合、検索は、
     入力した単語のどれかを含む文書のリストを返します。より高度な結果
     を得たい場合には、クエリ言語を使用することも可能です。この場合は、
     検索フォームで検索モード"bool"を選択する必要があります。
    </para>
    <simpara>
     mnoGoSearch では次の演算子が使用可能です。
    </simpara>
    <simpara>
     &amp; - 論理積。例えば、&quot;mysql &amp;
     odbc&quot;。 mnoGoSearch は、単語 &quot;mysql&quot; および単語
     &quot;odbc&quot; を含む全てのURLを見付けます。
    </simpara>
    <simpara>
     | - 論理和。例えば、&quot;mysql|odbc&quot;。 mnoGoSearch は、単語
     &quot;mysql&quot; または単語 &quot;odbc&quot;を含む全てのURLを見
     付けます。
    </simpara>
    <simpara>
     ~ - 論理否定。例えば、&quot;mysql &amp; ~odbc&quot;。
     mnoGoSearch は、単語 &quot;mysql&quot; を含み、同時に単語
     &quot;odbc&quot; を含まない全てのURLを探します。~は、指定した単語
     を結果から除外するだけであることに注意して下さい。クエリ
     &quot;~odbc&quot; は何も見付けません!
    </simpara>
    <simpara>
     () - より複雑なクエリを作成するためのグループ化コマンド。例えば、
     &quot;(mysql | msql) &amp; ~postgres&quot;。クエリ言語は、簡単で
     あり、同時に強力です。クエリは通常の論理式と同等と考えて下さい。
    </simpara>
   </refsect1>
  </refentry>

  <refentry id="function.udm-get-res-param">
   <refnamediv>
    <refname>udm_get_res_param</refname>
    <refpurpose>mnoGoSearch 結果パラメータを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>udm_get_res_param</function></funcdef>
      <paramdef>int <parameter>res</parameter></paramdef>
      <paramdef>int <parameter>param</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_get_res_param</function> は成功時に結果パラメータを
     返します。エラー時に&false;を返します。
    </para>
    <para>
     <parameter>res</parameter> - <function>udm_find</function>から返
     された結果IDへのリンク。
    </para>
    <para>
     <parameter>param</parameter> - パラメータIDであり、次の値のどれか
     となります。
    </para>
    <itemizedlist>
     <listitem>
      <simpara>
       UDM_PARAM_NUM_ROWS - カレントのページで見付かったリンクの数。
       全ての検索ページでの最後のページでのUDM_PARAM_PAGE_SIZE、残りの
       リンクに等しい。
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_PARAM_FOUND - クエリにマッチする結果の合計の数
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_WORDINFO - 見付かった単語に関する情報。例えば、"a
       good book" に関するクエリは "a: stopword, good:5637, book: 120"
       を返します。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_SEARCHTIME - 秒単位の検索時間。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_FIRST_DOC - カレントのページに表示される最初のドキュ
       メントの数。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_PARAM_LAST_DOC - カレントのページに表示される最後のドキュメ
       ントの数。
      </simpara>
     </listitem>
    </itemizedlist>
   </refsect1>
  </refentry>

  <refentry id="function.udm-get-res-field">
   <refnamediv>
    <refname>udm_get_res_field</refname>
    <refpurpose>mnoGoSearch 結果フィールドを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>udm_get_res_field</function></funcdef>
      <paramdef>int <parameter>res</parameter></paramdef>
      <paramdef>int <parameter>row</parameter></paramdef>
	  <paramdef>int <parameter>field</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_get_res_field</function> は、成功時に結果フィールド、
     エラー時に&false;を返します。
    </para>
    <para>
     <parameter>res</parameter> - <function>udm_find</function>から返
     された結果IDへのリンク。
    </para>
    <para>
     <parameter>row</parameter> - カレントページのリンク番号。0から
     <parameter>UDM_PARAM_NUM_ROWS</parameter>までの番号。
    </para>
    <para>
     <parameter>field</parameter> - フィールドID。次の値のどれか。
    </para>
    <itemizedlist>
     <listitem>
      <simpara>
       UDM_FIELD_URL - ドキュメントURLフィールド
      </simpara>
     </listitem> 
     <listitem>
      <simpara>
       UDM_FIELD_CONTENT - ドキュメントContent-typeフィールド (例えば、
       text/html)
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_TITLE - ドキュメントのtitleフィールド。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_KEYWORDS - ドキュメントkeywordsフィールド(META
       KEYWORDSタグから)
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_DESC - ドキュメントdescriptionフィールド (META
       DESCRIPTIONタグから)
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_TEXT - ドキュメント body テキスト (最初の数行でドキュ
       メントの内容に関するアイデアを示す)。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_SIZE - ドキュメントのサイズ。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_URLID - リンクへのユニークなURL ID。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_RATING  - (mnoGoSearchで計算された)ページのレーティン
       グ。 
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_MODIFIED - unixtime形式のlast-modifiedフィールド。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_ORDER - 見つかったドキュメントの中のカレントのドキュ
       メントの数
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       UDM_FIELD_CRC - ドキュメントCRC。
      </simpara>
     </listitem>
    </itemizedlist>
   </refsect1>
  </refentry>

  <refentry id="function.udm-free-res">
   <refnamediv>
    <refname>udm_free_res</refname>
    <refpurpose>mnoGoSearch 結果を開放する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_free_res</function></funcdef>
      <paramdef>int <parameter>res</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_free_res</function> は成功時に
     &true;、エラー時に&false;を返し
     ます。
    </para>
    <para>
     <parameter>res</parameter> - <function>udm_find</function>から返
     された結果IDへのリンク。
    </para>
    <para>
     結果用に確保されたメモリを開放します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.udm-free-agent">
   <refnamediv>
    <refname>udm_free_agent</refname>
    <refpurpose>mnoGoSearch セッションを開放する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_free_agent</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_free_agent</function> は成功時に
     &true;、エラー時に&false;を返し
     ます。
    </para>
    <para>
     <parameter>agent</parameter> -
     <function>udm_alloc_agent</function>から返されたエージェントIDへ
     のリンク。
    </para>
    <para>
     エージェントセッション用に確保されたメモリを開放します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.udm-errno">
   <refnamediv>
    <refname>udm_errno</refname>
    <refpurpose>mnoGoSearch エラー番号を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_errno</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_errno</function> は、mnoGoSearch エラー番号を返しま
     す。エラーがない場合にゼロを返します。
    </para>
    <para>
     <parameter>agent</parameter> -
     <function>udm_alloc_agent</function>へのコールから返されるエージェ
     ントIDへのリンク
    </para>
    <para>
     数字でエージェントエラーコードを返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.udm-error">
   <refnamediv>
    <refname>udm_error</refname>
    <refpurpose>mnoGoSearch エラーメッセージを得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>udm_error</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_error</function> は、mnoGoSearch エラーメッセージを
     返します。エラーがない場合には、空の文字列を返します。
    </para>
    <para>
     <parameter>agent</parameter> は、エージェントIDへのリンクであり、
     <function>udm_alloc_agent</function>をコールした際に得られたもの
     です。
    </para>
    <para>
     エージェントエラーメッセージを得ます。
    </para>
   </refsect1>
  </refentry>
 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
