 <reference id="ref.ibase">
  <title>InterBase関数</title>
  <titleabbrev>InterBase</titleabbrev>

  <partintro>
   <para>
    InterBaseはBorlab/Inpriseが開発した有名なデータベースです。
    InterBaseに関する詳細な情報は、
    <ulink url="&url.ibase;">&url.ibase;</ulink>から得ることができます。
    ところで、InterBaseはオープンソース運動に加わりました！
   </para>
   <note>
    <para>
     InterBase 6の完全なサポートがPHP 4.0で追加されました。
    </para>
   </note>
  </partintro>
  
  <refentry id="function.ibase-connect">
   <refnamediv>
    <refname>ibase_connect</refname>
    <refpurpose>
     InterBaseデータベースへの接続をオープンする
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_connect</function></funcdef>
      <paramdef>string <parameter>database</parameter></paramdef>
      <paramdef>string 
       <parameter><optional>username</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter><optional>password</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter><optional>charset</optional></parameter>
      </paramdef>
      <paramdef>int 
       <parameter><optional>buffers</optional></parameter>
      </paramdef>
      <paramdef>int 
       <parameter><optional>dialect</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter><optional>role</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     InterBaseサーバーへの接続を確立します。
     引数<parameter>database</parameter>は接続するサーバー上の
     データベースファイルへの正しいパスである必要があります。
     ローカルなサーバーへの接続でない場合、使用する接続プロトコルに応じて
     この引数の前に
     'hostname:' (TCP/IP)、'//hostname/' (NetBEUI)、'hostname@' (IPX/SPX)
     のどれかをつける必要があります。
     <parameter>username</parameter>および<parameter>password</parameter>
     はPHP設定ディレクティブibase.default_user
     およびibase.default_passwordで指定することも可能です。
     <parameter>charset</parameter>はデータベースに関するデフォルトの
     文字セットです。 <parameter>buffers</parameter>は
     サーバー側のキャッシュに確保されるデータベースバッファの数です。
     0または省略された場合、サーバーはデフォルト値を用います。
     <parameter>dialect</parameter>は、接続時に実行される全ての命令に関する
     SQL方言のデフォルト値を選択し、デフォルトではクライアントライブラリでサポート
     される方言のうち、最高位のものになります。
    </para>
    <para>
     同じ引数で<function>ibase_connect</function>が再度コールされた場合、
     新規のリンクは作成されず、代わりに既にオープンされているリンクの
     リンクIDが返されます。
     <function>ibase_close</function>を明示的にコールしない限り、
     サーバーへのリンクはスクリプトの実行終了時に閉じられます。
     <example>
      <title><function>ibase_connect</function>の例</title>
      <programlisting role="php">
&lt;?php
       $dbh = ibase_connect ($host, $username, $password);
       $stmt = 'SELECT * FROM tblname';
       $sth = ibase_query ($dbh, $stmt);
       while ($row = ibase_fetch_object ($sth)) {
       print $row->email . "\n";
       }
       ibase_close ($dbh);
?>
      </programlisting>
     </example>
    </para>
    <note>
     <para>
      <parameter>buffers</parameter>はPHP 4-RC2で追加されました。
     </para>
    </note>
    <note>
     <para>
      <parameter>dialect</parameter>はPHP 4-RC2で追加されました。
      このオプションは、InterBase 6以降でのみ使用可能です。
     </para>
    </note>
    <note>
     <para>
      <parameter>role</parameter>はPHP 4-RC2で追加されました。
      この機能は、InterBase 5以降でのみ使用可能です。
     </para>
    </note>
    <para>
     <function>ibase_pconnect</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-pconnect">
   <refnamediv>
    <refname>ibase_pconnect</refname>
    <refpurpose>
     InterBaseデータベースへの持続的接続をオープンする
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_pconnect</function></funcdef>
      <paramdef>string <parameter>database</parameter></paramdef>
      <paramdef>string 
       <parameter><optional>username</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter><optional>password</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter><optional>charset</optional></parameter>
      </paramdef>
      <paramdef>int 
       <parameter><optional>buffers</optional></parameter>
      </paramdef>
      <paramdef>int 
       <parameter><optional>dialect</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter><optional>role</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ibase_pconnect</function>の動作は、
     <function>ibase_connect</function>と非常に似ていますが、
     大きな違いが二つあります。
     まず、この関数は接続時に同じパラメータで既にオープンされている
     (持続的)リンクを探します。見つかった場合、新規接続をオープンする
     代わりにそのリンクのIDが返されます。
     2番目の違いとしては、InterBaseサーバーへの接続は
     スクリプト終了時にも閉じられないということです。
     代わりに、そのリンクは今後使用するためにオープンされたままとなります。
     (<function>ibase_close</function>は<function>ibase_pconnect</function>
     によりオープンされたリンクを閉じません)
     このため、この型のリンクは'持続的(persistent)'と呼ばれます。
    </para>
    <note>
     <para>
      <parameter>buffers</parameter> は PHP4-RC2 で追加されました。
     </para>
    </note>
    <note>
     <para>
      <parameter>dialect</parameter> は PHP4-RC2 で追加されました。こ
       れは、InterBase 6 以降のバージョンでのみ機能します。
     </para>
    </note>
    <note>
     <para>
      <parameter>role</parameter> は PHP4-RC2 で追加されました。これは、
      InterBase 5 以降のバージョンでのみ機能します。
     </para>
    </note>
    <para>
     この関数に渡されるパラメータの意味については、
     <function>ibase_connect</function>を参照下さい。引数の意味は全く同じです。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-close">
   <refnamediv>
    <refname>ibase_close</refname>
    <refpurpose>
     InterBaseデータベースへの接続を閉じる
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_close</function></funcdef>
      <paramdef>int 
       <parameter><optional>connection_id</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ibase_connect</function>から返された接続IDが指す
     InterBaseデータベースへのリンクを閉じます。
     接続IDが省略された場合、最後にオープンされたリンクが仮定されます。
     リンクにおけるデフォルトのトランザクションがコミットされ、
     他のトランザクションはロールバックされます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-query">
   <refnamediv>
    <refname>ibase_query</refname>
    <refpurpose>InterBaseデータベースでクエリを実行する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_query</function></funcdef>
      <paramdef>int 
       <parameter><optional>link_identifier</optional></parameter>
      </paramdef>
      <paramdef>string 
       <parameter>query</parameter> 
      </paramdef>
      <paramdef>int 
       <parameter><optional>bind_args</optional></parameter> 
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
     InterBaseデータベース上でクエリーを実行し、結果IDを返します。
     このIDは、<function>ibase_fetch_row</function>,
     <function>ibase_fetch_object</function>,
     <function>ibase_free_result</function>,
     <function>ibase_free_query</function>で使用されます。
    </simpara>
    <note>
     <para>
      この関数は、パラメータへの変数のバインドをサポートしていますが、
      この機能を使用する意味はあまりありません。
      実用例については、<function>ibase_prepare</function>および
      <function>ibase_execute</function>を参照下さい。
     </para>
    </note>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-fetch-row">
   <refnamediv>
    <refname>ibase_fetch_row</refname>
    <refpurpose>InterBaseデータベースから1行分の結果を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>ibase_fetch_row</function></funcdef>
      <paramdef>int 
       <parameter>result_identifier</parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
     <function>ibase_query</function>を実行して得られた結果IDが指す結果から
     次の行を返します。
    </simpara>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-fetch-object">
   <refnamediv>
    <refname>ibase_fetch_object</refname>
    <refpurpose>InterBaseデータベースからオブジェクトを得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>object <function>ibase_fetch_object</function></funcdef>
      <paramdef>int 
       <parameter>result_id</parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ibase_query</function>または<function>ibase_execute
     </function>により得られた<parameter>result_id</parameter>から
     擬似オブジェクトとして1行分の結果を取得します。
     <informalexample>
      <programlisting role="php">
&lt;?php
       $dbh = ibase_connect ($host, $username, $password);
       $stmt = 'SELECT * FROM tblname';
       $sth = ibase_query ($dbh, $stmt);
       while ($row = ibase_fetch_object ($sth)) {
       print $row->email . "\n";
       }
       ibase_close ($dbh);
?>
      </programlisting>
     </informalexample>
    </para>
    <para>
     <function>ibase_fetch_row</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-field-info">
   <refnamediv>
    <refname>ibase_field_info</refname>
    <refpurpose>
     フィールドに関する情報を得る
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>ibase_field_info</function></funcdef>
      <paramdef>int <parameter>result</parameter></paramdef>
      <paramdef>int <parameter>field number</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     select クエリが実行された後、フィールドに関する情報を配列として返
     します。配列の要素には、name、alias、relation、length、type が含
     まれます。
     <informalexample>
      <programlisting role="php">
// helio@helio.com.br  08-Dec-2000 02:53

$rs=ibase_query("Select * from something"); 
$coln = ibase_num_fields($rs); 
for ($i=0 ; $i < $coln ; $i++) { 
    $col_info = ibase_field_info($rs, $i); 
    echo "name: ".$col_info['name']."\n"; 
    echo "alias: ".$col_info['alias']."\n"; 
    echo "relation: ".$col_info['relation']."\n"; 
    echo "length: ".$col_info['length']."\n"; 
    echo "type: ".$col_info['type']."\n"; 
    }
      </programlisting>
     </informalexample>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-free-result">
   <refnamediv>
    <refname>ibase_free_result</refname>
    <refpurpose>結果セットを解放する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_free_result</function></funcdef>
      <paramdef>int 
       <parameter>result_identifier</parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
     <function>ibase_query</function>により作成された結果保持用メモリを
     解放します。
    </simpara>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-prepare">
   <refnamediv>
    <refname>ibase_prepare</refname>
    <refpurpose>
     後でパラメータのバインド及び実行するためにクエリを準備する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_prepare</function></funcdef>
      <paramdef>int 
       <parameter><optional>link_identifier</optional></parameter>
      </paramdef>
      <paramdef>string <parameter>query</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
     対応するパラメータのバインドや
     (<function>ibase_execute</function>による)実行をするためのクエリを準備します。
    </simpara>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-execute">
   <refnamediv>
    <refname>ibase_execute</refname>
    <refpurpose>準備されたクエリを実行する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_execute</function></funcdef>
      <paramdef>int 
       <parameter>query</parameter>
      </paramdef>
      <paramdef>int 
       <parameter><optional>bind_args</optional></parameter> 
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ibase_prepare</function>により事前に準備されたクエリを
     実行します。いくつかのパラメータが変わるだけで同じクエリーを
     複数回実行する場合には、この関数は
     <function>ibase_query</function>を使用するよりもずっと効率的です。
     <informalexample>
      <programlisting role="php">
&lt;?php
       $updates = array(
           1 => 'Eric',
           5 => 'Filip',
           7 => 'Larry'
       );

       $query = ibase_prepare("UPDATE FOO SET BAR = ? WHERE BAZ = ?");

       while (list($baz, $bar) = each($updates)) {
       ibase_execute($query, $bar, $baz);
       }
?>
      </programlisting>
     </informalexample>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-trans">
   <refnamediv>
    <refname>ibase_trans</refname>
    <refpurpose>トランザクションを開始する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_trans</function></funcdef>
      <paramdef>int 
       <parameter><optional>trans_args</optional></parameter> 
      </paramdef>
      <paramdef>int 
       <parameter><optional>link_identifier</optional></parameter> 
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     トランザクションを開始します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-commit">
   <refnamediv>
    <refname>ibase_commit</refname>
    <refpurpose>トランザクションをコミットする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_commit</function></funcdef>
      <paramdef>int 
       <parameter><optional>link_identifier</optional></parameter> 
      </paramdef>
      <paramdef>int <parameter>trans_number</parameter> 
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ibase_trans</function>で作成されたトランザクション
     <parameter>trans_number</parameter> をコミットします。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-rollback">
   <refnamediv>
    <refname>ibase_rollback</refname>
    <refpurpose>トランザクションをロールバックする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_rollback</function></funcdef>
      <paramdef>int 
       <parameter><optional>link_identifier</optional></parameter> 
      </paramdef>
      <paramdef>int <parameter>trans_number</parameter> 
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ibase_trans</function> で作成されたトランザクション
     <parameter>trans_number</parameter> をロールバックします。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-free-query">
   <refnamediv>
    <refname>ibase_free_query</refname>
    <refpurpose>
     準備されたクエリにより確保されたメモリを解放する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_free_query</function></funcdef>
      <paramdef>int 
       <parameter>query</parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
     <function>ibase_prepare</function>により準備されたクエリを解放します。
    </simpara>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-timefmt">
   <refnamediv>
    <refname>ibase_timefmt</refname>
    <refpurpose>
     クエリーから返されるtimestamp、data、time型カラムのフォーマットを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_timefmt</function></funcdef>
      <paramdef>string 
       <parameter>format</parameter>
      </paramdef>
      <paramdef>int
       <parameter><optional>columntype</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     クエリーから返されるtimestamp、data,time型カラムのフォーマットを設定します。
     内部的にこれらのカラムはC言語の関数strftime()によりフォーマットされます。このため、
     文字列のフォーマットについてはこのC言語の関数ドキュメントを参照下さい。
     <parameter>columntype</parameter>には定数IBASE_TIMESTAMP、IBASE_DATE、IBASE_TIME
     のどれかを指定します。省略した場合には、下位互換性を保つため     
     IBASE_TIMESTAMPがデフォルト値となります。
     <informalexample>
      <programlisting role="php">
&lt;?php
    // InterBase 6 TIME型カラムが
    // '05 hours 37 minutes'の形式で返されます 
    ibase_timefmt("%H hours %M minutes", IBASE_TIME);
?>
      </programlisting>
     </informalexample>
    </para>
    <para>
     PHP設定ディレクティブibase.timestampformat、ibase.dateformat、ibase.timeformat
     によりこれらのフォーマットのデフォルト値を設定することが可能です。
    </para>
    <note>
     <para>
      <parameter>columntype</parameter>はPHP 4.0で追加されました。
      このパラメータはInterBaseバージョン6以降でしか意味を持ちません。
     </para>
    </note>
    <note>
     <para>
      PHP 4.0では、PHP設定ディレクティブibase.timeformatがibase.timestampformatに
      名前が変更され、ディレクティブibase.dateformatとibase.timeformatが
      追加され、過去のバージョンとの互ϛ性がない変更が行われています。
      この変更は、ディレクティブの名前がそれ自体の機能により一致するように
      行われたものです。
     </para>
    </note>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-num-fields">
   <refnamediv>
    <refname>ibase_num_fields</refname>
    <refpurpose>
     結果セットにおけるフィールド数を得る
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ibase_num_fields</function></funcdef>
      <paramdef>int <parameter>result_id</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     結果セットにおけるフィールド数を整数として返します。
     <informalexample>
      <programlisting role="php">
&lt;?php
    $dbh = ibase_connect ($host, $username, $password);
    $stmt = 'SELECT * FROM tblname';
    $sth = ibase_query ($dbh, $stmt);

    if (ibase_num_fields($sth) > 0) {
        while ($row = ibase_fetch_object ($sth)) {
            print $row->email . "\n";
       }
    } else {
        die("No Results were found for your query");
    }

    ibase_close ($dbh);
?>
      </programlisting>
     </informalexample>
    </para>
    <para>
     <function>ibase_field_info</function>も参照下さい。
    </para>
    <note>
     <para>
      <function>ibase_num_fields</function>は現在、PHP 4では動作しません。
     </para>
    </note>
   </refsect1>
  </refentry>

  <refentry id="function.ibase-errmsg">
   <refnamediv>
    <refname>ibase_errmsg</refname>
    <refpurpose>
     エラーメッセージを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>ibase_errmsg</function></funcdef>
      <paramdef>void <parameter></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <simpara>
     エラーメッセージを有する文字列を返します。
    </simpara>
   </refsect1>
  </refentry>

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
