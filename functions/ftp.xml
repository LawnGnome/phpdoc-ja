 <reference id="ref.ftp">
  <title>FTP 関数</title>
  <titleabbrev>FTP</titleabbrev>

  <partintro>
   <para>
    この拡張モジュールの関数は、&spec.ftp;で定義された File Transfer
    Protocol (FTP)を使用してファイルサーバにアクセスするクライアントの
    実装です。
   </para>

   <para>
    FTP は、File Transfer Protocol を意味します。
   </para>
   <para>
    FTP モジュールを使用する際、次の定数が定義されます。
    <constant>FTP_ASCII</constant>および<constant>FTP_BINARY</constant>
   </para>
   <para>
    PHPの設定でFTP関数を使用するためには、PHP 4をインストールする場合に
    は、オプション <link linkend="install.configure.enable-ftp">
     <option>--enable-ftp</option></link>、PHP 3を使用している場合には、
    <link linkend="install.configure.with-ftp">
     <option>--with-ftp</option></link>を使用する必要があります。
   </para>
   <para>
    <example>
     <title><function>ftp</function> の例</title>
      <programlisting>
&lt;?php
// 基本的な接続を設定
$conn_id = ftp_connect("$ftp_server"); 

// ユーザ名とパスワードを指定してログイン
$login_result = ftp_login($conn_id, "$ftp_user_name", "$ftp_user_pass"); 

// 接続を確認
if ((!$conn_id) || (!$login_result)) { 
        echo "Ftp connection has failed!";
        echo "Attempted to connect to $ftp_server for user $user"; 
        die; 
    } else {
        echo "Connected to $ftp_server, for user $user";
    }

// ファイルをアップロードする
$upload = ftp_put($conn_id, "$destination_file", "$source_file", FTP_BINARY); 

// アップロードのステータスを確認
if (!$upload) { 
        echo "Ftp upload has failed!";
    } else {
        echo "Uploaded $source_file to $ftp_server as $destination_file";
    }

// FTPストリームを閉じる
ftp_quit($conn_id); 
?>
     </programlisting>
    </example>
   </para>
  </partintro>

  <refentry id="function.ftp-connect">
   <refnamediv>
    <refname>ftp_connect</refname>
    <refpurpose>FTP 接続をオープンする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_connect</function></funcdef>
      <paramdef>string <parameter>host</parameter></paramdef>
      <paramdef>int 
       <parameter>
	<replaceable><optional>port</optional></replaceable>
       </parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に FTP ストリームを、エラーの場合に &false; を返します。</para>
    <para>
     <function>ftp_connect</function> は、指定した <parameter>host</parameter>
     への FTP 接続をオープンします。
     <parameter>port</parameter> パラメータは別のポートに接続することを
     指定します。これを省略するか 0 にした場合、デフォルトの FTP ポート、
     つまり、21 が使用されます。</para>
   </refsect1>
  </refentry>


  <refentry id="function.ftp-login">
   <refnamediv>
    <refname>ftp_login</refname>
    <refpurpose>FTP 接続でログインする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_login</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>username</parameter></paramdef>
      <paramdef>string <parameter>password</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。</para>
    <para> 
     指定した FTP ストリームにログインします。</para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-pwd">
   <refnamediv>
    <refname>ftp_pwd</refname>
    <refpurpose>現在のディレクトリ名を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>ftp_pwd</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     現在のディレクトリを返します。エラーの場合は、&false; を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-cdup">
   <refnamediv>
    <refname>ftp_cdup</refname>
    <refpurpose>親ディレクトリに移動する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_cdup</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。</para>
    <para> 
     親ディレクトリに移動します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-chdir">
   <refnamediv>
    <refname>ftp_chdir</refname>
    <refpurpose>FTP サーバー上でディレクトリを移動する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_chdir</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>directory</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。</para>
    <para> 
     指定した <parameter>directory</parameter> に移動します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-mkdir">
   <refnamediv>
    <refname>ftp_mkdir</refname>
    <refpurpose>ディレクトリを作成する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>ftp_mkdir</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>directory</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功した時に、新規に作成したディレクトリ名、エラー時に&false;を返します。</para>
    <para> 
     指定した <parameter>directory</parameter> を作成します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-rmdir">
   <refnamediv>
    <refname>ftp_rmdir</refname>
    <refpurpose>ディレクトリを削除する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_rmdir</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>directory</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。</para>
    <para> 
     指定した <parameter>directory</parameter> を削除します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-nlist">
   <refnamediv>
    <refname>ftp_nlist</refname>
    <refpurpose>指定したディレクトリのファイルの一覧を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>ftp_nlist</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>directory</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時にファイル名の配列を、エラー時に &false; を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-rawlist">
   <refnamediv>
    <refname>ftp_rawlist</refname>
    <refpurpose>
     指定したディレクトリの詳細なファイル一覧を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>ftp_rawlist</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>directory</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ftp_rawlist</function> は、FTP LIST コマンドを実行し、
     結果を配列として返します。各配列要素は、一行分のテキストに対応し
     ます。出力に関する処理は全く行われません。結果の解釈の仕方を定義
     するために <function>ftp_systype</function> から返されるシステム
     型IDをを使用することができます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-systype">
   <refnamediv>
    <refname>ftp_systype</refname>
    <refpurpose>
     リモート FTP サーバーのシステム型IDを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>ftp_systype</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     リモートシステム型を返します。エラー時には&false;を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-pasv">
   <refnamediv>
    <refname>ftp_pasv</refname>
    <refpurpose>パッシブモードをオンまたはオフにする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_pasv</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>int <parameter>pasv</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に&true;、エラー時に&false;を返します。
    </para>
    <para>
     <function>ftp_pasv</function> は、<parameter>pasv</parameter> パ
     ラメータが &true; の場合にパッシブモードをオンにします。
     (<parameter>pasv</parameter> が &false; の場合は、パッシブモードを
     オフにします) パッシモードでは、データ接続はサーバーではなくクラ
     イアントにより初期化されます。
    </para>
   </refsect1>
  </refentry>
 
  <refentry id="function.ftp-get">
   <refnamediv>
    <refname>ftp_get</refname>
    <refpurpose>FTPサーバーからファイルをダウンロードする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_get</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>local_file</parameter></paramdef>
      <paramdef>string <parameter>remote_file</parameter></paramdef>
      <paramdef>int <parameter>mode</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。
    </para>
    <para>
     <function>ftp_get</function> は、FTPサーバーから
     <parameter>remote_file</parameter>を取得し、ローカルシステムの
     <parameter>local_file</parameter> に保存します。転送モード
     <parameter>mode</parameter>には、<constant>FTP_ASCII</constant>ま
     たは <constant>FTP_BINARY</constant>のどちらかを指定する必要があ
     ります。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-fget">
   <refnamediv>
    <refname>ftp_fget</refname>
    <refpurpose>FTP サーバーからファイルをダウンロードし、
     オープン中のファイルに保存する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_fget</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>int <parameter>fp</parameter></paramdef>
      <paramdef>string <parameter>remote_file</parameter></paramdef>
      <paramdef>int <parameter>mode</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。
    </para>
    <para>
     <function>ftp_fget</function> は、FTP サーバーから
     <parameter>remote_file</parameter> を取得し、指定したファイルポイ
     ンタ <parameter>fp</parameter> に書きこみます。転送モード
     <parameter>mode</parameter> には、<constant>FTP_ASCII</constant>
     または<constant>FTP_BINARY</constant>のどちらかを指定する必要があ
     ります。
    </para>
   </refsect1>
  </refentry>
 
  <refentry id="function.ftp-put">
   <refnamediv>
    <refname>ftp_put</refname>
    <refpurpose>FTP サーバーにファイルをアップロードする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_put</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>remote_file</parameter></paramdef>
      <paramdef>string <parameter>local_file</parameter></paramdef>
      <paramdef>int <parameter>mode</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。
    </para>
    <para>
     <function>ftp_put</function> は <parameter>local_file</parameter> を
     <parameter>remote_file</parameter> として FTP サーバーに保存します。
     <parameter>mode</parameter> には、<constant>FTP_ASCII</constant>
     または<constant>FTP_BINARY</constant>
    </para>
    <para>
     <example>
      <title><function>ftp_put</function> の例</title>
      <programlisting role="php">
$upload = ftp_put ($conn_id, "$destination_file", "$source_file", FTP_ASCII); 
      </programlisting>
     </example>
    </para>
    </refsect1>
   </refentry>
 
  <refentry id="function.ftp-fput">
   <refnamediv>
    <refname>ftp_fput</refname>
    <refpurpose>
     オープン中のファイルをFTPサーバーにアップロードする
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_fput</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>remote_file</parameter></paramdef>
      <paramdef>int <parameter>fp</parameter></paramdef>
      <paramdef>int <parameter>mode</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に &true;、エラー時に &false; を返します。
    </para>
    <para>
     <function>ftp_fput</function> は、ファイルポインタ
     <parameter>fp</parameter> からデータをファイルの終端まで
     アップロードします。結果は、FTPサーバーの
     <parameter>remote_file</parameter> に保存されます。
     転送モード <parameter>mode</parameter> には、
     <constant>FTP_ASCII</constant>または
     <constant>FTP_BINARY</constant>のどちらかを指定する必要があります。
    </para>
   </refsect1>
  </refentry>
 
  <refentry id="function.ftp-size">
   <refnamediv>
    <refname>ftp_size</refname>
    <refpurpose>指定したファイルのサイズを返す</refpurpose>
   </refnamediv>
    <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_size</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>remote_file</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時にファイルのサイズ、エラー時に -1 を返します。
    </para>
    <para>
     <function>ftp_size</function> はファイルのサイズを返します。エラー
     を生じた場合、またはファイルが存在しない場合、 -1 が返されます。
     全てのサーバーがこの機能をサポートしているわけではないことに注意
     してください。
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.ftp-mdtm">
   <refnamediv>
    <refname>ftp_mdtm</refname>
    <refpurpose>指定したファイルが最後に修正された時間を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_mdtm</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>remote_file</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時にUNIXのタイムスタンプ、エラー時に -1 を返します。
    </para>
    <para>
     <function>ftp_mdtm</function> はあるファイルについて最後に修正さ
     れた時間を調べ、UNIXタイムスタンプとして返します。エラーを生じた
     場合、またはファイルが存在しない場合、-1 が返されます。全てのサー
     バーがこの機能をサポートしているわけではないことに注意してください。
    </para>
    <note>
     <para>
      <function>ftp_mdtm</function> はディレクトリについては動作しません。
     </para>
    </note>
   </refsect1>
  </refentry>
  
  <refentry id="function.ftp-rename">
   <refnamediv>
    <refname>ftp_rename</refname>
    <refpurpose>ftp サーバー上のファイルの名前を変更する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <funcsynopsis>
     <funcprototype>
      <funcdef>bool <function>ftp_rename</function></funcdef>
      <paramdef>resource <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>from</parameter></paramdef>
      <paramdef>string <parameter>to</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に&true;、エラー時に&false;を返します。
    </para>
    <para>
     <function>ftp_rename</function> は、
     FTP ストリーム <parameter>ftp_stream</parameter>において
     <parameter>from</parameter> という名前のファイルまたはディレクトリを
     <parameter>to</parameter> に変更します。
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.ftp-delete">
   <refnamediv>
    <refname>ftp_delete</refname>
    <refpurpose>ftp サーバー上のファイルを削除する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_delete</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>path</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に&true;、エラー時に&false;を返します。
    </para>
    <para>
     <function>ftp_delete</function> は、<parameter>path</parameter>
     で指定したファイルをFTPサーバーから削除します。
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.ftp-site">
   <refnamediv>
    <refname>ftp_site</refname>
    <refpurpose>SITEコマンドをサーバーに送信する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_site</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
      <paramdef>string <parameter>cmd</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     成功時に&true;、エラー発生時に&false;を返します。</para>
    <para>
     <function>ftp_site</function>は<parameter>cmd</parameter>で
     指定されたコマンドをFTPサーバーに送信します。SITEコマンドは
     規格が統一されていないため、サーバーにより仕様が異なります．
     ファイルのパーミッションやグループメンバーの設定のような
     処理を行う際には有用です。</para>
   </refsect1>
  </refentry>

  <refentry id="function.ftp-quit">
   <refnamediv>
    <refname>ftp_quit</refname>
    <refpurpose>FTP 接続を閉じる</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>ftp_quit</function></funcdef>
      <paramdef>int <parameter>ftp_stream</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>ftp_connect</function> は、<parameter>ftp_stream</parameter>
     を閉じます。</para>
   </refsect1>
  </refentry>

</reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
