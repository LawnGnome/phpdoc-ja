 <reference id="ref.imap">
  <title>IMAP 関数</title>
  <titleabbrev>IMAP</titleabbrev>

   <partintro>
   <simpara>
   これらの関数を動作させるには、<option role="configure">--with-imap</option> 
	を付けて PHP をコンパイルする必要があります。
   この際に、C クライアントライブラリが必要となります。
   最新版を <ulink
     url="ftp://ftp.cac.washington.edu/imap/">ftp://ftp.cac.washington.edu/imap/</ulink> から取得し、コンパイルして下さい。
     その後、c-client/c-client.a を /usr/local/lib またはリンクパスが通った
     他のディレクトリにコピー、c-client/rfc822.h, mail.h,linkage.h を
     /usr/local/include またはインクルードパスが通った他のディレクトリに
     コピーして下さい。</simpara>
   <simpara>
    IMAP関数がサポートするのは、その名前から連想されるようにIMAPプロトコルに限定されて
    いるわけではないということに注意して下さい。
    実際の処理を行うCクライアントライブラリは、NTTP、POP3、ローカルなメールボックス
    へのアクセスもサポートしています。
    より詳細な情報に関しては、<function>imap_open</function> を参照ください。
   </simpara>
   </partintro>
 
  <refentry id="function.imap-append">
   <refnamediv>
    <refname>imap_append</refname>
    <refpurpose>指定されたメールボックスに文字列メッセージを追加する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_append</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>mbox</parameter></paramdef>
     <paramdef>string <parameter>message</parameter></paramdef>
     <paramdef>string<parameter>flags</parameter></paramdef>
    </funcsynopsis>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
    <para>  
    <function>imap_append</function> は、文字列メッセージを指定した
	メールボックス<parameter>mbox</parameter> に追加します。
    オプションの <parameter>flags</parameter> が指定された場合、
    <parameter>flags</parameter> もそのメールボックスに書きこまれます。</para>
     <para>
     Cyrus IMAP サーバーと通信する際には、改行コードとして "\n" の替わりに
     "\r\n" と使用する必要があります。
     さもなくば、操作は失敗します。</para>
  </refsect1>
  </refentry>

  <refentry id="function.imap-base64">
   <refnamediv>
    <refname>imap_base64</refname>
    <refpurpose>BASE64 でエンコードされたテキストのデコード</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>imap_base64</function></funcdef>
     <paramdef>string <parameter>text</parameter></paramdef>
    </funcsynopsis>
    <para>
    <function>imap_base64</function>  関数は、BASE64 でエンコードされた
	テキストをデコードします。デコードされたメッセージは文字列として
	返されます。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-body">
   <refnamediv>
    <refname>imap_body</refname>
    <refpurpose>メッセージ本文を読む</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>imap_body</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>int <parameter>msg_number</parameter></paramdef>
     <paramdef>int <parameter>flags</parameter></paramdef>
    </funcsynopsis>
    <para>
   <function>imap_body</function>は、現在のメールボックスにある 
	<parameter>msg_number</parameter> 番目のメッセージの本文を返します。
    オプションの <parameter>flags</parameter> はビットマスクであり、
    以下の要素の組み合わせとなってます。
      <itemizedlist>
       <listitem><simpara>
 	FT_UID - msgno は UID です</simpara></listitem>
       <listitem><simpara>
 	FT_PEEK - 既に設定されていない場合、\Seen フラグを設定しない</simpara></listitem>
       <listitem><simpara>
 	FT_INTERNAL - 内部フォーマットで文字列を返す。CRLF には
	適用されない。</simpara></listitem>
      </itemizedlist></para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-check">
   <refnamediv>
    <refname>imap_check</refname>
    <refpurpose>現在のメールボックスをチェックする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imap_check</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
    </funcsynopsis>
    <para>
    現在のメールボックスに関する情報を返します。失敗した場合は、FALSE を返します。</para>
    <para>  
    <function>imap_check()</function> 関数は、サーバ上の現在のメールボックスのステータス
    をチェックし、その情報を以下のプロパティを有するオブジェクトとして返します。</para>
    <para>
    <informalexample>
    <literallayout>
    Date : メッセージの日付
    Driver : ドライバ
    Mailbox : メールボックスの名前
    Nmsgs : メッセージの数
    Recent : 新しいメッセージの数
    </literallayout>
    </informalexample></para>
   </refsect1>
  </refentry>



  <refentry id="function.imap-close">
   <refnamediv>
    <refname>imap_close</refname>
    <refpurpose>IMAP ストリームをクローズする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_close</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>int <parameter>flags</parameter></paramdef>
    </funcsynopsis>
    <para>  
    IMAP ストリームをクローズします。
    オプション <parameter>flag</parameter> に CL_EXPUNGE を指定した場合、
    メールボックスを閉じる前に暗黙のうちに削除します。</para>

   </refsect1>
  </refentry>

  <refentry id="function.imap-createmailbox">
   <refnamediv>
    <refname>imap_createmailbox</refname>
    <refpurpose>新しいメールボックスを作る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_createmailbox</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>mbox</parameter></paramdef>
    </funcsynopsis>
    <para>  
    <function>imap_createmailbox()</function> は <parameter>mbox</parameter> 
    で指定された新しいメールボックスを作成します。</para>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-delete">
   <refnamediv>
    <refname>imap_delete</refname>
    <refpurpose>現在のメールボックスから削除するメッセージに印を付ける
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_delete</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>int <parameter>msg_number</parameter></paramdef>
    </funcsynopsis>
    <para>
    TRUE を返します。</para>
    <para>
    <function>imap_delete</function> 関数は、<parameter>msg_number</parameter>
	 が指す削除する予定のメッセージをマークします。メッセージを実際に削除する
    のは <function>imap_expunge</function> により行われます。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-deletemailbox">
   <refnamediv>
    <refname>imap_deletemailbox</refname>
    <refpurpose>メールボックスを削除する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_deletemailbox</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>mbox</parameter></paramdef>
    </funcsynopsis>
    <para>  
    <function>imap_deletemailbox</function> は指定されたメールボックスを
	削除します。</para>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-expunge">
   <refnamediv>
    <refname>imap_expunge</refname>
    <refpurpose>削除用にマークされたすべてのメッセージを削除する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_expunge</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
    </funcsynopsis>
    <para>  
    <function>imap_expunge</function> は、<function>imap_delete</function> で
	削除用としてマークされたすべてのメッセージを削除します。</para>
    <para>
    TRUE を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-fetchbody">
   <refnamediv>
    <refname>imap_fetchbody</refname>
    <refpurpose>メッセージ本文中の特定のセクションを取り出す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>imap_fetchbody</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>int <parameter>msg_number</parameter></paramdef>
     <paramdef>string <parameter>part_number</parameter></paramdef>
     <paramdef>flags <parameter>flags</parameter></paramdef>
    </funcsynopsis>
    <para>
    この関数は、指定されたメッセージ本文中の特定のセクションをテキスト
    文字列として取り出し、そのテキスト文字列を返します。セクション指定
    はピリオドで区切られた整数文字列で行い、この整数は IMAP4 仕様における
    本文パートのリストへのインデックスとなります。本文パートはこの関数
    ではデコードされません。</para>
      <para>
      <function>imap_fetchbody </function> の オプション
      <parameter>flags</parameter> はビットマスクであり、
      以下の組合わせとなります。
      <itemizedlist>
       <listitem><simpara>
 	FT_UID - msgono は UID である</simpara></listitem>
       <listitem><simpara>
 	FT_PEEK - 既に設定されていない場合、\Seen フラグを設定しない</simpara></listitem>
       <listitem><simpara>
 	FT_INTERNAL - 内部フォーマットで文字列を返す。CRLF には
	適用されない。</simpara></listitem>
      </itemizedlist></para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-fetchstructure">
   <refnamediv>
    <refname>imap_fetchstructure</refname>
    <refpurpose>特定のメッセージの構造を読み込む</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>object <function>imap_fetchstructure</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>int <parameter>msg_number</parameter></paramdef>
     <paramdef>int 
      <parameter><optional>flags</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
    この関数は、指定したメッセージに関するすべての構造化された情報を取り出します。
    オプションのパラメータ <parameter>flags</parameter> に指定可能なのは
    <parameter>FT_UID</parameter>のみで、これは、
    引数 <parameter>msg_number</parameter> を<parameter>UID</parameter> として
    処理することを関数に指定するためのものです。
    
    返されるオブジェクトは、MIMEの添付の各要素に類似のオブジェクトとして
    エンベロープ、内部の日付、サイズ、フラグ、本体を含んでいます。
    返されるオブジェクトの構造は次のようになります。
     </para>
     <para>
      <table>
       <title>
        <function>imap_fetchstructure</function>で返されるオブジェクト
       </title>
       <tgroup cols="2">
        <tbody>
 	<row>
 	 <entry>type</entry>
 	 <entry>最初のbody部の型</entry>
 	</row>
 	<row>
 	 <entry>encoding</entry>
 	 <entry>body部を転送する際のエンコード法</entry>
 	</row>
 	<row>
 	 <entry>ifsubtype</entry>
 	 <entry>subtype文字列がある場合にtrue</entry>
 	</row>
 	<row>
 	 <entry>subtype</entry>
 	 <entry><acronym>MIME</acronym> の subtype</entry>
 	</row>
 	<row>
 	 <entry>ifdescription</entry>
 	 <entry>description文字列がある場合にtrue</entry>
 	</row>
 	<row>
 	 <entry>description</entry>
 	 <entry>内容を記述する文字列</entry>
 	</row>
 	<row>
 	 <entry>ifid</entry>
 	 <entry>identification 文字列がある場合にtrue</entry>
 	</row>
 	<row>
 	 <entry>id</entry>
 	 <entry>identification 文字列</entry>
 	</row>
 	<row>
 	 <entry>lines</entry>
 	 <entry>行数</entry>
 	</row>
 	<row>
 	 <entry>bytes</entry>
 	 <entry>バイト数</entry>
 	</row>
 	<row>
 	 <entry>ifdisposition</entry>
 	 <entry>disposition 文字列がある場合にtrue</entry>
 	</row>
 	<row>
 	 <entry>disposition</entry>
 	 <entry>disposition 文字列</entry>
 	</row>
 	<row>
 	 <entry>ifdparameters</entry>
 	 <entry>dparameters 配列が存在する場合に true</entry>
 	</row>
 	<row>
 	 <entry>dparameters
 	  <footnote>
 	   <para>
 	    dparameters はオブジェクトの配列です。
	    各オブジェクトは、プロパティ
 	    "attribute" および "value" を有しています。
 	   </para>
 	  </footnote>
 	 </entry>
 	 <entry>Disposition parameter array</entry>
 	</row>
 	<row>
 	 <entry>ifparameters</entry>
 	 <entry>配列 parameters が存在する場合に true</entry>
 	</row>
 	<row>
 	 <entry>parameters
 	  <footnote>
 	   <para>
 	    parameter はオブジェクトの配列です。各オブジェクトは、
	    プロパティ "attributte" および "value" を有しています。
 	   </para>
 	  </footnote>
 	 </entry>
 	 <entry><acronym>MIME</acronym> パラメータ配列</entry>
 	</row>
 	<row>
 	 <entry>parts
 	  <footnote>
 	   <para>
 	    parts はオブジェクトの配列であり、最上位のオブジェクト
	    と構造が同じです。ただし、'parts' オブジェクトを含むことが
	    できないという制限があります。
 	   </para>
 	  </footnote>
 	 </entry>
 	 <entry>各メッセージパートを記述するオブジェクトの配列</entry>
 	</row>
        </tbody>
       </tgroup>
      </table>
     </para>
  </refsect1>
  </refentry>


  <refentry id="function.imap-header">
   <refnamediv>
    <refname>imap_header</refname>
    <refpurpose>メッセージ・ヘッダを読み込む</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>object <function>imap_header</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>int <parameter>msg_number</parameter></paramdef>
     <paramdef>int 
       <parameter><optional>fromlength</optional></parameter>
     </paramdef>
     <paramdef>int 
       <parameter><optional>subjectlength</optional></parameter>
     </paramdef>
     <paramdef>string 
       <parameter><optional>defaulthost</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
    この関数は、様々なヘッダー要素を有するオブジェクトを返します。</para>
    <para>  
     <informalexample>
	  <literallayout>
        remail,date,Date,subject,Subject,in_reply_to,message_id,newsgroups,
        followup_to,references

 message flags:
   Unseen - 'U' if unseen, ' ' if seen
   Answered - 'A' if answered, ' ' if unanswered
   Deleted - 'D' if deleted, ' ' if not deleted
   Draft - 'X' if draft, ' ' if not draft
   Flagged - 'F' if flagged, ' ' if not flagged

 toaddress (to: 行全体、最大 1024 文字)
 
 to[] (TO 行から、以下の要素を含むオブジェクト配列を返します)
    personal
    adl
    mailbox
    host
 
 fromaddress (from: 行全体、最大 1024 文字)
 
 from[] (From 行から、以下の要素を含むオブジェクト配列を返します)
    personal
    adl
    mailbox
    host
 
 ccaddress (cc: 行全体、最大 1024 文字)
 cc[] (Cc 行から、以下の要素を含むオブジェクト配列を返します)
    personal
    adl
    mailbox
    host
 
 bccaddress (bcc: 行全体、最大 1024 文字)(full bcc line, up to 1024 characters)
 bcc[] (Bcc 行から、以下の要素を含むオブジェクト配列を返します)
    personal
    adl
    mailbox
    host
 
 reply_toaddress (reply_to: 行全体、最大 1024 文字)
 reply_to[] (Reply_to 行から、以下の要素を含むオブジェクト配列を返します)
    personal
    adl
    mailbox
    host
 
 senderaddress (sender: 行全体、最大 1024 文字)
 sender[] (sender 行から、以下の要素を含むオブジェクト配列を返します)
    personal
    adl
    mailbox
    host
 
 return_path (return-path: 行全体、最大 1024 文字)
 return_path[] (return_path 行から、以下の要素を含むオブジェクト配列を返します)
    personal
    adl
    mailbox
    host
  
 udate ( UNIX 時間で表した mail メッセージの日付)
  
 fetchfrom (<parameter>fromlength</parameter> 文字に適合するようフォーマットされた from 行)
 fetchsubject (<parameter>subjectlength</parameter> 文字に適合するようフォーマットされた subject 行)
        </literallayout>
	</informalexample></para>
   </refsect1>
  </refentry>

  <refentry id="function.imap-headers">
   <refnamediv>
    <refname>imap_headers</refname>
    <refpurpose>メールボックス内の、すべてのメッセージのヘッダを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imap_headers</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
    </funcsynopsis>
    <para>
    ヘッダ情報でフォーマットされた文字列の配列を返します。1 つの
    メール・メッセージ毎に 1 つの要素が格納されます。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-listmailbox">
   <refnamediv>
    <refname>imap_listmailbox</refname>
    <refpurpose>メールボックスのリストを読む</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imap_listmailbox</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>ref</parameter></paramdef>
     <paramdef>string <parameter>pat</parameter></paramdef>
    </funcsynopsis>
    <para>
    メールボックス名を保持する配列を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.imap-getmailboxes">
   <refnamediv>
    <refname>imap_getmailboxes</refname>
    <refpurpose>メールボックスのリストを読み込み、各ボックスに関する詳細な情報を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imap_getmailboxes</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>ref</parameter></paramdef>
     <paramdef>string <parameter>pat</parameter></paramdef>
    </funcsynopsis>
    <para>
    メールボックス情報を有するオブジェクトの配列を返します。各オブジェクトは、
    メールボックスの完全な名前である <parameter>name</parameter>、
    このメールボックスの階層の区切りを示す <parameter>delimiter</parameter>、
     <parameter>attributes</parameter>
    という属性を有しています。
    <parameter>attributes</parameter> はビットマスクであり、次のものを指定することが
    できます。
    <itemizedlist>
     <listitem><simpara>
	LATT_NOINFERIORS - このメールボックスは "子" を有しません 
	(このボックスの中にメールボックスはありません。)</simpara></listitem>
     <listitem><simpara>
	LATT_NOSELECT - 単なるコンテナであり、メールボックスではありません。これをオープンすることはできません。</simpara></listitem>
     <listitem><simpara>
	LATT_MARKED - このメールボックスには印が付けられています。UW-IMAPD でのみ
	使用されます。</simpara></listitem>
     <listitem><simpara>
	LATT_UNMARKED - このメールボックスはマークされていません。UW-IMAPD でのみ
	必要です。</simpara></listitem>
    </itemizedlist></para>
    <para>
     通常、<parameter>ref</parameter> は、{imap_server:imap_port} 形式の
     IMAP サーバーとする必要があります。
     また、<parameter>pattern</parameter> により検索を開始するメールボックスの
     階層を指定します。
     全てのメールボックスを検索したい場合、
     <parameter>pattern</parameter> に空文字列を指定します。</para>
    <para>
     <parameter>pattern</parameter> の中で使用できる特別な文字として
     '*' および '%' があります。
     '*' は、全てのメールボックスを意味します。
     <parameter>pattern</parameter> に '*' を指定した場合、
     メールボックス階層全体のリストが得られます。
     '%' は現在のレベルのみを意味します。'%' を <parameter>pattern</parameter>
     に指定した場合、トップレベルのメールボックスのみが返されます。
     UW_IMAPD を使用した場合、'~/mail/%' は ~/mail ディレクトリの全ての
     メールボックスを返しますが、そのディレクトリのサブフォルダーにある
     メールボックスは返しません。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-listsubscribed">
   <refnamediv>
    <refname>imap_listsubscribed</refname>
    <refpurpose>購読中のすべてのメールボックス一覧</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imap_listsubscribed</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>ref</parameter></paramdef>
     <paramdef>string <parameter>pattern</parameter></paramdef>
    </funcsynopsis>
    <para>
    購読中のすべてのメールボックスの配列を返します。
    引数 <parameter>ref</parameter> と <parameter>pattern</parameter> は、
    検索する基準となる場所とメールボックス名がマッチしなければならないパターン
    を指定します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-getsubscribed">
   <refnamediv>
    <refname>imap_getsubscribed</refname>
    <refpurpose>購読中の全メールボックスの一覧</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imap_getsubscribed</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>ref</parameter></paramdef>
     <paramdef>string <parameter>pattern</parameter></paramdef>
    </funcsynopsis>
    <para>
    この関数は、
     ユーザーが購読しているメールボックスのみを返すことを除き、
     <function>imap_getmailboxes</function> と同じ動作をします。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-mail-copy">
   <refnamediv>
    <refname>imap_mail_copy</refname>
    <refpurpose>指定されたメッセージをメールボックスにコピーする
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_mail_copy</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>msglist</parameter></paramdef>
     <paramdef>string <parameter>mbox</parameter></paramdef>
     <paramdef>int <parameter>flags</parameter></paramdef>
    </funcsynopsis>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
    <para>
    <parameter>msglist</parameter> で指定されたメッセージを、指定された
    メールボックスにコピーします。
     <parameter>msglist</parameter> はただのメッセージ番号ではなく、
     範囲を示します。</para>
      <para> 
	 flags はビットマスクであり、以下の組み合わせです。
      <itemizedlist>
       <listitem><simpara>
 	CP_UID - UIDS を含む処理の数</simpara></listitem>
       <listitem><simpara>
 	CP_MOVE - コピー後にメールボックスからメッセージを削除</simpara></listitem>
      </itemizedlist></para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-mail-move">
   <refnamediv>
    <refname>imap_mail_move</refname>
    <refpurpose>指定されたメッセージをメールボックスに移動する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_mail_move</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>msglist</parameter></paramdef>
     <paramdef>string <parameter>mbox</parameter></paramdef>
    </funcsynopsis>
    <para>  
    <parameter>msglist</parameter> で指定されたメッセージを、指定された
    メールボックスに移動します。<parameter>msglist</parameter> は
    単なるメッセージ番号でなく、メッセージの範囲を指定します。</para>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-num-msg">
   <refnamediv>
    <refname>imap_num_msg</refname>
    <refpurpose>現在のメールボックスのメッセージ数を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_num_msg</function></funcdef>
     <paramdef>int <parameter>stream_id</parameter></paramdef>
    </funcsynopsis>
    <para>
    現在のメールボックスにあるメッセージ数を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-num-recent">
   <refnamediv>
    <refname>imap_num_recent</refname>
    <refpurpose>現在のメールボックスにある新規メッセージの数の取得</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_num_recent</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
    </funcsynopsis>
    <para>
    現在のメールボックスにある新しいメッセージの数を返します。</para>
    <para></para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-open">
   <refnamediv>
    <refname>imap_open</refname>
    <refpurpose>メールボックスへの IMAP ストリームのオープン</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_open</function></funcdef>
     <paramdef>string <parameter>mailbox</parameter></paramdef>
     <paramdef>string <parameter>username</parameter></paramdef>
     <paramdef>string <parameter>password</parameter></paramdef>
     <paramdef>int <parameter>flags</parameter></paramdef>
    </funcsynopsis>
    <para>
    成功すると IMAP ストリームを返し、失敗すると FALSE を返します。
    この関数は、POP3 や NNTP サーバーへのストリームをオープンする
    際にも使用可能です。ローカルマシンのポート 143 で実行している
    IMAP サーバーに接続する際には、以下のようにします。
      <informalexample>
		<programlisting role="php">
 $mbox = imap_open("{localhost:143}INBOX","user_id","password");
 		</programlisting>
	  </informalexample>
 
   ローカルマシンのポート 110 で実行している
    POP3 サーバーに接続する際には、以下のようにします。
       <informalexample>
		<programlisting>
 $mbox = imap_open("{localhost/pop3:110}INBOX","user_id","password");
 		</programlisting>
	   </informalexample>
 
  ローカルマシンのポート 119 で実行している
    NNTP サーバーに接続する際には、以下のようにします。

      <informalexample>
	   <programlisting>
 $nntp = imap_open("{localhost/nntp:119}comp.test","","");
 	   </programlisting>
	  </informalexample>

 リモートサーバーに接続するには、"localhost" を接続したいサーバーの
 名前または IP アドレスに代えてください。</para>
     <para>
     オプションは、ビットマスクであり、以下の組み合わせとなります。
      <itemizedlist>
       <listitem><simpara>
 	OP_READONLY - メールボックスを読みこみのみ可でオープン</simpara></listitem>
       <listitem><simpara>
 	OP_ANONYMOUS - news に関して .newsrc の使用・更新をしない</simpara></listitem>
       <listitem><simpara>
 	OP_HALFOPEN - IMAP および NNTP 名について、接続をオープンするがメールボックスをオープンしない</simpara></listitem>
       <listitem><simpara>
 	CL_EXPUNGE - メールボックスを閉じた際に、自動的にメールボックスを削除する</simpara></listitem>
      </itemizedlist></para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-ping">
   <refnamediv>
    <refname>imap_ping</refname>
    <refpurpose>IMAP ストリームの有効性チェック</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_ping</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
    </funcsynopsis>
    <para>
    ストリームがまだ有効であれば TRUE を、そうでなければ FALSE を
    返します。</para>
    <para>
    <function>imap_ping</function> 関数は、ストリームに ping を行い、
    まだ有効であるかどうかをチェックします。これにより新しいメールの到着
    を知る場合もあります。これは、有効時間のタイムアウトが設定
    してあるサーバに対して "接続を持続させる" ことに加え、定期的な
    "新着メールのチェック" としてもよい方法です。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-renamemailbox">
   <refnamediv>
    <refname>imap_renamemailbox</refname>
    <refpurpose>メールボックスの名前を変更する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_renamemailbox</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>old_mbox</parameter></paramdef>
     <paramdef>string <parameter>new_mbox</parameter></paramdef>
    </funcsynopsis>
    <para>  
    この関数は、古いメールボックスを新しいメールボックスにリネーム
    します。</para>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-reopen">
   <refnamediv>
    <refname>imap_reopen</refname>
    <refpurpose>新しいメールボックス用の IMAP ストリームの再オープン
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_reopen</function></funcdef>
     <paramdef>string <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>mailbox</parameter></paramdef>
     <paramdef>string
     <parameter><optional>flags</optional></parameter></paramdef>
    </funcsynopsis>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
    <para>  
    この関数は、新しいメールボックスに対して指定されたストリームを
    再オープンします。</para>
     <para>
     オプションは、ビットマスクであり、以下の組み合わせとなります。
      <itemizedlist>
       <listitem><simpara>
 	OP_READONLY - メールボックスを読みこみのみ可でオープン</simpara></listitem>
       <listitem><simpara>
 	OP_ANONYMOUS - news に関して .newsrc の使用・更新をしない</simpara></listitem>
       <listitem><simpara>
 	OP_HALFOPEN - IMAP および NNTP 名について、接続をオープンするがメールボックスをオープンしない</simpara></listitem>
       <listitem><simpara>
 	CL_EXPUNGE - メールボックスを閉じた際に、自動的にメールボックスを削除する</simpara></listitem>
      </itemizedlist></para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-subscribe">
   <refnamediv>
    <refname>imap_subscribe</refname>
    <refpurpose>メールボックスの購読</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_subscribe</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>mbox</parameter></paramdef>
    </funcsynopsis>
    <para>  
    新しいメールボックスを購読します。</para>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-undelete">
   <refnamediv>
    <refname>imap_undelete</refname>
    <refpurpose>削除マークがついているメッセージのマークをはずす</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_undelete</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>int <parameter>msg_number</parameter></paramdef>
    </funcsynopsis>
    <para>  
    この関数は、<function>imap_delete</function> によりセットされた
    指定されたメッセージの削除フラグをはずします。</para>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.imap-unsubscribe">
   <refnamediv>
    <refname>imap_unsubscribe</refname>
    <refpurpose>メールボックスの購読をやめる</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imap_unsubscribe</function></funcdef>
     <paramdef>int <parameter>imap_stream</parameter></paramdef>
     <paramdef>string <parameter>mbox</parameter></paramdef>
    </funcsynopsis>
    <para>
    指定されたメールボックスの購読を中止します。</para>
    <para>
    成功すると TRUE、失敗すると FALSE を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.imap-qprint">
   <refnamediv>
    <refname>imap_qprint</refname>
    <refpurpose>quoted-printable 文字列を 8 ビット文字列に変換する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>imap_qprint</function></funcdef>
     <paramdef>string <parameter>string</parameter></paramdef>
    </funcsynopsis>
    <para>  
    quoted-printable 文字列を 8 ビット文字列に変換します。</para>
    <para>
    8 ビット (バイナリ) 文字列を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.imap-8bit">
   <refnamediv>
    <refname>imap_8bit</refname>
    <refpurpose>8bit 文字列を quoted-printable 文字列に変換する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>imap_8bit</function></funcdef>
     <paramdef>string <parameter>string</parameter></paramdef>
    </funcsynopsis>
    <para>  
    8bit 文字列を quoted-printable 文字列に変換します。</para>
    <para>
    quoted-printable 文字列を返します。</para>
   </refsect1>
  </refentry>

   <refentry id="function.imap-binary">
    <refnamediv>
     <refname>imap_binary</refname>
     <refpurpose>8 ビット文字列を base64 文字列に変換する</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string <function>imap_binary</function></funcdef>
      <paramdef>string <parameter>string</parameter></paramdef>
     </funcsynopsis>
     <para>  
 	8 ビット文字列を base64 文字列に変換します。</para>
     <para>
     base64 文字列を返します。</para>
    </refsect1>
   </refentry>


 
   <refentry id="function.imap-scanmailbox">
    <refnamediv>
     <refname>imap_scanmailbox</refname>
     <refpurpose>メールボックスのリストを読み、メールボックスのテキストにおいて
     文字列を検索する</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>array <function>imap_scanmailbox</function></funcdef>
      <paramdef>int <parameter>imap_stream</parameter></paramdef>
      <paramdef>string <parameter>string</parameter></paramdef>
     </funcsynopsis>
     <para>
     メールボックスのテキストに <parameter>string</parameter> がある
     メールボックスの名前を有する配列を返します。</para>
    </refsect1>
   </refentry>
 
 
 
   <refentry id="function.imap-mailboxmsginfo">
    <refnamediv>
     <refname>imap_mailboxmsginfo</refname>
     <refpurpose>現在のメールボックスに関する情報を得る</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>array <function>imap_mailboxmsginfo</function></funcdef>
      <paramdef>int <parameter>imap_stream</parameter></paramdef>
     </funcsynopsis>
     <para>
     現在のメールボックスに関する情報を返します。
     失敗した場合に FALSE を返します。</para>
     <para>  
 	<function>imap_mailboxmsginfo</function> 関数は、
	サーバーにおける現在のメールボックスのステータスを調べ、
	次のプロパティを有するオブジェクトの情報を返します。</para>
 	<para>
 	<informalexample>
 	<literallayout>
        Date : メッセージの日付
        Driver : ドライバ
        Mailbox : メールボックスの名前
        Nmsgs : メッセージの数
        Recent : 最近のメッセージの数
        Unread : 未読のメッセージの数
        Size : メールボックスのサイズ
 	</literallayout>
 	</informalexample></para>
    </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-rfc822-write-address">
    <refnamediv>
     <refname>imap_rfc822_write_address</refname>
     <refpurpose>指定したメールボックス、ホスト、個人情報を適当にフォーマットされた電子メールアドレスにして返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string <function>imap_rfc822_write_address</function></funcdef>
      <paramdef>string <parameter>mailbox</parameter></paramdef>
      <paramdef>string <parameter>host</parameter></paramdef>
      <paramdef>string <parameter>personal</parameter></paramdef>
     </funcsynopsis>
     <para>
     指定したメールボックス、ホスト、個人情報を適当にフォーマットされた
     電子メールアドレスにして返します。</para>
    </refsect1>
   </refentry>
 
   <refentry id="function.imap-rfc822-parse-adrlist">
    <refnamediv>
     <refname>imap_rfc822_parse_adrlist</refname>
     <refpurpose>アドレス文字列を解釈します</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string <function>imap_rfc822_parse_adrlist</function></funcdef>
      <paramdef>string <parameter>address</parameter></paramdef>
      <paramdef>string <parameter>default_host</parameter></paramdef>
     </funcsynopsis>
     <para>
     この関数は、アドレス文字列を解釈し、各アドレス毎に
     オブジェクトの配列を返します。4 つのオブジェクトは、
     以下のようになります。</para>
     <para>
     <informalexample>
     <literallayout>
      mailbox - メールボックス名 (ユーザー名)
      host   - ホスト名
      personal - 個人名
      adl - ドメインソースへのルート
     </literallayout>
     </informalexample></para>
    </refsect1>
   </refentry>
 
   <refentry id="function.imap-setflag-full">
    <refnamediv>
     <refname>imap_setflag_full</refname>
     <refpurpose>メッセージにフラグをセットする</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string <function>imap_setflag_full</function></funcdef>
      <paramdef>int <parameter>stream</parameter></paramdef>
      <paramdef>string <parameter>sequence</parameter></paramdef>
      <paramdef>string <parameter>flag</parameter></paramdef>
      <paramdef>string <parameter>options</parameter></paramdef>
     </funcsynopsis>
     <para>
     この関数は、
     指定したシーケンスのメッセージのフラグに指定したフラグを
     セットし、保存します。</para>
     <para>
     オプションはビットマスクであり、以下の組み合わせとなります。
     <informalexample>
     <literallayout>
         ST_UID          シーケンス引数はシーケンス番号の代わりに UID を含みます
     </literallayout>
     </informalexample></para>
    </refsect1>
   </refentry>
 
   <refentry id="function.imap-clearflag-full">
    <refnamediv>
     <refname>imap_clearflag_full</refname>
     <refpurpose>メッセージのフラグをクリアする</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string <function>imap_clearflag_full</function></funcdef>
      <paramdef>int <parameter>stream</parameter></paramdef>
      <paramdef>string <parameter>sequence</parameter></paramdef>
      <paramdef>string <parameter>flag</parameter></paramdef>
      <paramdef>string <parameter>options</parameter></paramdef>
     </funcsynopsis>
     <para>
     この関数は、指定したシーケンスのメッセージのフラグからに指定したフラグ
     を削除します。</para>
     <para>
     オプションはビットマスクであり、以下の組み合わせとなります。
     <informalexample>
     <literallayout>
         ST_UID          シーケンス引数はシーケンス番号の代わりに UID を含みます
     </literallayout>
     </informalexample></para>
    </refsect1>
   </refentry>
 
   <refentry id="function.imap-sort">
    <refnamediv>
     <refname>imap_sort</refname>
     <refpurpose></refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string <function>imap_sort</function></funcdef>
      <paramdef>int <parameter>stream</parameter></paramdef>
      <paramdef>int <parameter>criteria</parameter></paramdef>
      <paramdef>int <parameter>reverse</parameter></paramdef>
      <paramdef>int <parameter>options</parameter></paramdef>
     </funcsynopsis>
     <para>
     指定したパラメータによりソートされたメッセージ番号の配列を
     返します。</para>
     <para>
     逆順にソートする場合は、reverse を 1 にします。</para>
     <para>
     criteria は、次のどれかとします。(一つのみ)
     <informalexample>
     <literallayout>
                 SORTDATE        メッセージの日付
                 SORTARRIVAL     到着日付
                 SORTFROM        最初の From アドレスのメールボックス
                 SORTSUBJECT     メッセージ Subject
                 SORTTO          最初の To アドレスのメールボックス
                 SORTCC          最初の cc アドレスのメールボックス
                 SORTSIZE        メッセージのサイズ
     </literallayout>
     </informalexample></para>
     <para>
     フラグはビットマスクであり、次の組み合わせとなります。
     <informalexample>
     <literallayout>
         SE_UID          シーケンス番号の変わりに UID を返す
         SE_NOPREFETCH   検索したメッセージを事前取得しない
     </literallayout>
     </informalexample></para>
    </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-fetchheader">
    <refnamediv>
     <refname>imap_fetchheader</refname>
     <refpurpose>メッセージのヘッダを返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string<function>imap_fetchheader</function></funcdef>
      <paramdef>int <parameter>imap_stream</parameter></paramdef>
      <paramdef>int <parameter>msgno</parameter></paramdef>
      <paramdef>int <parameter>flags</parameter></paramdef>
     </funcsynopsis>
     <para>
     この関数は、指定したメッセージのヘッダーを
     完全でフィルターリングされていない RFC 822 フォーマットの
     テキスト文字列として取得し、テキスト文字列を返します。</para>
     <para>
     オプションは次のようになります。
     <informalexample>
     <literallayout>
         FT_UID          msgno 引数は UID である 
         FT_INTERNAL     返される文字列を "internal" フォーマットとする。
	                 ただし、CRLF 改行は例外とする。
         FT_PREFETCHTEXT RFC822.TEXT は同時に事前に取得する必要があります。
	                 これは、メッセージテキスト全体を取得したい場合に
			 IMAP 接続において別の RTT を回避します。
			 (例えば、"ローカルファイルに保存する"操作)
     </literallayout>
     </informalexample></para>
    </refsect1>
   </refentry>
 
   <refentry id="function.imap-uid">
    <refnamediv>
     <refname>imap_uid</refname>
     <refpurpose>指定したメッセージシーケンス番号の UID を返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>int <function>imap_uid</function></funcdef>
      <paramdef>int <parameter>imap_stream</parameter></paramdef>
      <paramdef>int <parameter>msgno</parameter></paramdef>
     </funcsynopsis>
     <para>
     この関数は、指定したメッセージシーケンス番号の UID を返します。この関数
	は、<function>imap_msgno</function> の逆関数です。</para>
    </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-msgno">
    <refnamediv>
     <refname>imap_msgno</refname>
     <refpurpose>指定したUIDのメッセージ番号を返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>int <function>imap_msgno</function></funcdef>
      <paramdef>int <parameter>imap_stream</parameter></paramdef>
      <paramdef>int <parameter>uid</parameter></paramdef>
     </funcsynopsis>
     <para>
	この関数は、指定したUIDのメッセージ番号を返します。
      これは、<function>imap_uid</function> の逆の動作となります。</para>
    </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-search">
    <refnamediv>
     <refname>imap_search</refname>
     <refpurpose>指定した検索条件にマッチするメッセージを配列として返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>array <function>imap_search</function></funcdef>
      <paramdef>int <parameter>imap_stream</parameter></paramdef>
      <paramdef>string <parameter>criteria</parameter></paramdef>
      <paramdef>int <parameter>flags</parameter></paramdef>
     </funcsynopsis>
     <para>
	この関数は、指定した imap ストリームの現在オープンしているメールボックスにおいて
	検索を行います。
       <parameter>criteria</parameter> は、空白で区切られた文字列で、
	以下のキーワードが使用可能です。
	複数語のキーワード(例 FROM "joe smith")は全て引用符で括る必要があります。
     <itemizedlist>  
      <listitem><simpara>
       ALL - 他の検索条件にマッチする全メッセージを返す</simpara></listitem>
      <listitem><simpara>
       ANSWERED - \\ANSWERED フラグが設定されているメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       BCC "string" - Bcc: フィールドに "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       BEFORE "date" - "date" より前の Date: を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       BODY "string" - メッセージ本体に "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       CC "string" - Cc: フィールドに "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       DELETED - 削除されたメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       FLAGGED - \\FLAGGED フラグが設定されているメッセージにマッチ (重要または緊急を表すものとして使用されることがあります)</simpara></listitem>
      <listitem><simpara>
       FROM "string" - From: フィールドに "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       KEYWORD "string" - キーワードとして "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       NEW - 新規メッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       OLD - 古いメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       ON "date" - Date: が "date" であるメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       RECENT - \\RECENT フラグが設定されているメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       SEEN - (\\SEEN フラグが設定されている)既読のメッセージにマッチ </simpara></listitem>
      <listitem><simpara>
       SINCE "date" - Date: が "date" 以降であるメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       SUBJECT "string" - Subject: に "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       TEXT "string" - テキスト "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       TO "string" - To: に "string" を有するメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       UNANSWERED - 未回答のメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       UNDELETED - 削除されていないメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       UNFLAGGED - フラグが設定されていないメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       UNKEYWORD "string" - キーワード "string" を有さないメッセージにマッチ</simpara></listitem>
      <listitem><simpara>
       UNSEEN - 未読のメッセージにマッチ</simpara></listitem>
     </itemizedlist></para>
     <para>
     例えば、Mom から送られた全ての未回答のメッセージにマッチするには、
     "UNANSWERED FROM mom" としてください。
     検索は、大文字小文字が区別されずに行われます。
     検索条件のリストは、UW クライアントの C ソースコードからのものであり、
     不完全または不正確である可能性がありますので、注意してください。</para>
     <para>
     SE_UID が有効なフラグとして設定されている場合、
     メッセージ番号の変わりに UID を有する配列が返されます。</para>
    </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-last-error">
    <refnamediv>
     <refname>imap_last_error</refname>
     <refpurpose>ページリクエスト時に生じた
     直近の IMAP エラーを返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>string <function>imap_last_error</function></funcdef>
      <paramdef>void </paramdef>
     </funcsynopsis>
     <para>
     この関数は、カレントページに生じた直近の IMAP エラーメッセージの
     全文を返します。エラースタックは変更されません。
      <function>imap_last_error</function> を続けてコールした際、
      コール間に新規エラーが生じていない場合は、同じエラーが返されます。</para>
    </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-errors">
    <refnamediv>
     <refname>imap_errors</refname>
     <refpurpose>ページのリクエストの間かエラースタックがリセットされて以来
     生じた全てのIMAPエラーを返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>array <function>imap_errors</function></funcdef>
      <paramdef>void </paramdef>
     </funcsynopsis>
     <para>
     この関数は、最後に <function>imap_errors</function> コールを
     行ってからまたはそのページの処理を開始してから
     発生した全ての IMAP エラーメッセージの配列を返します。
      <function>imap_errors</function> がコールされた場合、エラースタックは
      処理後にクリアされます。</para>
    </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-alerts">
    <refnamediv>
     <refname>imap_alerts</refname>
     <refpurpose>
     ページリクエストの間または最後にスタックがリセットされて以来発生した
     全ての IMAP 警告メッセージを返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>array <function>imap_alerts</function></funcdef>
      <paramdef>void </paramdef>
     </funcsynopsis>
     <para>
     この関数は、直近に <function>imap_alerts</function> をコールして以来、
     またはページ処理を開始して以来生成された 全 IMAP 警告メッセージの
     配列を得ます。
      <function>imap_alerts</function> がコールされた場合、
      カレントのスタックは、処理後にクリアされます。
      IMAP 規約では、これらのメッセージをユーザに渡すことが
      規定されています。</para>
   </refsect1>
   </refentry>
 
 
   <refentry id="function.imap-status">
    <refnamediv>
     <refname>imap_status</refname>
     <refpurpose>現在のメールボックス以外のメールボックスの
     ステータス情報を返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>object <function>imap_status</function></funcdef>
      <paramdef>int <parameter>imap_stream</parameter></paramdef>
      <paramdef>string <parameter>mailbox</parameter></paramdef>
      <paramdef>int <parameter>options</parameter></paramdef>
     </funcsynopsis>
     <para>
     この関数は、ステータス情報を有するオブジェクトを返します。
     有効なフラグは次のようになります。
     <itemizedlist>
      <listitem><simpara>
       SA_MESSAGES - status->messages にメールボックスのメッセージ数を設定する</simpara></listitem>
      <listitem><simpara>
       SA_RECENT - status->recent にメールボックスの最近のメッセージ数を設定する</simpara></listitem>
      <listitem><simpara>
       SA_UNSEEN - status->unseen にメールボックスの未読の(新規)メッセージ数を設定する</simpara></listitem>
      <listitem><simpara>
       SA_UIDNEXT - status->uidnext にメールボックスの次のUIDを設定する</simpara></listitem>
      <listitem><simpara>
       SA_UIDVALIDITY - メールボックスのUIDがもはや有効ではない場合に変化する定数を status->uidvalidity に設定する</simpara></listitem>
      <listitem><simpara>
       SA_ALL - 上記のものを全て設定する</simpara></listitem>
     </itemizedlist></para>
     <para>
      status->flags にも上記の各定数に対するビットマスクが
      設定されます。</para>
  </refsect1>
  </refentry>

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
