<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.13 $ -->
 <reference id="ref.msql">
  <title>mSQL 関数</title>
  <titleabbrev>mSQL</titleabbrev>
  <partintro>
   <simpara>
    これらの関数により mSQLデータベースサーバーにアクセスすることが可
    能になります。これらの関数を利用可能とするには、
    <option role="configure">--with-msql[=dir]</option>オプションによ
    り msql サポートを付けてphpをコンパイルする必要があります。
    デフォルトの位置は、/usr/local/Hughes です。
   </simpara>
   <simpara>
    mSQLに関する詳細な情報は、
    <ulink url="&url.msql;">&url.msql;</ulink>にあります。
   </simpara>
  </partintro>

  <refentry id="function.msql">
   <refnamediv>
    <refname>msql</refname>
    <refpurpose>mSQL クエリーを送信する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql</methodname>
      <methodparam><type>string</type><parameter>database</parameter></methodparam>
      <methodparam><type>string</type><parameter>query</parameter></methodparam>
      <methodparam><type>int</type><parameter>link_identifier</parameter></methodparam>
     </methodsynopsis>
    <para> 
     クエリー結果を指す正の mSQL クエリーID を返します。
     エラーの場合は、 &false; を返します。
    </para>
    <para>
     <function>msql</function> はデータベースを選択し、クエリーをそこで
     実行します。リンク ID が指定されていない場合、
     この関数は、開かれている mSQL サーバーへのリンクを探します。
     そうしたリンクがない場合は、
     <function>msql_connect</function> を引数なしでコールした時と同様に
     リンクの作成を試みます。
     (<function>msql_connect</function> を参照下さい)
    </para>
   </refsect1>
  </refentry>

   <refentry id="function.msql-affected-rows">
    <refnamediv>
     <refname>msql_affected_rows</refname> 
     <refpurpose>変更された行の数を返す</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_affected_rows</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     指定したクエリーにより変更された行の数を返します。
     (すなわち、SELECT により返された行の数、UPDATE により
     修正された行の数、DELETE により削除された行の数)
    </para>
    <para>
     <function>msql_query</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.msql-close">
   <refnamediv>
    <refname>msql_close</refname> 
    <refpurpose>mSQL 接続を閉じる</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_close</methodname>
      <methodparam><type>int</type><parameter>link_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     成功した場合に&true;、エラーの場合に&false;を返します。
    </para>
    <para>
     <function>msql_close</function>は指定されたリンク ID に関連付けられた
     mSQLデータベースへのリンクを閉じます。
     リンク ID が指定されていない場合、最後に開かれたリンクが
     指定されたと仮定します。
    </para>
    <para>
     持続的でないリンクは、スクリプト実行が終了する際に自動的に閉じられる
     ので、この関数は、通常必要ありません。
    </para>
    <para>
     <function>msql_close</function>は、<function>msql_pconnect</function>
     で生成された持続的なリンクを閉じることはできません。
    </para>
    <para>
     <function>msql_connect</function> および
     <function>msql_pconnect</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-connect">
   <refnamediv>
    <refname>msql_connect</refname>
    <refpurpose>mSQL 接続を開く</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_connect</methodname>
      <methodparam choice="opt"><type>string</type><parameter>hostname</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>server</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>username</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>password</parameter></methodparam>
     </methodsynopsis>
    <para>
     成功した場合に正のmSQL リンクIDを返します。また、エラーの場合に
     &false;を返します。
    </para>
    <para>
     <function>msql_connect</function>は mSQL サーバーへの接続を確立し
     ます。パラメータ<parameter>server</parameter>には、
     &quot;hostname:port&quot;のようにポート番号を含めることも可能です。
     デフォルトは、'localhost'です。
    </para>
    <para>
     同じ引数で<function>msql_connect</function>が再度コールされた場合、
     新しいリンクは生成されません。替わりに、既に開かれているリンクの
     リンク ID が返されます。
    </para>
    <para>
    <function>msql_close</function> を明示的にコールすることにより
    早期に閉じない場合、
    サーバーへのリンクは、スクリプトの実行が終了した直後に閉じられます。
    </para>
    <para>
     <function>msql_pconnect</function>、
     <function>msql_close</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-create-db">
   <refnamediv>
    <refname>msql_create_db</refname>
    <refpurpose>mSQL データベースを作成する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_create_db</methodname>
      <methodparam><type>string</type><parameter>database name</parameter></methodparam>
      <methodparam><type>int</type><parameter>
	<replaceable><optional>link_identifier</optional></replaceable>
       </parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_create_db</function>は、指定されたリンク ID に関連
     付けられたサーバー上で新しいデータベースの作成を試みます。
    </para>
    <para> 
     <function>msql_drop_db</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-createdb">
   <refnamediv>
    <refname>msql_createdb</refname>
    <refpurpose>mSQL データベースを作成する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_createdb</methodname>
      <methodparam><type>string</type><parameter>database name</parameter></methodparam>
      <methodparam><type>int</type><parameter>
	<replaceable><optional>link_identifier</optional></replaceable>
       </parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_create_db</function> と同じ関数です。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-data-seek">
   <refnamediv>
    <refname>msql_data_seek</refname>
    <refpurpose>行に関する内部ポインタを移動する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_data_seek</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>row_number</parameter></methodparam>
     </methodsynopsis>
    <para>
     &return.success;
    </para>
    <para>
     <function>msql_data_seek</function> は、指定したクエリーID
     (query_identfier)が指すmSQL の結果行への内部ポインタが指定した行番号
     (row_number)を指すようにします。
     次に <function>msql_fetch_row</function> をコールした際には、
     その行を返します。
    </para>
    <para> 
     <function>msql_fetch_row</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-dbname">
   <refnamediv>
    <refname>msql_dbname</refname>
    <refpurpose>カレントの mSQL データベース名を得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>msql_dbname</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>i</parameter></methodparam>
     </methodsynopsis>
    <para> 
     <function>msql_dbname</function> は、
     <function>msql_listdbs</function> 関数が返す結果ポインタの
     位置 <parameter>i</parameter> に保存されたデータベース名を返します。
     <function>msql_numrows</function> 関数は、有効なデータベース名の数を
     定義するために使用することができます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-drop-db">
   <refnamediv>
    <refname>msql_drop_db</refname>
    <refpurpose>mSQL データベースを破棄(削除)する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_drop_db</methodname>
      <methodparam><type>string</type><parameter>database_name</parameter></methodparam>
      <methodparam><type>int</type><parameter>link_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     &return.success;
    </para>
    <para>
     <function>msql_drop_db</function>は、指定したリンクIDが指す
     サーバーからあるデータベース全体を削除することを試みます。
    </para>
    <para>
     <function>msql_create_db</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-dropdb">
   <refnamediv>
    <refname>msql_dropdb</refname>
    <refpurpose>mSQL データベースを破棄(削除)する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <para>
     <function>msql_drop_db</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-error">
   <refnamediv>
    <refname>msql_error</refname>
    <refpurpose>
     最後の msql コールに関してエラーメッセージを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>msql_error</methodname>
      <methodparam><type>int</type><parameter>
	<replaceable><optional>link_identifier</optional></replaceable>
       </parameter></methodparam>
     </methodsynopsis>
    <para>
     mSQL データベースのバックエンドから返されたエラーは、現在ではもは
     や警告として出力されません。エラー文字列を取り出すためには、替わ
     りにこれらの関数を使用してください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fetch-array">
   <refnamediv>
    <refname>msql_fetch_array</refname>
    <refpurpose>結果の行を配列として取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_fetch_array</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>
	<replaceable><optional>result_type</optional></replaceable>
       </parameter></methodparam>
     </methodsynopsis>
    <para>
     取り出した行を含む配列を返します。
     もう行が残っていない場合には&false;を返します。
    </para>
    <para>
     <function>msql_fetch_array</function>は、
     <function>msql_fetch_row</function> の拡張版です。
     データを結果配列の数値インデックスに保存するのに加えて、
     フィールド名をキーとしてデータを連想インデックスにも保存します。
    </para>
    <para>
     <function>msql_fetch_array</function> の
     2番目のオプションパラメータ <parameter>result_type</parameter>
     は、定数であり、MSQL_ASSOC, MSQL_NUM, MSQL_BOTH のどれかとなります。
    </para>
    <para>
     クエリーからの結果を取得する際には、
     フィールドが1つのみでその値が0(または空の文字列または&null;)を
     値とするレコードを返す可能性があることに注意してください。
    </para>
    <para> 
      <function>msql_fetch_array</function>の使用に際して注意すべきことは、
     かなりの付加機能を提供するにもかかわらず、
     <function>msql_fetch_row</function> を使用する場合よりそんなに
     遅くないということです。
    </para>
    <para> 
    詳細な情報については、
     <function>msql_fetch_row</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fetch-field">
   <refnamediv>
    <refname>msql_fetch_field</refname>
    <refpurpose>フィールド情報を得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>object</type><methodname>msql_fetch_field</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>field_offset</parameter></methodparam>
     </methodsynopsis>
    <para>
     フィールド情報を含むオブジェクトを返します。
    </para>
    <para>  
      <function>msql_fetch_field</function>は、あるクエリー結果に関して
      フィールドについての情報を得るために使用することができます。
     フィールドオフセットが指定されていない場合、
     <function>msql_fetch_field</function>によりまだ得られていない次の
     フィールドが返されます。
    </para>
    <para>  
     オブジェクトのプロパティは、次のようになります。
     <itemizedlist>
      <listitem>
       <simpara>
        name - カラム名
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        table - カラムが属するテーブルの名前
      </simpara>
      </listitem>
      <listitem>
       <simpara>
        not_null - そのカラムがヌルになることができない場合に1とする。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        primary_key - そのカラムがプライマリキーである場合に1
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        unique - そのカラムがユニークキーである場合に1
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        type - カラムの型
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <para>  
     <function>msql_field_seek</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fetch-object">
   <refnamediv>
    <refname>msql_fetch_object</refname>
    <refpurpose>結果の行をオブジェクトとして取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_fetch_object</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>
	<replaceable><optional>result_type</optional></replaceable>
       </parameter></methodparam>
     </methodsynopsis>
    <para>
     得た行に対応するプロパティを有するオブジェクトを返します。もう行
     がない場合には、&false;を返します。
    </para>
    <para>
     <function>msql_fetch_object</function> は、
     <function>msql_fetch_array</function>に似ていますが、配列の代わり
     にオブジェクトを返すところだけが異なっています。間接的にというの
     は、オフセット値によってではなくフィールド名によってのみデータを
     アクセスすることができることを意味しています。
     (数字は、プロパティ名として使用できません。)
    </para>
    <para>
     <function>msql_fetch_object</function> の
     2番目のオプションパラメータ <parameter>result_type</parameter>
     は、定数であり、MSQL_ASSOC, MSQL_NUM, MSQL_BOTH のどれかとなります。
    </para>
    <para>
    速度面でこの関数は <function>msql_fetch_array</function> 
    と同等です。そして、ほぼ <function>msql_fetch_row</function> 
    と同等の速度を有しています。(差は、無視できるほどです。)
    </para>
    <para> 
     <function>msql_fetch_array</function> および
     <function>msql_fetch_row</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fetch-row">
   <refnamediv>
    <refname>msql_fetch_row</refname>
    <refpurpose>結果の行を数値配列として取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>array</type><methodname>msql_fetch_row</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
    結果の行に対応する配列を返します。もう行がない場合には、
     &false; を返します。</para>
    <para>
     <function>msql_fetch_row</function>は、指定されたクエリーIDが指す
     結果から1行分のデータを得ます。行は、配列として返されます。
     各結果のカラムは、0 から始まる配列オフセットに保存されます。
    </para>
    <para> 
     連続して<function>msql_fetch_row</function>をコールした場合、
     次の行を結果として返します。もう行がない場合には&false;を返します。
    </para>
    <para> 
     <function>msql_fetch_array</function>、
     <function>msql_fetch_object</function>、
     <function>msql_data_seek</function> および
     <function>msql_result</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fieldname">
   <refnamediv>
    <refname>msql_fieldname</refname>
    <refpurpose>フィールド名を得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>msql_fieldname</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>field</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_fieldname</function>は指定されたフィールドの名前を
     返します。<parameter>query_identifier</parameter> は、クエリーIDであり、
     <parameter>フィールド</parameter> はフィールドインデックスです。
     <literal>msql_fieldname($result, 2);</literal> は、
     結果 ID が指す結果において 2 番目のフィールドの名前を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-field-seek">
   <refnamediv>
    <refname>msql_field_seek</refname>
    <refpurpose>フィールドオフセットを設定する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_field_seek</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>field_offset</parameter></methodparam>
     </methodsynopsis>
    <para>
    指定されたフィールドオフセットに移動します。
    この後で <function>msql_fetch_field</function> を
    フィールドオフセットを指定せずにコールした場合は、
    ここで指定したフィールドが返されます。
    </para>
    <para>     
     <function>msql_fetch_field</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fieldtable">
   <refnamediv>
    <refname>msql_fieldtable</refname>
    <refpurpose>フィールドのテーブル名を得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_fieldtable</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>field</parameter></methodparam>
     </methodsynopsis>
    <para>
     <parameter>field</parameter> を得たテーブルの名前を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fieldtype">
   <refnamediv>
    <refname>msql_fieldtype</refname>
    <refpurpose>フィールドの型を得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>msql_fieldtype</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>i</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_fieldtype</function> は、
     <function>msql_fieldname</function> 関数に似ています。引数は同じ
     ですが、フィールドの型が返されます。"int"、 "char" 、 "real" のど
     れかが返されます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fieldflags">
   <refnamediv>
    <refname>msql_fieldflags</refname>
    <refpurpose>フィールドフラグを得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>msql_fieldflags</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>i</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_fieldflags</function>は、指定されたフィールドの
     フィールドフラグを返します。現在、このフラグは、"not &null;"、
     "primary key"、この二つの組み合わせまたは "" (空文字列) のどれか
     です。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-fieldlen">
   <refnamediv>
    <refname>msql_fieldlen</refname>
    <refpurpose>フィールド長を得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_fieldlen</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>i</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_fieldlen</function>は、指定されたフィールドの長さを
     返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-free-result">
   <refnamediv>
    <refname>msql_free_result</refname>
    <refpurpose>結果保持用メモリを開放する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_free_result</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_free_result</function> は、
     <parameter>query_identifier</parameter> が指すメモリを開放します。
     リクエストの処理を完了した時、このメモリは自動的に開放されます。
     よって、この関数を使用する必要があるのは、
     スクリプトの実行時に大量のメモリを使用しないことを
     確実にしたい場合のみです。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-freeresult">
   <refnamediv>
    <refname>msql_freeresult</refname>
    <refpurpose>結果保持用メモリを開放する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <para><function>msql_free_result</function>を参照ください。</para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-list-fields">
   <refnamediv>
    <refname>msql_list_fields</refname>
    <refpurpose>結果フィールドのリストを得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_list_fields</methodname>
      <methodparam><type>string</type><parameter>database</parameter></methodparam>
      <methodparam><type>string</type><parameter>tablename</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_list_fields</function>は、指定したテーブル名に関する情報を
     返します。引数は、データベース名とテーブル名です。
     返される結果ポインタは、
     <function>msql_fieldflags</function>、
     <function>msql_fieldlen</function>、
     <function>msql_fieldname</function>、
     <function>msql_fieldtype</function> で使用されます。 
     クエリー ID は、正の整数です。この関数は、エラーの場合に
     <literal>-1</literal> を返します。
     エラー内容を示す文字列が、<literal>$phperrmsg</literal> に
     書きこまれます。
     この関数が <literal>@msql_list_fields()</literal> としてコールされた
     場合を除いて、このエラー文字列の出力も行われます。
    </para>
    <para>
     <function>msql_error</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-listfields">
   <refnamediv>
    <refname>msql_listfields</refname>
    <refpurpose>結果フィールドのリストを得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <para>
     <function>msql_list_fields</function>を参照ください。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-list-dbs">
   <refnamediv>
    <refname>msql_list_dbs</refname>
    <refpurpose>サーバー上の mSQL データベースのリストを返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_list_dbs</methodname>
      <void/>
     </methodsynopsis>
    <para>
     <function>msql_list_dbs</function> は、カレントのmsqlデーモン
     で利用可能なデータベースを保持する結果ポインタを返します。
     この結果ポインタを使用するには、
     <function>msql_dbname</function> 関数を使用してください。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-listdbs">
   <refnamediv>
    <refname>msql_listdbs</refname>
    <refpurpose>サーバーにおける mSQL データベースのリストを得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <para>
     <function>msql_list_dbs</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-list-tables">
   <refnamediv>
    <refname>msql_list_tables</refname>
    <refpurpose>mSQL データベースにおけるテーブルのリストを得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_list_tables</methodname>
      <methodparam><type>string</type><parameter>database</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_list_tables</function> は、データベース名を引数とし、
     <function>msql</function> 関数と全く同様にポインタを返します。
     結果ポインタから実際のテーブル名を展開するために
     <function>msql_tablename</function> 関数を使用する必要があります。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-listtables">
   <refnamediv>
    <refname>msql_listtables</refname>
    <refpurpose>mSQL データベースにおけるテーブルのリストを得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <para>
     <function>msql_list_tables</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-num-fields">
   <refnamediv>
    <refname>msql_num_fields</refname>
    <refpurpose>結果におけるフィールドの数を得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_num_fields</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_num_fields</function>は、結果の組におけるフィールドの数を
     返します。
    </para>
    <para>
     <function>msql</function>、
     <function>msql_query</function>、
     <function>msql_fetch_field</function>、
     <function>msql_num_rows</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-num-rows">
   <refnamediv>
    <refname>msql_num_rows</refname>
    <refpurpose>結果の行の数を得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_num_rows</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_num_rows</function>は、結果における行の数を返します。
    </para>
    <para>
     <function>msql</function>、
     <function>msql_query</function>、
     <function>msql_fetch_row</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-numfields">
   <refnamediv>
    <refname>msql_numfields</refname>
    <refpurpose>結果におけるフィールドの数を得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_numfields</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>  
     <function>msql_num_fields</function> と同じです。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-numrows">
   <refnamediv>
    <refname>msql_numrows</refname>
    <refpurpose>結果における行の数を返します</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_numrows</methodname>
      <void/>
     </methodsynopsis>
    <para>  
     <function>msql_num_rows</function> と同じです。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-pconnect">
   <refnamediv>
    <refname>msql_pconnect</refname>
    <refpurpose>持続的な mSQL 接続を開きます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_pconnect</methodname>
      <methodparam choice="opt"><type>string</type><parameter>server</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>username</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>password</parameter></methodparam>
     </methodsynopsis>
    <para>
     成功した場合は、正の mSQL 持続リンク ID を返します。
     エラーの場合は&false;を返します。
    </para>
    <para> 
     <function>msql_pconnect</function>は、大きな違いが二つあること以外は
     <function>msql_connect</function> と全く同様に動作します。
    </para>
    <para> 
     1番目の差異は、この関数は接続した際に同じホストにおいてすでに確立
     された(持続的な)リンクを見つけようとすることです。そうしたリンク
     が見つかった場合、新たな接続を開く代わりにそのリンクへのIDが返さ
     れます。
    </para>
    <para> 
     2番目は、スクリプトの実行終了時にSQLサーバーへの接続が閉じられな
     いということです。代わりに、リンクは、次に使用するために開かれた
     ままにされます。(<function>msql_close</function> は、
     <function>msql_pconnect</function>により確立されたリンクを閉じま
     せん)
    </para>
    <para> 
     このため、この型のリンクは、'持続的' であると呼ばれます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-query">
   <refnamediv>
    <refname>msql_query</refname>
    <refpurpose>mSQL クエリーを送信します</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_query</methodname>
      <methodparam><type>string</type><parameter>query</parameter></methodparam>
      <methodparam><type>int</type><parameter>link_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>msql_query</function>は、指定したリンクIDが指す
     サーバー上の現在アクティブなデータベースにクエリーを送信します。
     リンク ID が指定されない場合は、最後にオープンされたリンクが
     仮定されます。リンクがオープンされてない場合、
     この関数は、<function>msql_connect</function> がコール
     される時と同様にリンクを確立しようと試み、そのリンクを
     使用します。
    </para>
    <para>
     成功した場合に正のmSQL クエリーIDを返します。エラーの場合に&false;
     を返します。
    </para>
    <example>
     <title><function>msql_query</function></title>
     <programlisting role="php">
<![CDATA[
<?php 
$link = msql_connect("dbserver")
   or die("unable to connect to msql server: ".msql_error());
msql_select_db("db", $link)
   or die("unable to select database 'db': ".msql_error());

$result = msql_query("SELECT * FROM table WHERE id=1", $link);
if (!$result) {
   die("query failed: ".msql_error());
}

while ($row = msql_fetch_array($result)) {
    echo $row["id"];
}
?>
]]>
     </programlisting>
    </example>
    <para>
     <function>msql</function>、
     <function>msql_select_db</function>、
     <function>msql_connect</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-regcase">
   <refnamediv>
    <refname>msql_regcase</refname>
    <refpurpose>
     大文字小文字を区別しないマッチング用に正規表現を作成します
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <para>
     <function>sql_regcase</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-result">
   <refnamediv>
    <refname>msql_result</refname>
    <refpurpose>結果のデータを得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_result</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>i</parameter></methodparam>
      <methodparam><type>mixed</type><parameter>field</parameter></methodparam>
     </methodsynopsis>
    <para>
     指定したmSQL結果データの指定した行番号とオフセットにあるセルの
     内容を返します。
    </para>
    <para> 
     <function>msql_result</function>は、mSQL結果データから一つのセルの
     内容を返します。引数 field は、フィールドのオフセットまたは、
     フィールド名、テーブル名.フィールド名とすることができます。
     カラム名が、エイリアス定義されている場合
     ('select foo as bar from...') には、カラム名の代わりに
     エイリアスを使用します。
    </para>
    <para> 
    大きな結果セットを処理する際には、(以下に指定した)
    行全体を取り出す関数のどれかを使用することを考慮するべきです。
    これらの関数は複数セルの内容を返し、<function>msql_result</function>
    よりもかなり高速に動作します。
    また、フィールド引数について数値オフセットを指定するほうが、
    フィールド名やテーブル名.フィールド名を引数に指定するよりも
    はるかに高速に動作することにも注意してください。
    </para>
    <para> 
     高速に動作する別の推奨される方法は、
     <function>msql_fetch_row</function>、
     <function>msql_fetch_array</function>、
     <function>msql_fetch_object</function> です。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-select-db">
   <refnamediv>
    <refname>msql_select_db</refname>
    <refpurpose>mSQL データベースを選択します</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>msql_select_db</methodname>
      <methodparam><type>string</type><parameter>database_name</parameter></methodparam>
      <methodparam><type>int</type><parameter>link_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     成功した場合に&true;、エラーの場合に&false;を返します。
    </para>
    <para>  
     <function>msql_select_db</function> は、指定したリンクID が指す
     サーバー上のデータベースをアクティブにします。
     リンク ID が指定されない場合、最後にオープンされたリンクが仮定されます。
     リンクが一度もオープンされていない場合、この関数は、
     <function>msql_connect</function>がコールされた時と同様にリンクを
     確立しようと試みそのリンクを使用します。
    </para>
    <para> 
     <function>msql_query</function> を続けて呼び出した場合、
     アクティブなデータベースに対して実行されます。
    </para>
    <para>
     <function>msql_connect</function>、
     <function>msql_pconnect</function>、
     <function>msql_query</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>


  <refentry id="function.msql-selectdb">
   <refnamediv>
    <refname>msql_selectdb</refname>
    <refpurpose>mSQL データベースを選択します</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <para>
     <function>msql_select_db</function> を参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.msql-tablename">
   <refnamediv>
    <refname>msql_tablename</refname>
    <refpurpose>フィールドのテーブル名を得ます</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>msql_tablename</methodname>
      <methodparam><type>int</type><parameter>query_identifier</parameter></methodparam>
      <methodparam><type>int</type><parameter>field</parameter></methodparam>
     </methodsynopsis>
    <para>    
     <function>msql_tablename</function>は、<function>msql_list_tables
     </function>より返された結果ポインタおよび整数インデックスを引数として、
     テーブルの名前を返します。
     結果ポインタにおけるテーブルの数を求めるために
     <function>msql_numrows</function> 関数を使用することができます。
     <example>
     <title><function>msql_tablename</function>の例</title>
      <programlisting role="php">
<![CDATA[
<?php 
msql_connect ("localhost");
$result = msql_list_tables ("wisconsin");
$i = 0;
while ($i < msql_numrows ($result)) {
    $tb_names[$i] = msql_tablename ($result, $i);
    echo $tb_names[$i] . "<BR>";
    $i++; 
}
?>
]]>
      </programlisting>
     </example>
    </para>
   </refsect1>
  </refentry>

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

