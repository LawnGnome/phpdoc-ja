
 <reference id="ref.info">
  <title>PHP オプションと情報</title>
  <titleabbrev>PHP オプション/情報</titleabbrev>

  <refentry id="function.error-log">
   <refnamediv>
    <refname>error_log</refname>
    <refpurpose>エラーメッセージを送る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>error_log</function></funcdef>
     <paramdef>string <parameter>message</parameter></paramdef>
     <paramdef>int <parameter>message_type</parameter></paramdef>
     <paramdef>string <parameter><optional>destination
            </optional></parameter></paramdef>
     <paramdef>string <parameter><optional>extra_headers
            </optional></parameter></paramdef>
    </funcsynopsis>
    <para>
    エラーメッセージを Web サーバのエラーログ、
    <acronym>TCP</acronym>ポート、ファイルのいずれかに送ります。
    最初のパラメータ <parameter>message</parameter> はログされる
    メッセージです。2 番目のパラメータ <parameter>message_type
    </parameter> はメッセージをどこへ送るのかを指定します。
     <table>
      <title><function>error_log</function> ログタイプ</title>
      <tgroup cols="2">
       <tbody>
    <row>
     <entry>0</entry>
     <entry>
    <parameter>message</parameter> は、オペレーティング・システム
    のシステムログのメカニズムまたはファイルのいずれかを使って
    PHP のシステム・ロガーに送られます。どちらが使われるかは、
    <link linkend="ini.error-log">error_log</link> の設定
    ディレクティブにより決定されます。
     </entry>
    </row>
    <row>
     <entry>1</entry>
     <entry>
    <parameter>message</parameter> は、<parameter>destination
    </parameter> パラメータで指定されたアドレスに、電子メール
    により送られます。このメッセージタイプの場合にのみ、
    4 番目のパラメータである <parameter>extra_headers</parameter>
    が使われます。このメッセージタイプは、<function>Mail</function>
    と同様に、同じ名前の内部関数を使用します。
     </entry>
    </row>
    <row>
     <entry>2</entry>
     <entry>
    <parameter>message</parameter> は、PHP のデバッグ用コネクション
    を通して送られます。このオプションは、
    <link linkend="enable-debugger">リモートデバッグが有効になっている
    </link>場合のみ使用できます。このケースでは、
    <parameter>destination</parameter> パラメータにより、
    デバッグ情報を受け取るソケットのホスト名または IP アドレス、
    およびオプションでポート番号を指定します。
     </entry>
    </row>
    <row>
     <entry>3</entry>
     <entry>
    <parameter>message</parameter> は <parameter>destination
    </parameter> で指定されたファイルに追加されます。
     </entry>
    </row>
       </tbody>
      </tgroup>
     </table></para>
    <para>
     <example>
      <title><function>error_log</function> の例</title>
      <programlisting role="php">
// データベースに接続できない場合、
// サーバログを通してエラーを通知する。
if (!Ora_Logon($username, $password)) {
    error_log("オラクルのデータベースが使用できません!", 0);
}

// Foo に失敗したら、管理者に email で通知する
if (!($foo = allocate_new_foo()) {
    error_log("大変です！ FOO に失敗しました!", 1,
              "operator@mydomain.com");
}

// これ以外の error_log() のコール方法：
error_log("大変だ!", 2, "127.0.0.1:7000");
error_log("大変だ!", 2, "loghost");
error_log("大変だ!", 3, "/var/tmp/my-errors.log");
</programlisting>
     </example></para>
   </refsect1>
  </refentry>

  <refentry id="function.error-reporting">
   <refnamediv>
    <refname>error_reporting</refname>
    <refpurpose>どの PHP エラーを報告するかをセットする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>error_reporting</function></funcdef>
     <paramdef>int <parameter><optional>level</optional></parameter></paramdef>
    </funcsynopsis>
    <para>
    PHP のエラー報告レベルをセットし、元のレベルを返します。
    エラー報告レベルは以下の値のビットマスクです（リンクをたどって
    もらうと、それらの意味を知るための内部値がわかります）。
     <table>
      <title><function>error_reporting</function> ビット値</title>
      <tgroup cols="2">
       <thead>
    <row>
     <entry>値</entry>
     <entry>内部名</entry>
    </row>
       </thead>
       <tbody>
    <row>
     <entry>1</entry>
     <entry><link linkend="internal.e-error">E_ERROR</link></entry>
    </row>
    <row>
     <entry>2</entry>
     <entry><link linkend="internal.e-warning">E_WARNING</link></entry>
    </row>
    <row>
     <entry>4</entry>
     <entry><link linkend="internal.e-parse">E_PARSE</link></entry>
    </row>
    <row>
     <entry>8</entry>
     <entry><link linkend="internal.e-notice">E_NOTICE</link></entry>
    </row>
    <row>
     <entry>16</entry>
     <entry><link linkend="internal.e-core-error">E_CORE_ERROR</link></entry>
    </row>
    <row>
     <entry>32</entry>
     <entry><link linkend="internal.e-core-warning">E_CORE_WARNING</link></entry>
    </row>
       </tbody>
      </tgroup>
     </table></para>
   </refsect1>
  </refentry>

   <refentry id="function.extension-loaded">
    <refnamediv>
     <refname>extension_loaded</refname>
     <refpurpose>ある拡張機能がロードされているかどうかを調べる</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>bool <function>extension_loaded</function></funcdef>
      <paramdef>string <parameter>name</parameter></paramdef>
     </funcsynopsis>
     <simpara>
      <parameter>name</parameter> で指定する拡張機能がロードされている場合に
      true を返します。<function>phpinfo</function> を用いて種々の拡張機能の名前を
      知ることができます。</simpara>
      <para>
      <function>phpinfo</function> も参照下さい。
     <note>
     <para>
       この関数は、3.0.10 で追加されました。</para>
     </note></para>
 
    </refsect1>
   </refentry>

  <refentry id="function.getenv">
   <refnamediv>
    <refname>getenv</refname>
    <refpurpose>環境変数の値を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>getenv</function></funcdef>
     <paramdef>string <parameter>varname</parameter></paramdef>
    </funcsynopsis>

    <para>
    <parameter>varname</parameter> が示す環境変数の値を返し、
    エラーの場合は FALSE を返します。

	 <informalexample><programlisting>
$ip = getenv("REMOTE_ADDR"); // ユーザーのIPアドレスを得ます
	</programlisting></informalexample></para>
     <para>
       <function>phpinfo</function> を使用して全ての環境変数の一覧を見ることができます。
      <ulink url="http://hoohoo.ncsa.uiuc.edu/cgi/">CGI
      specification</ulink> 、特に <ulink
      url="http://hoohoo.ncsa.uiuc.edu/cgi/env.html">環境変数のページ</ulink>
	を見ることにより、それらの環境変数の役割の多くを知ることができます。</para>
   
   </refsect1>
  </refentry>

  <refentry id="function.get-cfg-var">
   <refnamediv>
    <refname>get_cfg_var</refname>
    <refpurpose>PHP 設定オプションの値を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>get_cfg_var</function></funcdef>
     <paramdef>string <parameter>varname</parameter></paramdef>
    </funcsynopsis>

    <simpara>
    <parameter>varname</parameter> で指定された PHP 設定オプション
    の現在の値を返し、エラーの場合は FALSE を返します。</simpara>

     <simpara>
     この関数は、
     PHP がコンパイルされた際にセットされた設定情報や
     Apache の設定ファイルから(php3_configuration_option 命令により)
     読んだ設定情報は返しません。</simpara>
 
     <simpara>
      システムが <link linkend="configuration.file">設定ファイル</link>
      を使用しているかどうかを確認するには、cfg_file_path の設定値を
      取得してみて下さい。
      この値が利用可能なら、設定ファイルが使用されています。</simpara>
   </refsect1>
  </refentry>

  <refentry id="function.get-current-user">
   <refnamediv>
    <refname>get_current_user</refname>
    <refpurpose>現在の PHP スクリプトの所有者の名前を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>get_current_user</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>

    <simpara>
    現在の PHP スクリプトの所有者の名前を返します。</simpara>

    <simpara>
     <function>getmyuid</function>,
     <function>getmypid</function>,
     <function>getmyinode</function>,
     <function>getlastmod</function> も参照して下さい。</simpara>

   </refsect1>
  </refentry>

    <refentry id="function.get-magic-quotes-gpc">
    <refnamediv>
     <refname>get_magic_quotes_gpc</refname>
     <refpurpose>magic quotes gpc の現在アクティブな設定を得ます。</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>long <function>get_magic_quotes_gpc</function></funcdef>
      <paramdef>void</paramdef>
     </funcsynopsis>
 
     <simpara>
      <link linkend="ini.magic-quotes-gpc">magic_quotes_gpc</link>
     の現在アクティブな設定を返します。(オフの場合 0、オンの場合 1)</simpara>
 
     <simpara>
      <function>get_magic_quotes_runtime</function>,
      <function>set_magic_quotes_runtime</function>も参照下さい。</simpara>
    </refsect1>
   </refentry>
 
   <refentry id="function.get-magic-quotes-runtime">
    <refnamediv>
     <refname>get_magic_quotes_runtime</refname>
     <refpurpose>magic_quotes_runtime の現在アクティブな設定値を得ます</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>long <function>get_magic_quotes_runtime</function></funcdef>
      <paramdef>void</paramdef>
     </funcsynopsis>
 
     <simpara>
      <link linkend="ini.magic-quotes-runtime">magic_quotes_runtime</link>
     の現在アクティブな設定値を返します。
      (オフの場合 0、オンの場合 1)</simpara>
 
     <simpara>
      <function>get_magic_quotes_gpc</function>,
      <function>set_magic_quotes_runtime</function> も参照下さい。</simpara>
    </refsect1>
   </refentry>
   
  <refentry id="function.getlastmod">
   <refnamediv>
    <refname>getlastmod</refname>
    <refpurpose>最終ページ更新時刻を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>getlastmod</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>

    <para>
    現在のページが最後に更新された時刻を返します。返される
    値は Unix のタイムスタンプで、そのまま <function>date
    </function>に渡す事ができます。エラーの場合は FALSE を返します。

     <example>
      <title>getlastmod() の例</title>
      <programlisting>
// たとえば、'最終更新時刻：March 04 1998 20:43:59.' を出力する
echo "最終更新時刻：".date( "F d Y H:i:s.", getlastmod() );
      </programlisting>
     </example></para>

    <para>
     <function>date</function>,
     <function>getmyuid</function>,
     <function>get_current_user</function>,
     <function>getmyinode</function>,
     <function>getmypid</function> も参照して下さい。</para>

   </refsect1>
  </refentry>

  <refentry id="function.getmyinode">
   <refnamediv>
    <refname>getmyinode</refname>
    <refpurpose>現在のスクリプトの i ノードを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>getmyinode</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>

    <para>
    現在のスクリプトの i ノードを返し、エラーの場合は  FALSE を返します。</para>

    <para>
     <function>getmyuid</function>,
     <function>get_current_user</function>,
     <function>getmypid</function>,
     <function>getlastmod</function> も参照下さい。</para>

   </refsect1>
  </refentry>

  <refentry id="function.getmypid">
   <refnamediv>
    <refname>getmypid</refname>
    <refpurpose>PHP のプロセス ID を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>getmypid</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>

    <para>
    現在の PHP のプロセス ID を返し、エラーの場合は FALSE を返します。</para>

    <para>
    サーバ・モジュールとして動作中は、別個の pid を取得するための
    スクリプトの分割呼び出し(separate invocations) は保証されません。</para>

    <para>
     <function>getmyuid</function>,
     <function>get_current_user</function>,
     <function>getmyinode</function>,
     <function>getlastmod</function> も参照下さい。</para>

   </refsect1>
  </refentry>

  <refentry id="function.getmyuid">
   <refnamediv>
    <refname>getmyuid</refname>
    <refpurpose>PHP スクリプト所有者のユーザ ID を取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>getmyuid</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>

    <simpara>
    現在のスクリプトのユーザ ID を返し、エラーの場合は FALSE を返します。</simpara>

    <simpara>
     <function>getmypid</function>,
     <function>get_current_user</function>,
     <function>getmyinode</function>,
     <function>getlastmod</function> も参照下さい。</simpara>

   </refsect1>
  </refentry>

  <refentry id="function.getrusage">
   <refnamediv>
    <refname>getrusage</refname>
    <refpurpose>カレントリソースの使用に関する情報を得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>getrusage</function></funcdef>
     <paramdef>int <parameter><optional>who</optional></parameter></paramdef>
    </funcsynopsis>

    <para>
    この関数は、getrusage(2) へのインターフェースです。
    システムコールから返されたデータを有する連想配列を返します。
    who が 1 の場合、getrusage は RUSAGE_CHILDREN を付けて
    コールされます。

    全エントリは、記述されたフィールド名を用いてアクセス可能です。

     <example>
      <title>Getrusage の例</title>
      <programlisting role="php">
$dat = getrusage();
echo $dat["ru_nswap"];         # スワップの数
echo $dat["ru_majflt"];        # ページフォルトの数
echo $dat["ru_utime.tv_sec"];  # 使用するユーザー時間 (秒)
echo $dat["ru_utime.tv_usec"]; # 使用するユーザー時間 (マイクロ秒)
</programlisting></example>

更に詳細な情報は、システムの man ページを参照下さい。
    </para>
   </refsect1>
  </refentry>

 <refentry id="function.phpinfo">
   <refnamediv>
    <refname>phpinfo</refname>
    <refpurpose>いろいろな PHP 情報を出力する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>phpinfo</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>

    <para>
    現在の PHP の状態に関する、大量の情報を出力します。出力される
    情報には、PHP コンパイルオプションと拡張機能、PHP のバージョン、
    サーバ情報と環境（モジュールとしてコンパイルされた場合）、
    PHP の環境、OS バージョン情報、パス、構成オプションのマスター
    およびローカルの値、HTTP ヘッダ、 GNU Public License などが
    あります。</para>

    <para>
    <function>phpversion</function> も参照下さい。</para>

   </refsect1>
  </refentry>

  <refentry id="function.phpversion">
   <refnamediv>
    <refname>phpversion</refname>
    <refpurpose>現在の PHP バージョンを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>phpversion</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>

    <para>
    現在動作中の PHP パーサのバージョンを表す文字列を返します。

     <example>
      <title>phpversion() の例</title>
      <programlisting>
// たとえば、'現在の PHP バージョン：3.0rel-dev' と表示する
echo "現在の PHP バージョン：".phpversion();
      </programlisting>
     </example></para>

    <para>
    <function>phpinfo</function> も参照下さい。</para>

   </refsect1>
  </refentry>


  <refentry id="function.putenv">
   <refnamediv>
    <refname>putenv</refname>
    <refpurpose>環境変数の値を設定する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>void <function>putenv</function></funcdef>
     <paramdef>string <parameter>setting</parameter></paramdef>
    </funcsynopsis>

    <para>
    環境変数に <parameter>setting</parameter> を追加します。</para>
    <para>
     <example>
      <title>環境変数の設定</title>
      <programlisting>
putenv("UNIQID=$uniqid");
      </programlisting>
     </example></para>

   </refsect1>
  </refentry>
 
   <refentry id="function.set-magic-quotes-runtime">
    <refnamediv>
     <refname>set_magic_quotes_runtime</refname>
     <refpurpose>magic_quotes_runtime の現在アクティブな設定を設定します。
</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>long <function>set_magic_quotes_runtime</function></funcdef>
      <paramdef>int <parameter>new_setting</parameter></paramdef>
     </funcsynopsis>
 
     <simpara>
      <link linkend="ini.magic-quotes-runtime">magic_quotes_runtime</link>
      の現在アクティブな設定をセットします。
      (オフの場合 0、オンの場合 1)</simpara>
 
     <simpara>
      <function>get_magic_quotes_gpc</function>,
      <function>get_magic_quotes_runtime</function> も参照下さい。</simpara>
    </refsect1>
   </refentry>
 
   <refentry id="function.set-time-limit">
    <refnamediv>
     <refname>set_time_limit</refname>
     <refpurpose>実行時間の最大値を制限します</refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>void <function>set_time_limit</function></funcdef>
      <paramdef>int <parameter>seconds</parameter></paramdef>
     </funcsynopsis>
     <simpara>
     スクリプトが実行可能な秒数を設定します。
     この制限にかかるとスクリプトは致命的エラーを返します。
     デフォルトの制限値は 30 秒です。
     なお、<link linkend="configuration.file">設定ファイル</link>で 
	max_execution_time の値が定義されている場合にはそれを用います。
     secondsにゼロをセットした場合、時間制限は行われません。</simpara>

     <simpara>
     <function>set_time_limit</function> がコールされた場合、
     タイムアウトカウンターをゼロから再スタートします。

     言いかえると、タイムアウトがデフォルトの 30 秒で
     スクリプト実行までに 25 秒かかる場合に、
      set_time_limit( 20 ) を実行すると、スクリプトは、
     タイムアウトまでに全体で 45 s の間実行されます。
     </simpara>

     <simpara>
	 <function>set_time_limit</function> は、PHPがセーフモードで実行されている場合には
	 実効がないことに注意して下さい。セーフモードをオフにするか、
	 <link linkend="configuration.file">設定ファイル</link> の時間制限を変更する
	 以外に対策はありません。
     </simpara>

    </refsect1>
   </refentry>
 

</reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
