 <reference id="ref.datetime">
  <title>日付・時刻関数</title>
  <titleabbrev>日付/時刻</titleabbrev>

  <refentry id="function.checkdate">
   <refnamediv>
    <refname>checkdate</refname>
    <refpurpose>日付の妥当性を確認します</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>checkdate</function></funcdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
    </funcsynopsis>
    <para>
     与えられた日付が有効であれば TRUE を返し、そうでなければ FALSE
     を返します。引数で指定された日付の妥当性をチェックします。日付が
     以下のようになっていれば妥当であると判断されます。
     <itemizedlist>
      <listitem>
       <simpara>
        年が 0 から 32767 の間であること。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        月が 1 から 12 の間であること。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        日が与えられた月の日数以内に収まること。年も考慮の対象と
        なります。
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.date">
   <refnamediv>
    <refname>date</refname>
    <refpurpose>ローカルの日付/時刻を書式化する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>date</function></funcdef>
     <paramdef>string <parameter>format</parameter></paramdef>
      <paramdef>int 
       <parameter>
        <optional>timestamp</optional>
       </parameter>
      </paramdef>
    </funcsynopsis>
    <para>
     与えられた引数 <parameter>timestamp</parameter> を、与えられた
     フォーマット文字列によりフォーマットし、日付文字列を返します。
     タイムスタンプが与えられない場合は、現在のローカル時刻が使われます。
    </para>
    <para>
     フォーマット文字列では、以下の文字が認識されます。
     <itemizedlist>
      <listitem>
       <simpara>
	a - "am" または "pm"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	A - "AM" または "PM"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	d - 日。2桁の数字 (先頭にゼロが付く場合も)。すなわち、"01"から"31"まで
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	D - 曜日。3 文字のテキスト形式。すなわち "Fri"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	F - 月。テキスト形式。長い形式。すなわち "January"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	h - 時。数字。12 時間単位。すなわち"01"から"12"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	H - 時。数字。24 時間単位。すなわち"00"から"23"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	g - 時。12時間単位。先頭にゼロを付けない。すなわち"1"から"12"。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	G - 時。24時間単位。先頭にゼロを付けない。すなわち"0"から"23"。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	i - 分。数字。すなわち"00"から"59"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	j - 日。数字。先頭にゼロを付けない。すなわち"1"から"31"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	l (小文字は 'L') - 曜日。テキスト形式。長い形式。すなわち "Friday"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	m - 月。すなわち"01"から"12"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	M - 月。3 文字のテキスト形式。すなわち "Jan"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	s - 秒。すなわち"00"から"59"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	S - 英語形式の序数を表すサフィックス。2 文字。すなわち "th" や "nd"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	t - 指定した月の日数。すなわち、"28"から"31"。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	U - Unix 時(1970 年 1 月 1 日)からの秒数
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	w - 曜日。数値。すなわち、"0" (日曜) から "6" (土曜日)まで
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	Y - 年。4 桁の数字。すなわち"1999"。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	y - 年。2 桁の数字。すなわち"99"。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	z - 年間の通算日。数字。。すなわち"0"から"365"。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	Z - タイムゾーンのオフセット秒数。(すなわち、"-43200"から"43200")
       </simpara>
      </listitem>
     </itemizedlist>
     フォーマット文字列中の認識されない文字は、そのまま表示されます。
     <function>gmdate()</function>で使用した場合、"Z"フォーマットは常に"0"を
     返します。

     <example>
      <title><function>date</function> の例</title>
      <programlisting role="php">
print (date("l dS of F Y h:i:s A"));
print ("July 1, 2000 is on a " . date("l", mktime(0,0,0,7,1,2000)));
     </programlisting>
     </example>
    </para>
    <para>
     <function>date</function> と <function>mktime</function> の
     両方を用いて未来または過去の日付を知ることができます。
     
     <example>
      <title>
       <function>date</function>と<function>mktime</function>の例
      </title>
      <programlisting>
$tomorrow  = mktime (0,0,0,date("m")  ,date("d")+1,date("Y"));
$lastmonth = mktime (0,0,0,date("m")-1,date("d"),  date("Y"));
$nextyear  = mktime (0,0,0,date("m"),  date("d"),  date("Y")+1);
      </programlisting>
     </example>
    </para>
    <para>
     他の言語で日付をフォーマットするためには、
     <function>setlocale</function> および <function>strftime</function>
     関数を使用する必要があります。
    </para>
    <para>
     <function>gmdate</function>, <function>mktime</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.gmstrftime">
   <refnamediv>
    <refname>gmstrftime</refname>
    <refpurpose>
     ロケールの設定に基づきGMT/CUT 時刻/日付をフォーマットする
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>gmstrftime</function></funcdef>
     <paramdef>string <parameter>format</parameter></paramdef>
     <paramdef>int <parameter>timestamp</parameter></paramdef>
    </funcsynopsis>
    <para>
     グリニッジ標準時を返すこと以外は、
     <function>strftime</function>と同じ動作をします。例えば、東部標準時
     (GMT -0500)で実行した場合、以下の最初の行は"Dec 31 1998 20:00:00"を
     出力し、二行目は"Jan 01 1999 01:00:00"を」出力します。
     <example>
      <title><function>gmstrftime</function> の例</title>
      <programlisting role="php">
setlocale ('LC_TIME','en_US');
echo strftime ("%b %d %Y %H:%M:%S",mktime(20,0,0,12,31,98))."\n";
echo gmstrftime ("%b %d %Y %H:%M:%S",mktime(20,0,0,12,31,98))."\n";
      </programlisting>
     </example>
    </para>
    <para>
     <function>strftime</function>も参照ください。
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.getdate">
   <refnamediv>
    <refname>getdate</refname>
    <refpurpose>日付／時刻情報の取得</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>getdate</function></funcdef>
     <paramdef>int <parameter>timestamp</parameter></paramdef>
    </funcsynopsis>
    <para>
    引数 <parameter>timestamp</parameter> に関する日付情報を、
    以下の要素を持つ連想配列にして返します。
     <itemizedlist>
      <listitem>
       <simpara>
	"seconds" - 秒
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"minutes" - 分
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"hours" - 時
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"mday" - 月単位の日付
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"wday" - 曜日、数字
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"mon" - 月、数字
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"year" - 年、数字
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"yday" - 年単位の日付、数字。たとえば "299"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"weekday" - 曜日(テキスト)たとえば "Friday"
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"month" - 月(テキスト)たとえば "January"
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.gettimeofday">
   <refnamediv>
    <refname>gettimeofday</refname>
    <refpurpose>現在の時間を得る</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>gettimeofday</function></funcdef>
     <paramdef>void</paramdef>
    </funcsynopsis>
    <para>
     この関数は、gettimeofday(2) へのインターフェースです。この
     関数は、システムコールから返されたデータを有する連想配列を
     返します。
     <itemizedlist>
      <listitem>
       <simpara>
	"sec" - 秒
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"usec" - マイクロ秒
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"minuteswest" - グリニッジ基準の分
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	"dsttime" - 夏時間補正の型
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.gmdate">
   <refnamediv>
    <refname>gmdate</refname>
    <refpurpose>GMT/CUT の日付／時刻を書式化</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>gmdate</function></funcdef>
     <paramdef>string <parameter>format</parameter></paramdef>
     <paramdef>int <parameter>timestamp</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>date</function> 関数と同じですが、返される時刻が
     グリニッジ標準時(GMT) であるところが異なります。たとえば
     フィンランド(GMT +0200)で実行されると、下の例の最初の行は
     "Jan 01 1998 00:00:00" と表示されますが、2 番目の行は
     "Dec 31 1997 22:00:00" と表示されます。
     <example>
      <title><function>gmdate</function> の例</title>
      <programlisting role="php">
echo date ( "M d Y H:i:s",mktime(0,0,0,1,1,1998) );
echo gmdate ( "M d Y H:i:s",mktime(0,0,0,1,1,1998) );
      </programlisting>
     </example>
    </para>
    <para>
     <function>date</function>,<function>mktime</function>, 
     <function>gmmktime</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.gmmktime">
   <refnamediv>
    <refname>gmmktime</refname>
    <refpurpose>GMT 日付による UNIX タイムスタンプを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>gmmktime</function></funcdef>
     <paramdef>int <parameter>hour</parameter></paramdef>
     <paramdef>int <parameter>minute</parameter></paramdef>
     <paramdef>int <parameter>second</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int 
      <parameter><optional>is_dst</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
     渡されるパラメータが GMT 日付を表すことを除けば <function>mktime
     </function> と同じです。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.microtime">
   <refnamediv>
    <refname>microtime</refname>
    <refpurpose>現在の UNIX タイムスタンプをマイクロ秒まで返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>microtime</function></funcdef>
     <void/>
    </funcsynopsis>
    <para>
     文字列 "msec sec" を返します。sec は現在時刻を Unix epoch
     (00:00:00 1970 年 1 月 1 日)からの通算秒としたもので、msec は
     マイクロ秒の部分です。この関数は、システムコール gettimeofday() を
     サポートするオペレーティング・システム上でのみ使えます。
    </para>
    <para>
     <function>time</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.mktime">
   <refnamediv>
    <refname>mktime</refname>
    <refpurpose>日付を UNIX のタイムスタンプとして取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mktime</function></funcdef>
     <paramdef>int <parameter>hour</parameter></paramdef>
     <paramdef>int <parameter>minute</parameter></paramdef>
     <paramdef>int <parameter>second</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int 
      <parameter><optional>is_dst</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
     <emphasis>警告:</emphasis> 
     引数の順番が、通常の UNIX mktime() の引数の順番と
     異なっていることに注意して下さい。
     このことは、(以下に示すように)パラメータを右から左に
     省略出来るようにすることに役立っているわけではありません。
     これらの値をスクリプトで混用するというのは、ありがちなエラーです。
    </para>
    <para>
     与えられた引数に従って UNIX のタイムスタンプを返します。
     このタイムスタンプは、Unix epoch(1970 年 1 月 1 日)から
     指定された時刻までの通算秒を表す長整数です。
    </para>
    <para>
     引数は右から順に省略することができます。省略された引数は、
     ローカルの日付と時刻に従って、現在の値にセットされます。
    </para>
    <para>
     <parameter>is_dst</parameter> はサマータイムの時に1にセットされ、
     そうでない時に0に、サマータイムであるかどうかが不明である場合に-1
     にセットされます。
    </para>
    <note>
     <para>
      <parameter>is_dst</parameter> は　3.0.10　で追加されました。
     </para>
    </note>
    <para>
     <function>mktime</function> は入力日付の有効性を確認しており、
     範囲外の入力を自動的に修正して計算してくれるので便利です。
     例えば、以下の各行はいずれも文字列 "Jan-01-1998"を出力します。

     <example>
      <title><function>mktime</function>の例</title>
      <programlisting>
echo date ("M-d-Y", mktime (0,0,0,12,32,1997));
echo date ("M-d-Y", mktime (0,0,0,13,1,1997));
echo date ("M-d-Y", mktime (0,0,0,1,1,1998));
      </programlisting>
     </example>
    </para>
    <para>
     指定した月の最後の日は次の月の -1 番目の日ではなく、
     "0" 番目の日として表すことが可能です。
     以下の例はともに文字列
     "The last day in Feb 2000 is: 29" を出力します。
     <example>
      <title>次の月の最後の日</title>
      <programlisting role="php">
$lastday = mktime (0,0,0,3,0,2000);
echo strftime ("Last day in Feb 2000 is: %d", $lastday);
     
$lastday = mktime (0,0,0,4,-31,2000);
echo strftime ("Last day in Feb 2000 is: %d", $lastday);
      </programlisting>
     </example>
    </para>
    <para>
     <function>date</function>, <function>time</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.strftime">
   <refnamediv>
    <refname>strftime</refname>
    <refpurpose>
     ローカルな設定に基づきローカルな日付・時間をフォーマットします
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>string <function>strftime</function></funcdef>
     <paramdef>string <parameter>format</parameter></paramdef>
     <paramdef>int <parameter>timestamp</parameter></paramdef>
    </funcsynopsis>
    <para>
     指定した <parameter>timestamp</parameter> または timestamp
     が指定されていない場合に現在のローカル時間を用いて指定した
     フォーマット文字列に基づき文字列をフォーマットして返します。
     月および曜日の名前およびその他の言語依存の文字列は、
     <function>setlocale</function> でセットされた現在のロケール
     に関係します。
    </para>
    <para>
     次の変換指定子は、フォーマット文字列として認識されます。
     <itemizedlist>
      <listitem>
       <simpara>
	%a - 現在のロケールに基づく短縮された曜日の名前
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%A - 現在のロケールに基づく完全な曜日の名前
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%b - 現在のロケールに基づく短縮された月の名前
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%B - 現在のロケールに基づく完全な月の名前
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%c - 現在のロケールに基づく好ましい日付と時間の表現
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%d - 日付を10進数で。(00から31)
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%H - 時間を24時間表示の10進数で(00から23)
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%I - 時間を12時間表示の10進数で(01から12までの範囲)
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%j - 年間での日付を 10 進数で表現 (001から366)
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%m - 月を 10 進数で表現 (1から12)
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%M - 分を 10 進数で表現
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%p - 指定した時間により `am' または `pm' 、または
	現在のロケールに対応した文字列
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%S - 秒を 10 進数で表現
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%U - 年間で何番目の週であるかを 10 進数で表現。
	年間で最初の日曜を最初の週の最初の日として数えます。
       </simpara>
      </listitem>
      <listitem>
       <simpara> 
        %V - ISO 8601:1988で規定された現在の年の週番号の10進数表現で
	01から53までの範囲となります。1は最初の週でその週は現在の年に
	最低4日はあります。週は月曜日から始まります。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%W - 現在の年で何番目の週であるかを 10 進数で表現。
	年間で最初の月曜を最初の週の最初の日として数えます。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%w - 曜日を 10 進数で表現。日曜は 0 になります。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%x - 時間を除いた日付を現在のロケールに基づき表現します。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%X - 日付を除いた時間を現在のロケールに基づき表現します。
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%y - 世紀の部分を除いた年を 10進数として表現。(00 から 99 までの範囲)
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%Y - 世紀を含む年を 10進数で表現
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%Z - タイムゾーンまたはその名前または短縮形
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	%% - `%' 文字リテラル
       </simpara>
      </listitem>
     </itemizedlist>
 
     <example>
      <title><function>strftime</function> の例</title>
      <programlisting role="php">
setlocale ("LC_TIME", "C");
print(strftime("%A in Finnish is "));
setlocale ("LC_TIME", "fi");
print(strftime("%A, in French "));
setlocale ("LC_TIME", "fr");
print(strftime("%A and in German "));
setlocale ("LC_TIME", "de");
print(strftime("%A.\n"));
      </programlisting>
     </example>
     この例は、各ロケールがシステムにインストールされている場合に動作します。
    </para>
    <para>
     <function>setlocale</function>、
     <function>mktime</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.time">
   <refnamediv>
    <refname>time</refname>
    <refpurpose>現在の UNIX タイムスタンプを返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>time</function></funcdef>
     <void/>
    </funcsynopsis>
    <para>
     現在時刻を Unix epoch(1970 年 1 月 1 日 00:00:00 GMT))からの通算秒
     として返します。
    </para>
    <para>
     <function>date</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>
  
 </reference>
 
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
