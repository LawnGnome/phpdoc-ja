 <reference id="ref.mcal">
  <title>MCAL 関数</title>
  <titleabbrev>MCAL</titleabbrev>

  <partintro>
   <para>
    MCAL は、Modular Calendar Access Library を意味します。</para>

   <para>
    Libmcal は、カレンダーアクセス用の C ライブラリです。
    このライブラリは、結合性の高いドライバとして書かれています。
    MCAL は、メールボックス用の IMAP モジュールのカレンダー版
    です。
   </para>

   <para>
    mcal サポート機能により、カレンダーストリームを
    IMAP サポート機能によるメールボックスストリームと全く同様に
    オープンすることができます。
    カレンダーは、ローカルファイルに保存したり、リモートのICAPサーバーとしたり、
    mcal ライブラリによりサポートされる他のフォーマットとすることができます。
   </para>

   <para>
    カレンダーイベントは、発生、検索、保存することができます。
    カレンダーのトリガー(アラーム)および定期的なイベントもサポートされます。
   </para>

   <para>
    libmcal により、メインのカレンダーサーバーをアクセス、使用することが
    できます。この場合、特定のデータベースおよびローカルファイルに依存した
    プログラミングは必要ありません。
   </para>

   <para>
   これらの関数を動作させるには、PHP を
    <option role="configure">--with-mcal</option> を付けてコンパイルする
    必要があります。
    この場合、mcal ライブラリがインストールされている必要があります。
    最新版を <ulink url="&url.mcal;">&url.mcal;</ulink> 
    から取得し、コンパイル、インストールしてください。</para>

   <para>
   MCALモジュールを使用する場合に次の定数が定義されます。

    MCAL_SUNDAY,
    MCAL_MONDAY,
    MCAL_TUESDAY,
    MCAL_WEDNESDAY,
    MCAL_THURSDAY,
    MCAL_FRIDAY,
    MCAL_SATURDAY,

    MCAL_RECUR_NONE,
    MCAL_RECUR_DAILY,
    MCAL_RECUR_WEEKLY,
    MCAL_RECUR_MONTHLY_MDAY,
    MCAL_RECUR_MONTHLY_WDAY,
    MCAL_RECUR_YEARLY,

    MCAL_JANUARY,
    MCAL_FEBRUARY,
    MCAL_MARCH,
    MCAL_APRIL,
    MCAL_MAY,
    MCAL_JUNE,
    MCAL_JULY,
    MCAL_AUGUGT,
    MCAL_SEPTEMBER,
    MCAL_OCTOBER,
    MCAL_NOVEMBER, 
    MCAL_DECEMBER

    多くの関数は、各ストリーム毎に固有の内部イベント構造体を
    使用します。これにより、大きなオブジェクトを関数の間で
    渡すことが容易になります。イベント構造体の値を設定、初期化、
    取得する便利な関数があります。</para>

  </partintro>

  <refentry id="function.mcal-open">
   <refnamediv>
    <refname>mcal_open</refname>
    <refpurpose>MCAL 接続をオープンする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_open</function></funcdef>
     <paramdef>string <parameter>calendar</parameter></paramdef>
     <paramdef>string <parameter>username</parameter></paramdef>
     <paramdef>string <parameter>password</parameter></paramdef>
     <paramdef>string <parameter>options</parameter></paramdef>
    </funcsynopsis>
    <para>
     成功時に MCAL ストリーム、エラー時に false を返します。</para>
    <para>
      <function>mcal_open</function> は、指定した
     <parameter>calendar</parameter> 保存ファイルへの MCAL 接続を
     オープンします。
     オプション <parameter>options</parameter> が指定された場合、
     <parameter>options</parameter> もメールボックスに渡されます。
     ストリームの内部イベント構造体も接続時に初期化されます。</para>
    <para></para>
   </refsect1>
  </refentry>


  <refentry id="function.mcal-close">
   <refnamediv>
    <refname>mcal_close</refname>
    <refpurpose>MCAL ストリームを閉じる</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_close</function></funcdef>
     <paramdef>int <parameter>mcal_stream</parameter></paramdef>
     <paramdef>int <parameter>flags</parameter></paramdef>
    </funcsynopsis>
    <para> 
     指定した mcal ストリームを閉じます。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-fetch-event">
   <refnamediv>
    <refname>mcal_fetch_event</refname>
    <refpurpose>
     カレンダーストリームからイベントを取得する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>object <function>mcal_fetch_event</function></funcdef>
     <paramdef>int <parameter>mcal_stream</parameter></paramdef>
     <paramdef>int <parameter>event_id</parameter></paramdef>
     <paramdef>int <parameter><optional>options</optional></parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_fetch_event</function> は、
     <parameter>id</parameter> で指定されたカレンダーストリームから
     イベントを取得します。</para>
    <para>
    以下の要素からなるイベントオブジェクトを返します。
     <itemizedlist>
      <listitem><simpara>
	int id - イベント ID</simpara></listitem>
      <listitem><simpara>
	int public - イベントが public な場合は TRUE、private な場合は FALSE</simpara></listitem>
      <listitem><simpara>
	string category - イベントのカテゴリを表す文字列</simpara></listitem>
      <listitem><simpara>
	string title - イベントのタイトルを表す文字列</simpara></listitem>
      <listitem><simpara>
	string description - イベントの内容を表す文字列</simpara></listitem>
      <listitem><simpara>
	int alarm - アラーム・リマインダイベントが送られるまでの分単位の時間</simpara></listitem>
      <listitem><simpara>
	object start - datetime エントリを有するオブジェクト</simpara></listitem>
      <listitem><simpara>
	object end - datetime エントリを有するオブジェクト</simpara></listitem>


      <listitem><simpara>
	int id - イベント ID </simpara></listitem>
      <listitem><simpara>
	int public - イベントが public な場合は TRUE、private な場合は FALSE</simpara></listitem>
      <listitem><simpara>
	string category - イベントのカテゴリを表す文字列</simpara></listitem>
      <listitem><simpara>
	string title - イベントのタイトルを表す文字列</simpara></listitem>
      <listitem><simpara>
	string description - イベントの内容を表す文字列</simpara></listitem>
      <listitem><simpara>
	int alarm - アラーム・リマインダイベントが送られるまでの分単位の時間</simpara></listitem>
      <listitem><simpara>
	object start - datetime エントリを有するオブジェクト</simpara></listitem>
      <listitem><simpara>
	object end - datetime エントリを有するオブジェクト</simpara></listitem>
      <listitem><simpara>
	int recur_type   - 繰り返しの型</simpara></listitem>
      <listitem><simpara>
	int recur_interval   - 繰り返し周期</simpara></listitem>
      <listitem><simpara>
	datetime recur_enddate   - 繰り返しが終わる日</simpara></listitem>
      <listitem><simpara>
	int recur_data   - 繰り返しデータ</simpara></listitem>
     </itemizedlist>

     全ての datetime エントリは、次の要素を有するオブジェクトから
     構成されます。
     <itemizedlist>
      <listitem><simpara>
	int year - 年</simpara></listitem>
      <listitem><simpara>
	int month - 月</simpara></listitem>
      <listitem><simpara>
	int mday  - 日</simpara></listitem>
      <listitem><simpara>
	int hour  - 時間</simpara></listitem>
      <listitem><simpara>
	int min   - 分</simpara></listitem>
      <listitem><simpara>
	int sec   - 秒</simpara></listitem>         
      <listitem><simpara>
	int alarm   - アラームを送るイベントまでの分単位の時間</simpara></listitem>
     </itemizedlist></para>
   </refsect1>
  </refentry>


  <refentry id="function.mcal-list-events">
   <refnamediv>
    <refname>mcal_list_events</refname>
    <refpurpose>
    指定した二つの datetime 間のイベントのリストを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>mcal_list_events</function></funcdef>
     <paramdef>int <parameter>mcal_stream</parameter></paramdef>
     <paramdef>int 
      <parameter><optional>begin_year</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>begin_month</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>begin_day</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>end_year</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>end_month</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>end_day</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
    指定した開始日および終了日の間のイベントのIDの配列を返します。
    ストリームだけを指定した場合、グローバルイベント構造体の
    開始日および終了日を使用します。</para>
    <para> 
     <function>mcal_list_events</function> 関数は、
     オプションでカレンダーストリームの開始日と終了日をとります。
     指定した日または内部イベントの間にあるイベントのIDの配列
     が返されます。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-append-event">
   <refnamediv>
    <refname>mcal_append_event</refname>
    <refpurpose>MCALカレンダーに新規イベントを保存する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_append_event</function></funcdef>
     <paramdef>int <parameter>mcal_stream</parameter></paramdef>
    </funcsynopsis>
    <para> 
     <function>mcal_append_event</function>はグローバルイベントを
     指定したストリームのMCALカレンダーに保存します。</para>
    <para>
     新規に挿入されたイベントのuidを返します。</para>
     <para></para>
   </refsect1>
  </refentry>


  <refentry id="function.mcal-store-event">
   <refnamediv>
    <refname>mcal_store_event</refname>
    <refpurpose>MCALカレンダーの既存のイベントを修正する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_store_event</function></funcdef>
     <paramdef>int <parameter>mcal_stream</parameter></paramdef>
    </funcsynopsis>
    <para> 
     <function>mcal_store_event</function> は、修正したイベント
     を指定したストリームの現在のグローバルイベントに保存します。</para>
    <para>
     成功時に true 、エラー時に false を返します。</para>
     <para></para>
   </refsect1>
  </refentry>


  <refentry id="function.mcal-delete-event">
   <refnamediv>
    <refname>mcal_delete_event</refname>
    <refpurpose>MCAL カレンダーからイベントを削除する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_delete_event</function></funcdef>
     <paramdef>int <parameter>uid</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_delete_event</function> は uid で指定したカレンダー
     イベントを削除します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-snooze">
   <refnamediv>
    <refname>mcal_snooze</refname>
    <refpurpose>イベントのアラームをオフにする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_snooze</function></funcdef>
     <paramdef>int <parameter>uid</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_snooze</function> は uid で指定したカレンダーイベントの
     アラームをオフにします。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-list-alarms">
   <refnamediv>
    <refname>mcal_list_alarms</refname>
    <refpurpose>
    指定した datetime までにアラームを発生するイベントのリストを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>mcal_list_events</function></funcdef>
     <paramdef>int <parameter>mcal_stream</parameter></paramdef>
     <paramdef>int 
      <parameter><optional>begin_year</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>begin_month</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>begin_day</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>end_year</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>end_month</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>end_day</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
    開始日から終了日までの間にアラームがオフとなるイベントのID
    の配列が返されます。
    ストリームだけが指定された場合、
    グローバルイベント構造体の開始日および終了日を使用します。</para>
    <para> 
     <function>mcal_list_events</function> 
     オプションでカレンダーストリームの開始日と終了日をとります。
     指定した日または内部イベントの間にあるイベントのIDの配列
     が返されます。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-init">
   <refnamediv>
    <refname>mcal_event_init</refname>
    <refpurpose>
    グローバルイベント構造体のストリームを初期化する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_event_init</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_init</function> は、
     グローバルイベント構造体ストリームを初期化します。
     これにより、構造体の全ての要素に効率的に0またはデフォルト値が
     設定されます。</para>
    <para>
    true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-category">
   <refnamediv>
    <refname>mcal_event_set_category</refname>
    <refpurpose>
     グローバルイベント構造体ストリームのcategoryを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_event_set_category</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>string <parameter>category</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_category</function> は、
     グローバルイベント構造体のcategoryを指定した文字列に設定します。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-title">
   <refnamediv>
    <refname>mcal_event_set_title</refname>
    <refpurpose>
    グローバルイベント構造体ストリームのtitleを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_event_set_title</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>string <parameter>title</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_title</function>は、
     グローバルイベント構造体ストリームのtitleを指定した文字列に設定します。
    </para>
    <para>
     trueを返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-description">
   <refnamediv>
    <refname>mcal_event_set_description</refname>
    <refpurpose>
    グローバルイベント構造体ストリームの description を設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_event_set_description</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>string <parameter>description</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_description</function> は、
    グローバルイベント構造体ストリームのdescriptionを指定した文字列に
    設定します。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-start">
   <refnamediv>
    <refname>mcal_event_set_start</refname>
    <refpurpose>
     グローバルイベント構造体ストリームの開始日を設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_event_set_start</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int 
      <parameter>
       <optional>day</optional>
      </parameter>
     </paramdef>
     <paramdef>int 
      <parameter>
       <optional>hour</optional>
      </parameter>
     </paramdef>
     <paramdef>int 
      <parameter>
       <optional>min</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter>
       <optional>sec</optional>
      </parameter>
     </paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_start</function> は、
     グローバルイベント構造体ストリームの開始日を
     指定した値に設定します。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-end">
   <refnamediv>
    <refname>mcal_event_set_end</refname>
    <refpurpose>
     グローバルイベント構造体ストリームの終了日を設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_event_set_end</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int 
      <parameter>
       <optional>day</optional>
      </parameter>
     </paramdef>
     <paramdef>int 
      <parameter>
       <optional>hour</optional>
      </parameter>
     </paramdef>
     <paramdef>int 
      <parameter>
       <optional>min</optional>
      </parameter>
     </paramdef>
     <paramdef>int 
      <parameter>
       <optional>sec</optional>
      </parameter>
     </paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_end</function> は、
     グローバルイベント構造体ストリームの終了日を
     指定した値に設定します。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-alarm">
   <refnamediv>
    <refname>mcal_event_set_alarm</refname>
    <refpurpose>
    グローバルイベント構造体ストリームのアラームを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_event_set_alarm</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>alarm</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_alarm</function> は、グローバルイベント構造体
     ストリームのアラームをイベントの分単位の指定時間前に設定します。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-class">
   <refnamediv>
    <refname>mcal_event_set_class</refname>
    <refpurpose>
     グローバルイベント構造体ストリームのクラスを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_event_set_class</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>class</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_class</function> は、
     グローバルイベント構造体ストリームのクラスを指定した値に設定します。
     class は、public の場合 1、private の場合 0 とします。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>


  <refentry id="function.mcal-is-leap-year">
   <refnamediv>
    <refname>mcal_is_leap_year</refname>
    <refpurpose>
    指定した年が閏年であるかどうかを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_is_leap_year</function></funcdef>
     <paramdef>int <parameter>year</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_is_leap_year</function> は指定した年が
     閏年である場合に 1、そうでない場合に 0 を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-days-in-month">
   <refnamediv>
    <refname>mcal_days_in_month</refname>
    <refpurpose>
    指定した月の日数を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_days_in_month</function></funcdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_days_in_month</function> は、
    指定した年が閏年であるかどうかを考慮しつつ、
    指定した月の日数を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-date-valid">
   <refnamediv>
    <refname>mcal_date_valid</refname>
    <refpurpose>
    指定した年月日が有効な日付である場合に true を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_date_valid</function></funcdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_date_valid</function> は、
    指定した年月日が有効な日付である場合に true を、
    そうでない場合に false を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-time-valid">
   <refnamediv>
    <refname>mcal_time_valid</refname>
    <refpurpose>
    指定した時間、分、秒が有効な時間である場合に true を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_time_valid</function></funcdef>
     <paramdef>int <parameter>hour</parameter></paramdef>
     <paramdef>int <parameter>minutes</parameter></paramdef>
     <paramdef>int <parameter>seconds</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_time_valid</function> は、
    指定した時間、分、秒が有効な時間である場合に true を、
    そうでない場合に false を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-day-of-week">
   <refnamediv>
    <refname>mcal_day_of_week</refname>
    <refpurpose>
    指定した日の曜日を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_</function></funcdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_day_of_week</function> は、
    指定した日の曜日を返します。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-day-of-year">
   <refnamediv>
    <refname>mcal_day_of_year</refname>
    <refpurpose>
    指定した日の年間積算日を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_</function></funcdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_day_of_year</function> は、
    指定した日の年間積算日を返します。</para>
    <para>
     true を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-date-compare">
   <refnamediv>
    <refname>mcal_date_compare</refname>
    <refpurpose>二つの日付を比較する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_date_compare</function></funcdef>
     <paramdef>int <parameter>a_year</parameter></paramdef>
     <paramdef>int <parameter>a_month</parameter></paramdef>
     <paramdef>int <parameter>a_day</parameter></paramdef>
     <paramdef>int <parameter>b_year</parameter></paramdef>
     <paramdef>int <parameter>b_month</parameter></paramdef>
     <paramdef>int <parameter>b_day</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_date_compare</function> は、二つの日付を比較し、
     a&lt;b , a==b, a>b の場合に、それぞれ、&lt;0, 0, >0  を返します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-next-recurrence">
   <refnamediv>
    <refname>mcal_next_recurrence</refname>
    <refpurpose>イベントが次に発生する日を返す</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>mcal_next_recurrence</function></funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>weekstart</parameter></paramdef>
     <paramdef>array <parameter>next</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_next_recurrence</function> は、指定した日以降に
     次のイベントが発生する日を有するオブジェクトを返します。
     イベントが発生しないか、何か問題がある場合は空の date フィールドを
     返します。weekstart により週の初めとなる曜日を指定することができます。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-recur-none">
   <refnamediv>
    <refname>mcal_event_set_recur_none</refname>
    <refpurpose>
    グローバルイベント構造体ストリームの反復を設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_event_set_recur_none</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_recur_none</function>は、
     グローバルイベント構造体ストリームの反復が行われないことを
     指定します。(event->recur_typeはMCAL_RECUR_NONEに設定されます。)</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-recur-daily">
   <refnamediv>
    <refname>mcal_event_set_recur_daily</refname>
    <refpurpose>
     グローバルイベント構造体ストリームの反復を設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_event_set_recur_daily</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>interval</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_recur_daily</function> は、
     グローバルイベント構造体ストリームが次に発生する日を
     指定した値に設定します。イベントが、
     指定した日まで毎日発生するものとして設定します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-recur-weekly">
   <refnamediv>
    <refname>mcal_event_set_recur_weekly</refname>
    <refpurpose>
     グローバルイベント構造体ストリームの繰り返しを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_event_set_recur_weekly</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>interval</parameter></paramdef>
     <paramdef>int <parameter>weekdays</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_recur_weekly</function> は、
     グローバルイベント構造体ストリームが次に発生する日を
     指定した値に設定します。イベントが、
     指定した日まで毎週指定曜日に発生するものとして設定します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-recur-monthly-mday">
   <refnamediv>
    <refname>mcal_event_set_recur_monthly_mday</refname>
    <refpurpose>
     グローバルイベント構造体ストリームの繰り返しを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_event_set_recur_monthly_mday</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>interval</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_recur_monthly_mday</function> は、
     グローバルイベント構造体ストリームが次に発生する日を
     指定した値に設定します。イベントが、
     指定した日まで毎月指定日に発生するものとして設定します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-recur-monthly-wday">
   <refnamediv>
    <refname>mcal_event_set_recur_monthly_wday</refname>
    <refpurpose>
     グローバルイベント構造体ストリームの繰り返しを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_event_set_recur_monthly_wday</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>interval</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_recur_monthly_wday</function> は、
     グローバルイベント構造体ストリームが次に発生する日を
     指定した値に設定します。イベントが、
     指定した日まで毎月指定曜日に発生するものとして設定します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-event-set-recur-yearly">
   <refnamediv>
    <refname>mcal_event_set_recur_yearly</refname>
    <refpurpose>
     グローバルイベント構造体ストリームの繰り返しを設定する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_event_set_recur_yearly</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
     <paramdef>int <parameter>year</parameter></paramdef>
     <paramdef>int <parameter>month</parameter></paramdef>
     <paramdef>int <parameter>day</parameter></paramdef>
     <paramdef>int <parameter>interval</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_set_recur_yearly</function> は、
     グローバルイベント構造体ストリームが次に発生する日を
     指定した値に設定します。イベントが、
     指定した日まで毎年指定日に発生するものとして設定します。</para>
   </refsect1>
  </refentry>

  <refentry id="function.mcal-fetch-current-stream-event">
   <refnamediv>
    <refname>mcal_fetch_current_stream_event</refname>
    <refpurpose>
    現在のイベント構造体ストリームを有するオブジェクトを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int 
      <function>mcal_fetch_current_stream_event</function>
     </funcdef>
     <paramdef>int <parameter>stream</parameter></paramdef>
    </funcsynopsis>
    <para>  
     <function>mcal_event_fetch_current_stream_event</function>
    は、次の要素を有する現在のイベント構造体ストリームを有する
    オブジェクトを返します。

     <itemizedlist>
      <listitem><simpara>
	int id - イベントだID</simpara></listitem>
      <listitem><simpara>
	int public - イベントが public の場合に TRUE、private の場合に FALSE。</simpara></listitem>
      <listitem><simpara>
	string category - イベントの Category 文字列。</simpara></listitem>
      <listitem><simpara>
	string title - イベントの Title 文字列。</simpara></listitem>
      <listitem><simpara>
	string description - イベントの Description 文字列。</simpara></listitem>
      <listitem><simpara>
	int alarm - アラーム・リマインダを送るイベントまでの分単位の時間。</simpara></listitem>
      <listitem><simpara>
	object start - 開始 datetime エントリを有するオブジェクト。</simpara></listitem>
      <listitem><simpara>
	object end - 終了 datetime エントリを有するオブジェクト。</simpara></listitem>
      <listitem><simpara>
	int recur_type   - 繰り返し型</simpara></listitem>
      <listitem><simpara>
	int recur_interval   - 繰り返し間隔</simpara></listitem>
      <listitem><simpara>
	datetime recur_enddate   - 繰り返し終了日</simpara></listitem>
      <listitem><simpara>
	int recur_data   - 繰り返しデータ</simpara></listitem>
     </itemizedlist>

     全ての datetime エントリは、次の要素を有するオブジェクトから
     構成されます。

     <itemizedlist>
      <listitem><simpara>
	int year - 年</simpara></listitem>
      <listitem><simpara>
	int month - 月</simpara></listitem>
      <listitem><simpara>
	int mday  - 日</simpara></listitem>
      <listitem><simpara>
	int hour  - 時</simpara></listitem>
      <listitem><simpara>
	int min   - 分</simpara></listitem>
      <listitem><simpara>
	int sec   - 秒</simpara></listitem>         
      <listitem><simpara>
	int alarm   - イベントを送信するまでの分単位の時間</simpara></listitem>
     </itemizedlist></para>
   </refsect1>
  </refentry>

</reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
