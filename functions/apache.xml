<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.10 $ -->
 <reference id="ref.apache">
  <title>Apache用関数</title>
  <titleabbrev>Apache</titleabbrev>

  <refentry id="function.apache-lookup-uri">
   <refnamediv>
    <refname>apache_lookup_uri</refname>
    <refpurpose>
     リクエストの一部を指定したURIに対して行い、全ての情報を返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>object</type><methodname>apache_lookup_uri</methodname>
      <methodparam><type>string</type><parameter>filename</parameter></methodparam>
     </methodsynopsis>
    <para>
     この関数は、URIにリクエストの一部を行います。このリクエストは指定した
     リソースに関する全ての重要な情報を得るのに十分なものです。
     この情報はクラスとして返されます。返されるクラスのプロパティは
     次のようなものです。
     <simplelist>
      <member>status</member>
      <member>the_request</member>
      <member>status_line</member>
      <member>method</member>
      <member>content_type</member>
      <member>handler</member>
      <member>uri</member>
      <member>filename</member>
      <member>path_info</member>
      <member>args</member>
      <member>boundary</member>
      <member>no_cache</member>
      <member>no_local_copy</member>
      <member>allowed</member>
      <member>send_bodyct</member>
      <member>bytes_sent</member>
      <member>byterange</member>
      <member>clength</member>
      <member>unparsed_uri</member>
      <member>mtime</member>
      <member>request_time</member>
     </simplelist>
    </para>
    <note>
     <simpara>
      <function>apache_lookup_uri</function>は、PHPがApacheモジュールとして
      インストールされている場合のみ動作します。
     </simpara>
    </note>
   </refsect1>
  </refentry>

  <refentry id="function.apache-note">
   <refnamediv>
    <refname>apache_note</refname>
    <refpurpose>Apacheリクエスト記号(note)を取得/設定する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>apache_note</methodname>
      <methodparam><type>string</type><parameter>note_name</parameter></methodparam>
      <methodparam><type>string</type><parameter>
        <replaceable><optional>note_value</optional></replaceable>
       </parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>apache_note</function>はApache専用の関数であり、
     リクエストの<literal>notes</literal>テーブルから値を得たり、
     値を設定します。引数が1つだけ指定されてコールされた場合、
     現在の記号の値<literal>note_name</literal>が返されます。
     引数が2つ指定されてコールされた場合、記号<literal>note_name</literal>
     の値を<literal>note_value</literal>にセットし、前の記号
     <literal>note_name</literal>の値を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ascii2ebcdic">
   <refnamediv>
    <refname>ascii2ebcdic</refname>
    <refpurpose>ASCIIからEBCDICに文字列を変換する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>ascii2ebcdic</methodname>
      <methodparam><type>string</type><parameter>ascii_str</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>ascii2ebcdic</function> は、EBCDICに基づくオペレーティング
     システム (OS/390, BS2000)でのみ使用可能なApache専用の関数です。
     この関数は、ASCIIエンコードされた文字列
     <parameter>ascii_str</parameter>を等価なEBCDIC表現(バイナリ対応)に
     変換し、結果を返します。
    </para>
    <para>
     逆の動作をする関数<function>ebcdic2ascii</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ebcdic2ascii">
   <refnamediv>
    <refname>ebcdic2ascii</refname>
    <refpurpose>EBCDICからASCIIに文字列を変換する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>ebcdic2ascii</methodname>
      <methodparam><type>string</type><parameter>ebcdic_str</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>ebcdic2ascii</function> は、EBCDICに基づくオペレーティング
     システム (OS/390, BS2000)でのみ使用可能なApache専用の関数です。
     この関数は、EBCDICンコードされた文字列
     <parameter>ebcdic_str</parameter>を等価なASCII表現(バイナリ対応)に
     変換し、結果を返します。
    </para>
    <para>
     逆の動作をする関数<function>ascii2ebcdic</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.getallheaders">
   <refnamediv>
    <refname>getallheaders</refname>
    <refpurpose>全てのHTTPリクエストヘッダを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>array</type><methodname>getallheaders</methodname>
      <void/>
     </methodsynopsis>
    <para>
     この関数は、現在のリクエストにおける全てのHTTPヘッダーを
     有する連想配列を返します。
     <note>
      <para>
       環境変数から読みこむことにより、CGI変数の値を得ることも可能です。
       この方法は、PHPをApacheモジュールとして使用しているかどうかに
       よらず動作します。定義された全ての環境変数の一覧を得るには、
       <function>phpinfo</function>を使用してください。
      </para>
     </note>
     <example>
      <title><function>getallheaders</function>の例</title>
      <programlisting role="php">
<![CDATA[
$headers = getallheaders();
while (list ($header, $value) = each ($headers)) {
    echo "$header: $value<br />\n";
}
]]>
      </programlisting>
     </example>
     この例は、現在のリクエストに関して全てのリクエストヘッダを
     表示します。
     <note>
      <simpara>
       <function>getallheaders</function>は、現在、PHPが
       <productname>Apache</productname>モジュールとして実行されている
       場合にのみサポートされています。
      </simpara>
     </note>
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.virtual">
   <refnamediv>
    <refname>virtual</refname>
    <refpurpose>Apacheサブリクエストを実行する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>virtual</methodname>
      <methodparam><type>string</type><parameter>filename</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>virtual</function>は、mod_include の
     &lt;!--#include virtual...--&gt; と等価なApache用関数です。
     この関数は、Apacheサブリクエストを実行します。
     CGIスクリプトまたは .shtml ファイル、Apacheを通して解釈を行う
     他のものがある場合にこの関数は有用です。
     CGIスクリプトの場合、そのスクリプトは、有効なCGIヘッダを生成する
     必要があることに注意して下さい。
     最低でも、Content-type ヘッダーを生成する必要があります。
     PHPファイルに関しては、
     <function>include</function>または
     <function>require</function>を使用する必要があります。
     <function>virtual</function>は、PHPファイル自体を読みこむ
     際には使用できません。
    </para>
   </refsect1>
  </refentry>

  <refentry id='function.apache-child-terminate'>
   <refnamediv>
    <refname>apache_child_terminate</refname>
    <refpurpose>このリクエストの後にApacheプロセスを終了する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>apache_child_terminate</methodname>
      <void/>
     </methodsynopsis>
    <para>
     <function>apache_child_terminate</function> は、カレントのPHPリク
     エストを実行しているApacheプロセスをリクエスト終了時点で終了しま
     す。この関数は、メモリ消費量が大きなスクリプトを実行した後プロセ
     スを使用するために使用することが可能です。これは、メモリは通常内
     部的にのみ解放され、オペレーティングシステムに戻されないためです。
    </para>
    <para>
     <function>exit</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id='function.apache-setenv'>
   <refnamediv>
    <refname>apache_setenv</refname>
    <refpurpose>Apacheサブプロセスの環境変数を設定する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>apache_setenv</methodname>
      <methodparam><type>string</type><parameter>variable</parameter></methodparam>
      <methodparam><type>string</type><parameter>value</parameter></methodparam>
      <methodparam choice="opt"><type>bool</type><parameter>walk_to_top</parameter></methodparam>
     </methodsynopsis>
    <para>
     &warn.undocumented.func;
    </para>
   </refsect1>
  </refentry>
  
 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

