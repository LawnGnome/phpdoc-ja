<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.10 $ -->
 <reference id="ref.icap">
  <title>ICAP 関数</title>
  <titleabbrev>ICAP</titleabbrev>
  <partintro>
   <simpara>
    これらの関数を動作させるためには、PHP を<option
    role="configure">--with-icap</option> を付けてコンパイルする必要が
    あります。この際、icap ライブラリがインストールされている必要があ
    りますが、もはやサポートされてもおらず、取得可能でもありません。
   </simpara>
    <note>
     <simpara>
      icapは、近い将来削除されます。このモジュールはもicapライブラリも
     もはやサポートされていません。カレンダ機能をPHPで使用したい場合は、
     替わりに<link linkend="ref.mcal">mcal</link>を使用して下さい。
     </simpara>
    </note>
  </partintro>

  <refentry id="function.icap-open">
   <refnamediv>
    <refname>icap_open</refname>
    <refpurpose>ICAP 接続をオープンする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>stream</type><methodname>icap_open</methodname>
      <methodparam><type>string</type><parameter>calendar</parameter></methodparam>
      <methodparam><type>string</type><parameter>username</parameter></methodparam>
      <methodparam><type>string</type><parameter>password</parameter></methodparam>
      <methodparam><type>string</type><parameter>options</parameter></methodparam>
     </methodsynopsis>
    <para>
     成功時に ICAP ストリーム、エラー時に &false; を返します。
    </para>
    <para>
     <function>icap_open</function> は、指定した
     <parameter>calendar</parameter> 保存ファイルへの ICAP 接続を
     オープンします。
     オプション <parameter>options</parameter> が指定された場合、
     <parameter>options</parameter> もメールボックスに渡されます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.icap-close">
   <refnamediv>
    <refname>icap_close</refname>
    <refpurpose>ICAP ストリームを閉じる</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>icap_close</methodname>
      <methodparam><type>int</type><parameter>icap_stream</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>flags</parameter></methodparam>
     </methodsynopsis>
    <para> 
     指定した ICAP ストリームを閉じます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.icap-fetch-event">
   <refnamediv>
    <refname>icap_fetch_event</refname>
    <refpurpose>カレンダーストリームからイベントを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
     <type>int</type><methodname>icap_fetch_event</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>int</type><parameter>event_id</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>options</parameter></methodparam>
     </methodsynopsis>
    <para>  
     <function>icap_fetch_event</function> は、
     <parameter>id</parameter> で指定されたカレンダーストリームから
     イベントを取得します。
    </para>
    <para>
     以下の要素からなるイベントオブジェクトを返します。
     <itemizedlist>
      <listitem>
       <simpara>
	int id - イベント ID
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int public - イベントがpublicな場合は&true;、privateな場合は&false;
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	string category - イベントのカテゴリを表す文字列
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	string title - イベントのタイトルを表す文字列
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	string description - イベントの内容を表す文字列
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int alarm - アラーム・リマインダイベントが送られるまでの分単位
	の時間
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	object start - datetime エントリを有するオブジェクト
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	object end - datetime エントリを有するオブジェクト
       </simpara>
      </listitem>
     </itemizedlist>
     全ての datetime エントリは、次の要素を有するオブジェクトから
     構成されます。
     <itemizedlist>
      <listitem>
       <simpara>
	int year - 年
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int month - 月
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int mday  - 日
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int hour  - 時間
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int min   - 分
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int sec   - 秒
       </simpara>
      </listitem>         
     </itemizedlist>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.icap-list-events">
   <refnamediv>
    <refname>icap_list_events</refname>
    <refpurpose>指定した二つの datetime 間のイベントのリストを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>array</type><methodname>icap_list_events</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>int</type><parameter>begin_date</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>end_date</parameter></methodparam>
     </methodsynopsis>
    <para>
     指定した二つのイベント間のイベントのIDの配列を返します。
    </para>
    <para> 
     <function>icap_list_events</function> 関数は、
     指定したカレンダーストリームにおいて
     開始時の datetime と終了時の datetime を引数とします。
     指定した datetime の間のイベントのIDの配列が返されます。
    </para>
    <para>
     datetime の全エントリは、次の要素を有するオブジェクトから
     構成されます。
     <itemizedlist>
      <listitem>
       <simpara>
	int year - 年
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int month - 月
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int mday  - 日
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int hour  - 時間
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int min   - 分
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int sec   - 秒
       </simpara>
      </listitem>      
     </itemizedlist>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.icap-store-event">
   <refnamediv>
    <refname>icap_store_event</refname>
    <refpurpose>ICAP カレンダーにイベントを保存します</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>icap_store_event</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>object</type><parameter>event</parameter></methodparam>
     </methodsynopsis>
    <para> 
     <function>icap_store_event</function> は、ICAP カレンダーに
     イベントを保存します。
     event オブジェクトは、以下の要素からなります。
     <itemizedlist>
      <listitem>
       <simpara>
	int public - public の場合は 1、private の場合は 0
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	string caegory - イベントのカテゴリを表す文字列
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	string title - イベントのタイトルを表す文字列
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	string description - イベントの内容を表す文字列
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	int alarm - アラームが送信されるまでの分単位の時間
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	datetime start - イベントの開始時を表す datetime オブジェクト
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	datetime end - イベントの終了時を表す datetime オブジェクト
       </simpara>
      </listitem>      
     </itemizedlist>
    </para>
    <para>
     datetime の全エントリは、次の要素を有するオブジェクトから
     構成されます。
     <itemizedlist>
      <listitem>
       <simpara>
	int year - 年
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	int month - 月
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	int mday  - 日
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	int hour  - 時間
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	int min   - 分
       </simpara>
      </listitem>      
      <listitem>
       <simpara>
	int sec   - 秒
       </simpara>
      </listitem>               
     </itemizedlist>
    </para>
    <para>
     成功時に&true;、エラー時に&false;を返します。
    </para>
   </refsect1>
  </refentry>
  
  <refentry id="function.icap-delete-event">
   <refnamediv>
    <refname>icap_delete_event</refname>
    <refpurpose>ICAP カレンダーからイベントを削除する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>icap_delete_event</methodname>
      <methodparam><type>int</type><parameter>sream_id</parameter></methodparam>
      <methodparam><type>int</type><parameter>uid</parameter></methodparam>
     </methodsynopsis>
    <para> 
     <function>icap_delete_event</function> は uid で指定されたカレンダー
     イベントを削除します。
    </para>
    <para>
     &true; を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.icap-snooze">
   <refnamediv>
    <refname>icap_snooze</refname>
    <refpurpose>イベントのアラームをオフにする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>icap_snooze</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>int</type><parameter>uid</parameter></methodparam>
     </methodsynopsis>
    <para>  
     <function>icap_snooze</function> は uid で指定したカレンダーイベントの
     アラームをオフにします。
    </para>
    <para>
     &true; を返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.icap-list-alarms">
   <refnamediv>
    <refname>icap_list_alarms</refname>
    <refpurpose>
     指定した datetime までにアラームを発生するイベントのリストを返す
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>icap_list_alarms</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>array</type><parameter>date</parameter></methodparam>
      <methodparam><type>array</type><parameter>time</parameter></methodparam>
     </methodsynopsis>
    <para>
     datetime で指定した時刻までにアラームがオフとなるイベントのIDの配列を
     返します。
    </para>
    <para> 
     <function>icap_list_alarms</function> 関数は、
     指定したカレンダーストリームに関する datetime を引数とします。
     その datetime までにアラームがオフとなるイベントのIDの配列が返さ
     れます。
    </para>
    <para>
     datetime の全エントリは、以下を要素とするオブジェクトからなります。
     <itemizedlist>
      <listitem>
       <simpara>
	int year - 年
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int month - 月
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int mday - 日
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int hour - 時間
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int min - 分
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	int sec - 秒
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
   </refsect1>
  </refentry>

  <refentry id='function.icap-create-calendar'>
   <refnamediv>
    <refname>icap_create_calendar</refname>
    <refpurpose>
     新規カレンダを作成する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>icap_create_calendar</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>string</type><parameter>calendar</parameter></methodparam>
     </methodsynopsis>
    <para>
     &warn.undocumented.func;
    </para>
   </refsect1>
  </refentry>
  
  <refentry id='function.icap-rename-calendar'>
   <refnamediv>
    <refname>icap_rename_calendar</refname>
    <refpurpose>
     カレンダの名前を変える
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>icap_rename_calendar</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>string</type><parameter>old_name</parameter></methodparam>
      <methodparam><type>string</type><parameter>new_name</parameter></methodparam>
     </methodsynopsis>
    <para>
     &warn.undocumented.func;
    </para>
   </refsect1>
  </refentry>

  <refentry id='function.icap-delete-calendar'>
   <refnamediv>
    <refname>icap_delete_calendar</refname>
    <refpurpose>
     カレンダを削除する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>string</type><methodname>icap_delete_calendar</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>string</type><parameter>calendar</parameter></methodparam>
     </methodsynopsis>
    <para>
     &warn.undocumented.func;
    </para>
   </refsect1>
  </refentry>

  <refentry id='function.icap-reopen'>
   <refnamediv>
    <refname>icap_reopen</refname>
    <refpurpose>
     新規カレンダへのICAPストリームを再オープンする
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
     <methodsynopsis>
      <type>int</type><methodname>icap_reopen</methodname>
      <methodparam><type>int</type><parameter>stream_id</parameter></methodparam>
      <methodparam><type>string</type><parameter>calendar</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>options</parameter></methodparam>
     </methodsynopsis>
    <para>
     &warn.undocumented.func;
    </para>
   </refsect1>
  </refentry>

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

