 <chapter id="features.remote-files">
  <title>リモートファイルの使用</title>

  <para>
   PHPを設定する際に "URL fopen wrapper" に関するサポートを有効にした場合
   (つまり、<option>--disable-url-fopen-wrapper</option> フラグを configure に
   明示的に渡した場合を除いて)、
   <function>require</function> および <function>include</function> 文を
   含むファイル名をパラメータとして受ける多くの関数
   においてHTTPおよびFTP URLを使用することができます。

  <note>
   <para>
   Windows上では、リモートファイルに <function>include</function> および
    <function>require</function> 文を使用することはできません。</para>
  </note></para>

  <para>
  例えば、リモートWebサーバーにファイルをオープンし、
  データを出力、データベースクエリーに使用するか、単にWebサイトのスタイルに合わせて
  出力を行うことが可能です。</para>

  <para>
   <example>
    <title>リモートページのタイトルを得ます</title>
    <programlisting>
&lt;?php
  $file = fopen("http://www.php.net/", "r");
  if (!$file) {
    echo "&lt;p>Unable to open remote file.\n";
    exit;
  }
  while (!feof($file)) {
    $line = fgets($file, 1024);
    /* This only works if the title and its tags are on one line. */
    if (eregi("&lt;title>(.*)&lt;/title>", $line, $out)) {
      $title = $out[1];
      break;
    }
  }
  fclose($file);
?&gt;
    </programlisting>
   </example></para>

  <para>
  適当なアクセス権を持ったユーザーで接続を行い、書きこもうとするファイルがまだ
  存在しない場合、FTPでファイルを書きこむことも可能です。
  'anonymous'以外のユーザーで接続を行う場合、URLの中で
   'ftp://user:password@ftp.example.com/path/to/file' のように
  ユーザー名(そして多分パスワードも)指定する必要があります。
  (Basic認証を要求された際にHTTP経由でファイルをアクセスする場合と
  同じ種類の構文を使用することができます。)</para>

  <para>
   <example>
    <title>リモートサーバーにデータを保存する</title>
    <programlisting>
&lt;?php
  $file = fopen("ftp://ftp.php.net/incoming/outputfile", "w");
  if (!$file) {
    echo "&lt;p>Unable to open remote file for writing.\n";
    exit;
  }
  /* Write the data here. */
  fputs($file, "$HTTP_USER_AGENT\n");
  fclose($file);
?&gt;
    </programlisting>
   </example>

  <note>
   <para>
   上の例からリモートログに書きこむためにこの手法を使用することを考えるかも
   しれません。
   しかし、上に述べたように、URL fopen() ラッパーを使って書きこめるのは
   新規のファイルのみです。
   ログのようなことを行うには、
   <function>syslog</function> の使用を考えてみて下さい。</para>
  </note></para>

 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
