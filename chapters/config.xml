<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.33 $ -->
<!-- EN-Revision: 1.118 Maintainer: hirokawa Status: ready -->
 <chapter id="configuration">
  <title>設定</title>
  
  <sect1 id="configuration.file">
   <title>設定ファイル</title>
   
   <simpara>
    設定ファイル (PHP 3.0 では <filename>php3.ini</filename>、
    PHP 4.0 では &php.ini;) は、PHP の起動時に読み込まれます。
    PHP のサーバーモジュール版では、このファイルは、Web サーバーの起動
    時に一度だけ読み込まれます。<acronym>CGI</acronym>と
    <acronym>CLI</acronym>版では、起動する度にこのファイルが読み込まれます。
   </simpara>
   <para>
    &php.ini; のデフォルトの場所は、コンパイル時のオプションです。
    (<link linkend="faq.installation.phpini">FAQ</link>エントリを参照下さい。)
    しかし、<acronym>CGI</acronym> および
    <acronym>CLI</acronym> 版の場合、コマンドラインスイッチ
    <literal>-c</literal>によりこれを変更することができます。
    <link linkend="features.commandline">コマンドライン</link>からの
    <literal>PHP</literal> の使用に関する章を参照下さい。
    &php.ini;を探すパスを追加するために環境変数
    <literal>PHPRC</literal> を使用することもできます。
   </para>
   <note>
    <para>
     Apache web サーバー は、スタート時に作業ディレクトリをルートディレクトリ
     に変更するので、PHPは、ルートディレクトリに
     <filename>php.ini</filename> が存在する場合、それを読もうとします。
    </para>
   </note>
   <para>
    下記では、必ずしもすべての PHP ディレクティブが説明されているわけでは
    ありません。すべてのディレクティブについての説明は、&php.ini; ファイル
    のコメントを参照してください。CVS にある最新の &php.ini; は、
    <ulink url="&url.php.cvs.phpini;">ここ</ulink> で見ることができます。
   </para>
   <note>
    <para>
     PHPディレクティブ
     <link linkend="ini.register-globals">register_globals</link>
     のデフォルト値は、PHP <ulink url="&url.php.release4.2.0;">4.2.0</ulink>
     以降では <emphasis>on</emphasis> から <emphasis>off</emphasis>
     に変更されました。
    </para>
   </note>
   <para>
    <example>
     <title>&php.ini; の例</title>
     <programlisting role="ini">
<![CDATA[
; 引用符をつけないセミコロン(;)の後のテキストは全て無視されます。
[php] ; セクションマーカ (角括弧の中のテキスト) は無視されます
; 論理値は次のどれかとなります:
;    true, on, yes
; または false, off, no, none
register_globals = off
magic_quotes_gpc = yes

; 文字列を二重引用符で括ることも可能です
include_path = ".:/usr/local/lib/php"

; バックスラッシュは他の文字と同様に処理されます
include_path = ".;c:\php\lib"
]]>
     </programlisting>
     <!-- TODO: add more details about values and expressions -->
    </example>
   </para>
  </sect1>

  <sect1 id="configuration.changes">
   <title>設定を変更するには</title>
   
   <sect2 id="configuration.changes.apache">
    <title>Apacheモジュールとして<literal>PHP</literal>を実行する</title>
    <simpara>
     PHP を Apache モジュールとして使用する場合、Apache用設定ファイルや
     .htaccess ファイルに命令を記述することによりPHPの設定を行うことが
     可能です("AllowOverride Options" もしくは "AllowOverride All"権限
     が必要)。
    </simpara>
   
    <para>
     PHP 4.0 においては、PHP設定用の複数のApacheディレクティブがあり、
     Apacheの設定ファイルでPHPの設定を変更可能です。どのディレクティブが、
     <constant>PHP_INI_ALL</constant> か, <constant>PHP_INI_PERDIR</constant>,
     または <constant>PHP_INI_SYSTEM</constant> なのかについてのリストは、
     <function>ini_set</function> の説明を参照下さい。
    </para>

    <note>
     <simpara>
      PHP 3.0 においては、<filename>php3.ini</filename>の各ディレクティ
      ブに対応した Apache 用ディレクティブが存在し、PHP 用のディレクティ
      ブの前に "php3_" を付けて使用することにより、設定の変更が可能です。
     </simpara>
    </note>  

    <para>
     <variablelist>
      <varlistentry>
       <term>
        <systemitem role="directive">php_value</systemitem>
        <parameter>name</parameter>
        <parameter>value</parameter>
       </term>
       <listitem>
        <para>
         指定した変数の値を設定します。<constant>PHP_INI_ALL</constant> と
         <constant>PHP_INI_PERDIR</constant> ディレクティブでのみ利用可能です。
         以前にセットされた値をクリアしたい場合は、<literal>none</literal> を
         値として使用してください。
        </para>
        <note>
         <simpara>
          ブーリアン値を設定するにあたり、<literal>php_value</literal> を
          使わないようにしてください。代わりに、<literal>php_flag</literal>
          (下記を参照) を使ってください。
         </simpara>
        </note>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
        <systemitem role="directive">php_flag</systemitem>
        <parameter>name</parameter>
        <parameter>on|off</parameter>
       </term>
       <listitem>
        <para>
         論理値のオプション設定を変更するために使用します。
         <constant>PHP_INI_PERDIR</constant> ディレクティブでのみ利用可能です。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
        <systemitem role="directive">php_admin_value</systemitem>
       <parameter>name</parameter>
        <parameter>value</parameter>
       </term>
       <listitem>
        <para>
         指定した変数の値を設定します。このディレクティブは、&htaccess;
         ファイルでは利用できません。
         <systemitem role="directive">php_admin_value</systemitem>
         で設定されたディレクティブの値は、&htaccess; や
         バーチャルホストディレクティブ内から上書きできません。
         以前にセットされた値をクリアしたい場合は、<literal>none</literal> を
         値として使用してください。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
        <systemitem role="directive">php_admin_flag</systemitem>
        <parameter>name</parameter>
        <parameter>on|off</parameter>
       </term>
       <listitem>
        <para>
         論理値のオプションを設定するために使用されます。
         このディレクティブは、&htaccess; ファイルでは利用できません。
         php_admin_value で設定されたディレクティブの値は、&htaccess; や
         バーチャルホストディレクティブ内から上書きできません。
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </para>
    <para>
     <example>
      <title>Apache 設定の例</title>
      <programlisting role="ini">
<![CDATA[
<IfModule mod_php4.c>
  php_value include_path ".:/usr/local/lib/php"
  php_flag safe_mode on
</IfModule>
<IfModule mod_php3.c>
  php3_include_path ".:/usr/local/lib/php"
  php3_safe_mode on
</IfModule>
]]>
      </programlisting>
     </example>
    </para>
    <caution>
     <para>
      PHP定数はPHP以外では使用できません。例えば、
      <filename>httpd.conf</filename>の中で
      <link linkend="ini.error-reporting">error_reporting</link>
      ディレクティブを設定するために <constant>E_ALL</constant>
      または <constant>E_NOTICE</constant> のようなPHP定数を使用することは
      できません。これらは意味を有さないため、
      <emphasis>0</emphasis> と評価されてしまいます。
      代わりに対応するビットマスクを使用して下さい。これらの定数は、
      &php.ini; で使用することができます。
     </para>
    </caution>
   </sect2>

   <sect2 id="configuration.changes.windows">
    <title>Changing <literal>PHP</literal> configuration via the Windows registry</title>
     <simpara>
      When running PHP on Windows, the configuration values can be
      modified on per-directory basis using the Windows registry. The
      configuration values are stored in the registry key 
      <literal>HKLM\SOFTWARE\PHP\Per Directory Values</literal>, 
      in the sub-keys corresponding to the path names. For example, configuration 
      values for the directory <literal>c:\inetpub\wwwroot</literal> would
      be stored in the key <literal>HKLM\SOFTWARE\PHP\Per Directory
      Values\c\inetpub\wwwroot</literal>. The settings for the
      directory would be active for any script running from this
      directory or any subdirectory of it. The values under the key
      should have the name of <link linkend="configuration">PHP
      configuration directive</link> and the string value. PHP
      constants in the values would not be parsed. 
     </simpara>
   </sect2>

   <sect2 id="configuration.changes.other">
    <title><literal>PHP</literal>への別のインターフェイス</title>
    <para>
     <literal>PHP</literal> へのインターフェイスによらず、
     <function>ini_set</function>によりスクリプトの実行時ある種の値を
     変更することができます。以下の表にどのレベルのディレクティブを設
     定/変更できるかの概要を示します。
    </para>
    <para>
     <table>
      <title>PHP_INI_* 定数の定義</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>定数</entry>
         <entry>値</entry>
         <entry>意味</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>PHP_INI_USER</entry>
         <entry>1</entry>
         <entry>ユーザスクリプトで設定できるエントリ</entry>
        </row>
        <row>
         <entry>PHP_INI_PERDIR</entry>
         <entry>2</entry>
         <entry>
          &php.ini;, &htaccess; および &httpd.conf; で設定できるエントリ
         </entry>
        </row>
        <row>
         <entry>PHP_INI_SYSTEM</entry>
         <entry>4</entry>
         <entry>
          &php.ini; または &httpd.conf; で設定できるエントリ
         </entry>
        </row>
        <row>
         <entry>PHP_INI_ALL</entry>
         <entry>7</entry>
         <entry>どこでも設定できるエントリ</entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>
    <para>
     <function>phpinfo</function>の出力で設定値を参照することができま
     す。また、<function>ini_get</function> または
     <function>get_cfg_var</function>により個々の設定値にアクセスする
     ことも可能です。
    </para>
   </sect2>
  </sect1>

 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
