<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.3 $ -->
<sect1 id="install.macosx">
 <title>Mac OS X へのインストール</title>
 <para>
  本節は、PHPをMac OS Xをインストールする際の注意事項とコツを説明し
  ます。
 </para>
 <sect2 id="install.macosx.packages">
  <title>パッケージの使用法</title>
  <simpara>
   数は少ないですが、Mac OS X 用にパッケージ化され、コンパイルされた
   PHPが存在します。これにより標準的な設定を構築することが非常に楽に
   なりますが、(セキュアサーバまたは別のデータベースドライバのような)
   異なる機能が必要な場合には、PHPやWebサーバを構築する必要を生じる
   可能性があります。ソフトウエアの構築およびコンパイルに不慣れな場
   合、必要とする機能を有するパッケージ版のPHPが既に構築されていない
   かどうかを調べることを推奨します。
  </simpara>
 </sect2>
 
 <sect2 id="install.macosx.compile">
  <title>OS X サーバでのコンパイル</title>
  <simpara>
   Mac OS Xには僅かに異なる二つのバージョン、つまり、クライアントと
   サーバがあります。以下の説明は、OS Xサーバに関するものです。
  </simpara>
  <example id="install.macosx.compile.example">
   <title>Mac OS X サーバへのインストール</title>
   <screen>
<![CDATA[
1. ApacheとPHPの最新版を入手
2. これらのtarを展開し、Apacheのconfigureプログラムを以下のように実行
    ./configure --exec-prefix=/usr \ 
    --localstatedir=/var \ 
    --mandir=/usr/share/man \ 
    --libexecdir=/System/Library/Apache/Modules \ 
    --iconsdir=/System/Library/Apache/Icons \ 
    --includedir=/System/Library/Frameworks/Apache.framework/Versions/1.3/Headers \ 
    --enable-shared=max \ 
    --enable-module=most \ 
    --target=apache 

4. コンパイラに最適化を行わせたい場合には、次の行を追加できます。
    setenv OPTIM=-O2 
    
5. 次に、PHP4ソースディレクトリに行き、configure を行います。
    ./configure --prefix=/usr \ 
    --sysconfdir=/etc \ 
    --localstatedir=/var \ 
    --mandir=/usr/share/man \ 
    --with-xml \ 
    --with-apache=/src/apache_1.3.12 

    他に追加するもの(MySQL、GD等)がある場合、必ずここでこれらを追加す
    るようにして下さい。--with-apache文字列に関しては、Apacheソースの
    ディレクトリを"/src/apache_1.3.12"のように指定して下さい。
6. make
7. make install    
    これにより、Apacheソースディレクトリにsrc/modules/php4の下の
    ディレクトリが追加されます    
    
8. ここで、Apacheを再設定し、 PHP4を再構築します
    ./configure --exec-prefix=/usr \ 
    --localstatedir=/var \ 
    --mandir=/usr/share/man \ 
    --libexecdir=/System/Library/Apache/Modules \ 
    --iconsdir=/System/Library/Apache/Icons \ 
    --includedir=/System/Library/Frameworks/Apache.framework/Versions/1.3/Headers \ 
    --enable-shared=max \ 
    --enable-module=most \ 
    --target=apache \ 
    --activate-module=src/modules/php4/libphp4.a 

    libmodphp4.a が期限切れというメッセージが出力されるかもしれません。
    この場合、Apacheソースディレクトリの
      src/modules/php4ディレクトリに行き、以下のコマンドを実行します。

    ranlib libmodphp4.a 

    次にApacheソースディレクトリのルートに戻り、上記のconfigureコマ
    ンドを再び実行します。これによりリンクテーブルが最新になります。


9. make
10. make install

11. php.ini-dist ファイルをPHP4ソースディレクトリから "bin" ディレクト
    リにコピーし、リネームします。
    cp php.ini-dist /usr/local/bin/php.ini 

    または (localディレクトリがない場合) 

    cp php.ini-dist /usr/bin/php.ini 
]]>
   </screen>
  </example>
  <simpara>
   <ulink url="&url.stepwise.macosx-client;">Mac OS X クライアント
   </ulink>および
   <ulink url="&url.stepwise.macosx-client;">Mac OS X サーバ</ulink>
   に関する他の例は、<ulink url="&url.stepwise;">Stepwise</ulink>で
   取得可能です。
  </simpara>
 </sect2>
 
 <sect2 id="install.macosx.client">
  <title>MacOS X用クライアントのコンパイル</title>
  <simpara>
   以下のヒントは、<ulink url="&url.macosx;">Marc Liyanage</ulink>
   氏に提供して頂いたものです。
  </simpara>
  <simpara>
   Apache Webサーバ用PHPモジュールがMac OS Xに含まれています。
   このバージョンには、 データベースMySQLとPostgreSQLのサポートが含ま
   れています。
  </simpara>
  <simpara>
   注意:以下の手順を行う際は、Apache Webサーバをダウンさせる可能性
   があるので注意して下さい!
  </simpara>
  <para>
   以下のインストール手順を実行します。
   <itemizedlist>
    <listitem>
     <simpara>
      1.	ターミナルウインドウをオープン
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      2.	"wget
      http://www.diax.ch/users/liyanage/software/macosx/libphp4.so.gz"
      を入力し、ダウンロード完了を待つ。
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      3.	"gunzip libphp4.so.gz" を入力
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      4.	"sudo apxs -i -a -n php4 libphp4.so" を入力
     </simpara>
    </listitem>
   </itemizedlist>
   次に "<literal>sudo open -a TextEdit
    /etc/httpd/httpd.conf</literal>"を入力すると、TextEditがWebサーバ
   の設定ファイルをオープンします。ファイルの末尾の方にある以下の２
   行を探して下さい。(検索コマンドを使用して下さい)
   <programlisting role="apache">
<![CDATA[
      #AddType application/x-httpd-php .php 
      #AddType application/x-httpd-php-source .phps
]]>
   </programlisting>
   ハッシュ記号(<literal>#</literal>)を削除し、ファイルを保存、
   TextEditを終了して下さい。
  </para>
  <para>
   最後に、Webサーバを再起動するために"<literal>sudo apachectl
    graceful</literal>"と入力して下さい。 
  </para>
  <para>
   この時点でPHPが動作しているはずです。"test.php"という名前のファイ
   ルを"Sites"フォルダに作成して下さい。このファイルには、次の行を
   書いて下さい。: "<literal>&lt;?php phpinfo() ?&gt;</literal>"
  </para>
  <para>
   次に<literal>127.0.0.1/~your_username/test.php</literal>をWebブラ
   ウザからオープンして下さい。PHPモジュールに関する情報を含むステー
   タステーブルが表示されるはずです。
  </para>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->