<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.3 $ -->
<!-- sync: 1.2 -->
  <sect1 id="install.netscape-enterprise">
   <title>Netscape および iPlanet Enterprise サーバ</title>
   <para>
    このセクションでは
    <link linkend="install.netscape.sun">Sun Solaris</link>と
    <link linkend="install.netscape.windows">Windows</link>の両方について、
    PHPをNESまたはiPlanet Webサーバ用に構築する方法についてヒントを述べます。
   </para>
   <para>
    <ulink url="&url.netscape.nsapi;">&url.netscape.nsapi;</ulink>
    にNetscape Enterprise Server(NES)上にPHPをセットアップするための
    より詳細な情報があります。
   </para>
   <sect2 id="install.netscape.sun">
    <title>Sun Solaris上でNetscape用のPHPをインストールする</title>
    <para>
     PHPをNESまたはiPlanet Webサーバ用に構築するには、適当なインストー
     ルディレクトリを付けて<link
     linkend="install.configure.with-nsapi">--with-nsapi</link> =
     <replaceable>DIR</replaceable> オプションを使用して下さい。
     デフォルトのディレクトリは、通常 <filename
     class="directory">/opt/netscape/suitespot/</filename>です。
     <filename>/php-xxx-version/sapi/nsapi/nsapi-readme.txt</filename>
     も参照下さい。
    </para>
    <note>
     <simpara>
      この手順はSun Solaris 2.6とNetscape Enterprise Server 3.6について
      書かれています。bhager at invacare dot com による寄稿です。
     </simpara>
    </note>
    <para>
     <orderedlist>
      <listitem>
       <para>
        <ulink url="&url.sun.freeware;">&url.sun.freeware;</ulink>
        または他のダウンロードサイトから以下の
        パッケージをダウンロードしインストールします。
        <simplelist>
         <member><filename>autoconf-2.13</filename></member>
         <member><filename>automake-1.4</filename></member>
         <member><filename>bison-1_25-sol26-sparc-local</filename></member>
         <member><filename>flex-2_5_4a-sol26-sparc-local</filename></member>
         <member><filename>gcc-2_95_2-sol26-sparc-local</filename></member>
         <member><filename>gzip-1.2.4-sol26-sparc-local</filename></member>
         <member><filename>m4-1_4-sol26-sparc-local</filename></member>
         <member><filename>make-3_76_1-sol26-sparc-local</filename></member>
         <member>
          <filename>mysql-3.23.24-beta</filename> (if you want mysql support)
         </member>
         <member><filename>perl-5_005_03-sol26-sparc-local</filename></member>
         <member><filename>tar-1.13</filename> (GNU tar)</member>
        </simplelist>
       </para>
      </listitem>
      <listitem>
       <simpara>
        パスを適切にセットし、
        <literal>PATH=.:/usr/local/bin:/usr/sbin:/usr/bin:/usr/ccs/bin</literal>
        システム上でそれを有効にしてください。
        <userinput>export PATH</userinput>
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <userinput>gunzip php-x.x.x.tar.gz</userinput> 
        ( .gz 配布の場合には手順4へ)
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <userinput>tar xvf php-x.x.x.tar</userinput>
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        PHPを展開したディレクトリに移動します
        <userinput>cd ../php-x.x.x </userinput>
       </simpara>
      </listitem>
      <listitem>
       <para>
        以下の手順で行ってください。
        <filename class="directory">/opt/netscape/suitespot/</filename>は
        netscapeサーバーをインストールした場所です。
        必要ならパスを変更してください。
        <programlisting role="shell">
<![CDATA[
./configure --with-mysql=/usr/local/mysql \
--with-nsapi=/opt/netscape/suitespot/ \
--enable-libgcc
]]>
        </programlisting>
       </para>
      </listitem>
      <listitem>
       <simpara>
        <command>make</command>の後<command>make install</command>
        を実行してください。
       </simpara>
      </listitem>
     </orderedlist>
    </para>
    <para>
     baseインストールを実行し、適当なreadmeファイルを読んだ後、いくつか
     の追加インストール手順を実行する必要があるかもしれません。
    </para>
    <formalpara>
     <title>Netscape Enterprise用の設定手順</title>
     <para>
      まず、全ての共有ライブラリを見つけるためにNetscape用の環境変数
      LD_LIBRARY_PATH にいくつかのパスを追加する必要があります。これらの
      設定は、Netscapeサーバの開始スクリプトで行うのが最善でしょう。
      Windows ユーザは、おそらくこの手順をとばすことが可能です。
      開始スクリプトは、通常以下の場所にあります。
      <filename class="directory">/path/to/server/https-servername/start</filename> 
      <filename class="directory">/path/to/server/https-servername/config/</filename>
      にある設定ファイルを編集することも可能です。

      <orderedlist>
       <listitem>
        <para>
         <filename>mime.types</filename>に次の行を追加します
         <screen>
<![CDATA[
type=magnus-internal/x-httpd-php exts=php
]]>
         </screen>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>obj.conf</filename>に以下を追加して下さい。
         shlib はシステムにより異なります。使用するOSがUNIXの場合、
         <filename>/opt/netscape/suitespot/bin/libphp4.so</filename>のように
         なるでしょう。
         mime型initの後に次の行を置く必要があります。
         <programlisting>
<![CDATA[
Init fn="load-modules" funcs="php4_init,php4_close,php4_execute,php4_auth_trans" shlib="/php4/nsapiPHP4.dll"
Init fn=php4_init errorString="Failed to initialize PHP!"
]]>
         </programlisting>
        </para>
       </listitem>
       <listitem>
        <para>
         デフォルトのオブジェクトを設定します:
         <programlisting>
<![CDATA[
<object name="default">
.
.
.
.#NOTE この次の行は全ての'ObjectType'の後で、'AddLog'行の前とする必要があります
Service fn="php4_execute" type="magnus-internal/x-httpd-php" 
    . 
    . 
    </Object>
]]>
         </programlisting>
        </para>
       </listitem>
       <listitem>
        <para>
         PHPを使用するための新しいオブジェクトを作ります。
         <programlisting>
<![CDATA[
<Object name="x-httpd-php"> 
ObjectType fn="force-type" type="magnus-internal/x-httpd-php" 
Service fn=php4_execute 
</Object> 
]]>
         </programlisting>
        </para>
       </listitem>
       <listitem>
        <para>
         Setup of authentication: PHP authentication cannot be used with any
         other authentication. ALL AUTHENTICATION IS PASSED TO YOUR PHP SCRIPT.
         To configure PHP Authentication for the entire server, add the
         following line to your default object: 
         認証設定: PHP 認証は他の認証と併用することはできません。
         全ての認証は、PHPスクリプトに渡されます。
         サーバ全体についてPHP認証を設定するには、次の行を使用します。
         <programlisting>
<![CDATA[
<Object name="default">
AuthTrans fn=php4_auth_trans
.
.
.
</Object>
]]>
         </programlisting>
        </para>
       </listitem>
       <listitem>
        <para>
         PHP 認証を単一のディレクトリで行うには、次の行を追加します。
         <programlisting>
<![CDATA[
<Object ppath="d:\path\to\authenticated\dir\*"> 
AuthTrans fn=php4_auth_trans 
</Object>
]]>
         </programlisting>
        </para>
       </listitem>
      </orderedlist>
     </para>
    </formalpara>
    <para>
     Netscape Enterprise 4.x を実行する場合には、次のようにする必要があります:
     <literal>mime types init</literal>の後に次の行を追加し、
     他の同様の設定よりも上にしておきます。
     (Graeme Hoose, GraemeHoose at BrightStation dot com からの寄稿)
     <programlisting>
<![CDATA[
Init fn="load-modules" shlib="/path/to/server4/bin/libphp4.so" funcs="php4_init,php4_close,php4_execute,php4_auth_trans"
Init fn="php4_init" LateInit="yes"
]]>
     </programlisting>
    </para>
   </sect2>
   <sect2 id="install.netscape.windows">
    <title>NetscapeにPHPをインストールする</title>
    <para>
      PHPをCGIとしてインストールする場合には以下を行ってください。
      (Netscape Enterprise Server, iPlanet, perhaps Fastrack)
    </para>
    <itemizedlist>
     <listitem>
      <simpara>
       <filename>php4ts.dll</filename>をシステムルートにコピー
       (Windowsがインストールされているディレクトリ)
      </simpara>
     </listitem>
     <listitem>
      <para>
       コマンドラインからファイルの関連付けを行います。
       次の2行をタイプしてください:
       <programlisting role="shell">
<![CDATA[
assoc .php=PHPScript
ftype PHPScript=c:\php\php.exe %1 %*
]]>
       </programlisting>
      </para>
     </listitem>
     <listitem>
      <simpara>
       Netscape Enterprise Administration Server はダミーのshellcgiディレクトリ
       を作成し、その後すぐに削除します。
       (このステップでは5つの重要な行がobj.confに作成され、
       Webサーバがshellcgiスクリプトを扱えるようになります)
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       Netscape Enterprise Administration Serverにおいて
       新しいmime typeを作成します (Category: type, 
       Content-Type: magnus-internal/shellcgi, File Suffix:php)      
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       PHPを実行する全てのwebサーバーインスタンスで行ってください。
      </simpara>
     </listitem>
    </itemizedlist>
    <para>
     PHPをCGIとしてセットアップするためのより詳細な説明は
     <ulink url="&url.netscape.cgi;">&url.netscape.cgi;</ulink>
     をご覧ください。
    </para>
    <para>
     PHPをNSAPI(for Netscape Enterprise Server,
     iPlanet, perhaps Fastrack)としてインストールする場合は
     以下のようにしてください。
    </para>
    <itemizedlist>
     <listitem>
      <simpara>
       <filename>php4ts.dll</filename>をシステムルートにコピー
       (Windowsがインストールされているディレクトリ)
      </simpara>
     </listitem>
     <listitem>
      <para>
       コマンドラインからファイルの関連付けを行います。
       次の2行をタイプしてください:
       <programlisting role="shell">
<![CDATA[
assoc .php=PHPScript
ftype PHPScript=c:\php\php.exe %1 %*
]]>
       </programlisting>
      </para>
     </listitem>
     <listitem>
      <simpara>
       Netscape Enterprise Administration Serverにおいて
       新しいmime typeを作成します (Category: type, 
       Content-Type: magnus-internal/shellcgi, File Suffix:php)      
      </simpara>
     </listitem>
     <listitem>
      <para>
       webサービスを停止し<filename>obj.conf</filename>を編集します。
       Initセクションの最後に次の2行を追加してください。
       (mime type の初期化の後で必要!)
       <programlisting>
<![CDATA[
Init fn="load-modules" funcs="php4_init,php4_close,php4_execute,php4_auth_trans" shlib="c:/php/sapi/php4nsapi.dll"
Init fn="php4_init" errorString="Failed to initialise PHP!"
]]>
       </programlisting>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>&lt; Object name="default" &gt;</literal>セクションに
       次の行を追加してください。
       必然的に'ObjectType'の後、'AddLog'の前となります。
       <programlisting>
<![CDATA[
Service fn="php4_execute" type="magnus-internal/x-httpd-php"
]]>
       </programlisting>
      </para>
     </listitem>
     <listitem>
      <para>
       ファイルの最後に次の行を追加することで新しいオブジェクト
       <literal>x-httpd-php</literal>を作成します。
       <programlisting>
<![CDATA[
<Object name="x-httpd-php">
ObjectType fn="force-type" type="magnus-internal/x-httpd-php"
Service fn=php4_execute
</Object>
]]>
       </programlisting>
      </para>
     </listitem>
     <listitem>
      <simpara>
       webサービスを再起動して設定を反映します
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       PHPを実行する全てのwebサーバーインスタンスで行ってください。
      </simpara>
     </listitem>
    </itemizedlist>
    <para>
     PHPをNSAPIとしてセットアップするためのより詳細な説明は
     <ulink url="&url.netscape.nsapi;">&url.netscape.nsapi;</ulink>
     をご覧ください。
    </para>
   </sect2>
  </sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
