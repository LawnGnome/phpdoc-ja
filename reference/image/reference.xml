<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.3 $ -->
  <reference id="ref.image">
  <title>イメージ関数(image)</title>
  <titleabbrev>イメージ</titleabbrev>

  <partintro>
   <section id="image.intro">
    &reftitle.intro;
    <para>
     PHPができることは、HTML出力を生成することだけではありません。PHP
     は、多くの異なるイメージ形式でイメージファイルを作成したり、操作
     したりすることもできます。このイメージ形式には、gif, png, jpg,
     wbmp, xpmが含まれます。さらに便利なことに、PHPはイメージストリー
     ムを直接ブラウザに出力することができます。
     これを動作されるには、イメージ関数のGDライブラリを指定してPHPをコ
     ンパイル必要があります。使用したいイメージ形式によっては、GDとPHP
     は他のライブラリも必要とする可能性があります。
    </para>
    <para>
     PHPのイメージ関数により
     <acronym>JPEG</acronym>、<acronym>GIF</acronym>、
     <acronym>PNG</acronym>、<acronym>SWF</acronym>、
     <acronym>TIFF</acronym>、<acronym>JPEG2000</acronym>イメージの
     大きさを知ることができます。
    </para>
    <para>
     <note>
      <simpara>
       イメージの読み込み、書き込み、修正の機能の拡張、デジタルカメラ
       により撮影された画像のメタデータを読み込むには、要求の節を読ん
       で下さい。
      </simpara>
     </note>
    </para>
   </section>

   <section id="image.requirements">
    &reftitle.required;
    <para>
     <acronym>GD</acronym>ライブラリ( <ulink
      url="&url.gd;">&url.gd;</ulink>で取得可能)があれば、画像の作成と操
     作を行なうこともできます。
    </para>
    <para>
    操作できるイメージの形式は、インストールされている
    <acronym>GD</acronym>とこれらのイメージフォーマットにアクセスする
    ために<acronym>GD</acronym>が必要とするその他のライブラリに依存し
    ます。gd-1.6より前のバージョンのgdは、GIFイメージ画像をサポートし
    ていますが、PNGはサポートしていません。一方、gd-1.6以降のバージョ
    ンはPNGをサポートし、GIFはサポートしていません。
     <note>
      <simpara>
       PHP 4.3以降、GD libの付属版が付属しています。この付属版にはαブ
       レンディングのようないくつかの機能が追加されています。
       この版のコードは、より管理が行き届き、安定しているため、  
       外部ライブラリの代わりに使用されるべきです。
      </simpara>
     </note>
    </para>
    <para>
     より多くのイメージ形式を処理するためにGDを拡張したいと思うかもし
     れません。
     <table>
     <title>サポートされるイメージ形式</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>イメージ形式</entry>
         <entry>ダウンロードするライブラリ</entry>
         <entry>注記</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry><literal>gif</literal></entry>
         <entry></entry>
         <entry>
          Only supported in GD versions older than gd-1.6. <emphasis>Read-only
          </emphasis> GIF support is available with PHP 4.3.0 and the bundled
          GD-library.
         </entry>
        </row>
        <row>
         <entry><literal>jpeg-6b</literal></entry>
         <entry><ulink url="&url.jpeg;">&url.jpeg;</ulink></entry>
         <entry></entry>
        </row>
        <row>
         <entry><literal>png</literal></entry>
         <entry><ulink url="&url.libpng;">&url.libpng;</ulink></entry>
         <entry>
          Only supported in GD versions greater than gd-1.6.
         </entry>
        </row>
        <row>
         <entry><literal>xpm<</literal></entry>
         <entry><ulink url="&url.libxpm;">&url.libxpm;</ulink></entry>
         <entry>
          It's likely you have this library already available, if your system
          has an installed X-Environment.
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>

    <para>
     You may wish to enhance GD to deal with different fonts. The following
     font libraries are supported:
     <table>
     <title>Supported font libraries</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>Font library</entry>
         <entry>Download</entry>
         <entry>Notes</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry><literal>FreeType 1.x</literal></entry>
         <entry><ulink url="&url.freetype;">&url.freetype;</ulink></entry>
         <entry></entry>
        </row>
        <row>
         <entry><literal>FreeType 2</literal></entry>
         <entry><ulink url="&url.freetype;">&url.freetype;</ulink></entry>
         <entry></entry>
        </row>
        <row>
         <entry><literal>T1lib</literal></entry>
         <entry><ulink url="&url.t1lib;">&url.t1lib;</ulink>)</entry>
         <entry>
          Support for Type 1 fonts.
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>

    <para>
     If you have PHP compiled with <option role="configure">--enable-exif</option>
     you are able to work with information stored in headers of
     <acronym>JPEG</acronym> and <acronym>TIFF</acronym> images. This way you can
     read meta data generated by digital cameras as mentioned above. These
     functions does not require the <acronym>GD</acronym> library.
     <note>
      <simpara>
      PHP does not require any additional library for exif the module.
      </simpara>
     </note>
    </para>
   </section>

   &reference.image.configure;

   &reference.image.ini;

   <section id="image.resources">
    &reftitle.resources;
    &no.resource;
   </section>

   &reference.image.constants;

   <section id="image.examples">
    &reftitle.examples;
    <para>
     <example>
      <title>PHPによるPNGの生成</title>
      <programlisting role="php">
<![CDATA[
<?php
    header("Content-type: image/png");
    $string = $_GET['text'];
    $im     = imagecreatefrompng("images/button1.png");
    $orange = imagecolorallocate($im, 220, 210, 60);
    $px     = (imagesx($im) - 7.5 * strlen($string)) / 2;
    imagestring($im, 3, $px, 9, $string, $orange);
    imagepng($im);
    imagedestroy($im);
?>
]]>
      </programlisting>
     </example>
     This example would be called from a page with a tag like: &lt;img
     src=&quot;button.php?text&quot;&gt;. The above button.php script
     then takes this &quot;text&quot; string and overlays it on top of a
     base image which in this case is &quot;images/button1.png&quot;
     and outputs the resulting image. This is a very convenient way to
     avoid having to draw new button images every time you want to
     change the text of a button. With this method they are
     dynamically generated.
    </para>
   </section>
  </partintro>

&reference.image.functions;

 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

