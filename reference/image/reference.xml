<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.4 $ -->
  <reference id="ref.image">
  <title>イメージ関数(image)</title>
  <titleabbrev>イメージ</titleabbrev>

  <partintro>
   <section id="image.intro">
    &reftitle.intro;
    <para>
     PHPができることは、HTML出力を生成することだけではありません。PHP
     は、多くの異なるイメージ形式でイメージファイルを作成したり、操作
     したりすることもできます。このイメージ形式には、gif, png, jpg,
     wbmp, xpmが含まれます。さらに便利なことに、PHPはイメージストリー
     ムを直接ブラウザに出力することができます。
     これを動作されるには、イメージ関数のGDライブラリを指定してPHPをコ
     ンパイル必要があります。使用したいイメージ形式によっては、GDとPHP
     は他のライブラリも必要とする可能性があります。
    </para>
    <para>
     PHPのイメージ関数により
     <acronym>JPEG</acronym>、<acronym>GIF</acronym>、
     <acronym>PNG</acronym>、<acronym>SWF</acronym>、
     <acronym>TIFF</acronym>、<acronym>JPEG2000</acronym>イメージの
     大きさを知ることができます。
    </para>
    <para>
     <note>
      <simpara>
       イメージの読み込み、書き込み、修正の機能の拡張、デジタルカメラ
       により撮影された画像のメタデータを読み込むには、要求の節を読ん
       で下さい。
      </simpara>
     </note>
    </para>
   </section>

   <section id="image.requirements">
    &reftitle.required;
    <para>
     <acronym>GD</acronym>ライブラリ( <ulink
      url="&url.gd;">&url.gd;</ulink>で取得可能)があれば、画像の作成と操
     作を行なうこともできます。
    </para>
    <para>
    操作できるイメージの形式は、インストールされている
    <acronym>GD</acronym>とこれらのイメージフォーマットにアクセスする
    ために<acronym>GD</acronym>が必要とするその他のライブラリに依存し
    ます。gd-1.6より前のバージョンのgdは、GIFイメージ画像をサポートし
    ていますが、PNGはサポートしていません。一方、gd-1.6以降のバージョ
    ンはPNGをサポートし、GIFはサポートしていません。
     <note>
      <simpara>
       PHP 4.3以降、GD libの付属版が付属しています。この付属版にはαブ
       レンディングのようないくつかの機能が追加されています。
       この版のコードは、より管理が行き届き、安定しているため、  
       外部ライブラリの代わりに使用されるべきです。
      </simpara>
     </note>
    </para>
    <para>
     より多くのイメージ形式を処理するためにGDを拡張したいと思うかもし
     れません。
     <table>
     <title>サポートされるイメージ形式</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>イメージ形式</entry>
         <entry>ダウンロードするライブラリ</entry>
         <entry>注記</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry><literal>gif</literal></entry>
         <entry></entry>
         <entry>
          gd-1.6より以前のバージョンのGDでのみサポートされます。
          <emphasis>読み込みのみ</emphasis>のGIFサポートは、PHP 4.3.0
          とバンドルされたGDライブラリの組合せで利用可能です。
         </entry>
        </row>
        <row>
         <entry><literal>jpeg-6b</literal></entry>
         <entry><ulink url="&url.jpeg;">&url.jpeg;</ulink></entry>
         <entry></entry>
        </row>
        <row>
         <entry><literal>png</literal></entry>
         <entry><ulink url="&url.libpng;">&url.libpng;</ulink></entry>
         <entry>
          gd-1.6以降のバージョンのGDでのみサポートされます。
         </entry>
        </row>
        <row>
         <entry><literal>xpm<</literal></entry>
         <entry><ulink url="&url.libxpm;">&url.libxpm;</ulink></entry>
         <entry>
          Xウインドウ環境をインストールしている場合、
          このライブラリを既に利用可能と思われます。
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>

    <para>
     別の種類のフォントを処理できるようにGDを拡張したいと思うかもしれ
     ません。以下にサポートされるフォントライブラリを示します。
     <table>
     <title>サポートされるフォントライブラリ</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>フォントライブラリ</entry>
         <entry>ダウンロード</entry>
         <entry>注記</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry><literal>FreeType 1.x</literal></entry>
         <entry><ulink url="&url.freetype;">&url.freetype;</ulink></entry>
         <entry></entry>
        </row>
        <row>
         <entry><literal>FreeType 2</literal></entry>
         <entry><ulink url="&url.freetype;">&url.freetype;</ulink></entry>
         <entry></entry>
        </row>
        <row>
         <entry><literal>T1lib</literal></entry>
         <entry><ulink url="&url.t1lib;">&url.t1lib;</ulink>)</entry>
         <entry>
          Type 1フォントをサポートします。
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>

    <para>
     <option role="configure">--enable-exif</option>を指定してPHPをコ
     ンパイルした場合、<acronym>JPEG</acronym>および
     <acronym>TIFF</acronym>イメージのヘッダに格納された情報を処理する
     ことができるようになります。これにより、以下に示すようにデジタル
     カメラにより生成されたメタデータを読むことができるようになります。
     以下の関数は、<acronym>GD</acronym>ライブラリを必要としません。
     <note>
      <simpara>
       PHPは、exifモジュール用のライブラリの追加を必要としません。
      </simpara>
     </note>
    </para>
   </section>

   &reference.image.configure;

   &reference.image.ini;

   <section id="image.resources">
    &reftitle.resources;
    &no.resource;
   </section>

   &reference.image.constants;

   <section id="image.examples">
    &reftitle.examples;
    <para>
     <example>
      <title>PHPによるPNGの生成</title>
      <programlisting role="php">
<![CDATA[
<?php
    header("Content-type: image/png");
    $string = $_GET['text'];
    $im     = imagecreatefrompng("images/button1.png");
    $orange = imagecolorallocate($im, 220, 210, 60);
    $px     = (imagesx($im) - 7.5 * strlen($string)) / 2;
    imagestring($im, 3, $px, 9, $string, $orange);
    imagepng($im);
    imagedestroy($im);
?>
]]>
      </programlisting>
     </example>
     この例のスクリプトは、&lt;img src=&quot;button.php?text&quot;&gt;
     のようなタグによりあるページからコールされるものです。
     上のbutton.phpスクリプトは、この &quot;text&quot; 文字列を引数と
     し、この場合は &quot;images/button1.png&quot; である基本イメージ
     の最上部にこの文字列を描いた後、描画後ののイメージを出力します。
     この方法は、ボタンのテキストを変更する度に新規のボタンを生成する
     必要があるのを回避するために便利な手法です。
     この方法により、動的にイメージボタンを生成できます。
    </para>
   </section>
  </partintro>

&reference.image.functions;

 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

