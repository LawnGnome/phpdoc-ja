<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.4 $ -->
<!-- EN-Revision: 1.5 Maintainer: hirokawa Status: ready -->
<section id="mbstring.configuration">
 &reftitle.runtime;
 &extension.runtime;
 <para>
 <table>
  <title>Multi-Byte String 設定オプション</title>
  <tgroup cols="3">
   <thead>
    <row>
     <entry>名前</entry>
     <entry>デフォルト</entry>
     <entry>変更可能な範囲</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>mbstring.language</entry>
     <entry>neutral</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>mbstring.detect_order</entry>
     <entry>NULL</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>mbstring.http_input</entry>
     <entry>pass</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>mbstring.http_output</entry>
     <entry>pass</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>mbstring.internal_encoding</entry>
     <entry>NULL</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>mbstring.script_encoding</entry>
     <entry>NULL</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>mbstring.substitute_character</entry>
     <entry>NULL</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>mbstring.func_overload</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_SYSTEM</entry>
    </row>
    <row>
     <entry>mbstring.encoding_translation</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 PHP_INI_* 定数の詳細及び定義については、<function>ini_set</function>
 を参照して下さい。
 </para>
 <para>
  以下に設定ディレクティブの簡単な説明を書きます。
  <itemizedlist>
   <listitem id="ini.mbstring.language">
    <simpara>
     <literal>mbstring.language</literal> は、mbstringで使用される
     言語のデフォルト値を定義します。このオプションは、
     <literal>mbstring.internal_encoding</literal>
     のデフォルト値を定義し、&php.ini;において
     <literal>mbstring.internal_encoding</literal>は、
     <literal>mbstring.language</literal>の後に置く必要があることに
     注意して下さい。
    </simpara>
   </listitem>
   <listitem id="ini.mbstring.encoding-translation">
    <simpara>
     <literal>mbstring.encoding_translation</literal> は、
     HTTP入力文字エンコーディング検出および内部文字エンコーディングへの変換
     を有効にします。
    </simpara>
   </listitem>
   <listitem id="ini.mbstring.internal-encoding">
    <simpara>
     <literal>mbstring.internal_encoding</literal> は内部文字エン
     コーディングのデフォルト値を定義します。
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>mbstring.http_input</literal> はHTTP入力文字エンコー
     ディングのデフォルト値を定義します。
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>mbstring.http_output</literal> は、HTTP出力文字エン
     コーディングのデフォルト値を定義します。
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>mbstring.detect_order</literal> は、文字コード検出の
     デフォルト値を定義します。
     <function>mb_detect_order</function>も参照下さい。
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>mbstring.substitute_character</literal> は、無効な文
     字を代替する文字を定義します。
    </simpara>
   </listitem>
   <listitem id="ini.mbstring.func-overload">
    <simpara>
     <literal>mbstring.func_overload</literal>は、シングルバイト対応の
     関数をmbstring関数でオーバーロード(置換)します。
     <function>mail</function>, <function>ereg</function>等は、
     <function>mb_send_mail</function>, <function>mb_ereg</function>等で
     置換されます。使用可能な値は、0, 1, 2, 4 およびこれらのビット和です。
     例えば、7 は全てをオーバーロードします。
      0: オーバーロード無し(デフォルト), 1: <function>mail</function>関数を
     オーバーロード,
      2: str*() 関数をオーバーロード, 4: ereg*() 関数をオーバーロード
    </simpara>
   </listitem>
  </itemizedlist>
 </para>
 <para>
  Webブラウザは、フォームのデータを投稿する際に同じ文字エンコーディ
  ングを使用すると仮定されます。しかし、ブラウザは同じ文字エンコー
  ディングを使用しない可能性があります。ブラウザで使用される文字エ
  ンコーディングを検出するには、<function>mb_http_input</function>
  を参照下さい。
 </para>
 <para>
  HTMLフォームで<literal>enctype</literal> が
  <literal>multipart/form-data</literal> に設定された場合、
  <literal>mbstring</literal>はPOSTデータの文字エンコーディングを
  変換しません。ユーザは、変換に応じてスクリプト内で変換を行う必要
  があります。
 </para>
 <para>
  しかし、ブラウザ側でもHTML内の文字エンコーディングを検出すること
  は可能です。HTMLヘッダで<literal>charset</literal>を設定する方が
  より良いでしょう。文字エンコーディングに応じて
  <literal>default_charset</literal>を変更して下さい。
 </para>
 <para>
  <example>
  <title>&php.ini; 設定の例</title>
   <programlisting>
<![CDATA[
; デフォルトの言語を設定
mbstring.language        = neutral;  デフォルト言語を中立(UTF-8)に設定 (デフォルト)
mbstring.language        = Japanese; デフォルト言語を日本語に設定

;; デフォルトの内部エンコーディングを設定
;; 注意: PHPで動作する文字エンコーディングを使用すること
mbstring.internal_encoding    = UTF-8  ; 内部エンコーディングをUTF-8に設定

;; デフォルトのHTTP入力文字エンコーディングを設定
;; 注意: スクリプトではhttp_inputの設定は変更できません。
mbstring.http_input           = pass    ; 変換しない。
mbstring.http_input           = auto    ; HTTP入力をautoに設定
	                                ; "auto" は、"ASCII,JIS,UTF-8,
                                        ; EUC-JP,SJIS"に展開されます。
mbstring.http_input           = SJIS    ; HTTP入力をSJISに設定
mbstring.http_input           = UTF-8,SJIS,EUC-JP ; 順番を指定

;; デフォルトのHTTP出力文字エンコーディングを設定
mbstring.http_output          = pass    ; 変換せず
mbstring.http_output          = UTF-8   ; HTTP出力エンコーディングをUTF-8に指定

;; デフォルトの文字エンコーディング検出順序を設定
mbstring.detect_order         = auto    ; デフォルトの順番をautoに設定
mbstring.detect_order         = ASCII,JIS,UTF-8,SJIS,EUC-JP ; 順番を指定

;; 代替文字のデフォルト値を設定
mbstring.substitute_character = 12307   ; Unicode値を指定
mbstring.substitute_character = none    ; 文字を出力しない
mbstring.substitute_character = long    ; longの例: U+3000,JIS+7E7E
]]>
   </programlisting>
  </example>
 </para>
 <para>
  <example>
   <title><literal>EUC-JP</literal> ユーザ用の&php.ini;の設定</title>
   <programlisting>
<![CDATA[
;; 出力バッファリングを無効にする
output_buffering      = Off

;; HTTP charsetヘッダを設定
default_charset       = EUC-JP    

;; デフォルトの言語を日本語にする
mbstring.language = Japanese

;; HTTP 入力変換を有効にする
mbstring.encoding_translation = On

;; HTTP 入力エンコーディング変換をautoに設定
mbstring.http_input   = auto 

;; HTTP出力をEUC-JPに設定
mbstring.http_output  = EUC-JP    

;; 内部エンコーディングをEUC-JPに設定
mbstring.internal_encoding = EUC-JP    

;; 無効な文字を出力しない
mbstring.substitute_character = none
]]>
   </programlisting>
  </example>
 </para>
 <para>
  <example>
   <title><literal>SJIS</literal>ユーザ用の&php.ini;の設定</title>
   <programlisting>
<![CDATA[
;; 出力のバッファリングを有効に
output_buffering     = On

;; 出力の変換を有効にするために mb_output_handler を設定
output_handler       = mb_output_handler

;; HTTPヘッダ charset を設定
default_charset      = Shift_JIS

;; デフォルトの言語を日本語に設定
mbstring.language = Japanese

;; HTTP 入力変換を有効にする
mbstring.encoding_translation = On

;; HTTP入力エンコーディング変換をautoに設定
mbstring.http_input  = auto 

;; SJISに変換
mbstring.http_output = SJIS    

;; 内部エンコーディングをEUC-JPに設定
mbstring.internal_encoding = EUC-JP    

;; 無効な文字を出力しない
mbstring.substitute_character = none

]]>
   </programlisting>
  </example>
 </para>

</section>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

