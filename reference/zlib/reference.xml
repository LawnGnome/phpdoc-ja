<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.3 $ -->
 <reference id="ref.zlib">
  <title>zlib圧縮関数</title>
  <titleabbrev>Zlib</titleabbrev>

  <partintro>
   <section id="zlib.intro">
    &reftitle.intro;
    <para>
     このモジュールによりgzip (.gz)で圧縮されたファイルを読み書きする
     ことが可能となります。
     この際、<link linkend="ref.filesystem">ファイルシステム</link>関
     数のgzip圧縮対応版(非圧縮ファイルも扱えますが、ソケットは扱えませ
     ん)を使用します。
    </para>
    <note>
     <para>
      バージョン4.0.4-devで.gzファイルに対応したfopen-wrapperを導入しました。
      これにより<function>fopen</function>に'zlib:'をプレフィクスとした
      ファイル名又はパス名を渡すことで、通常のf*()関数で圧縮されたファイルに
      透過的にアクセスすることが出来ます。
     </para>
     <para>
      4.3.0において、';'を含むファイル名との曖昧さを避けるためこの特別
      なプレフィックスは'zlib://'に変更されました。
     </para>
     <para>
      この機能を利用するには<literal>fopencookie()</literal>関数を提供する
      Cのランタイムライブラリが必要です。現在私の知る限りでは、GNU libcが
      この機能を提供する唯一のライブラリです。
     </para>
    </note>
   </section>

   <section id="zlib.requirements">
    &reftitle.required;
    <para>
     このモジュールは、Jean-loup Gailly および Mark Adler による
     <ulink url="&url.zlib;">zlib</ulink> の関数を使用します。
     このモジュールを使用するには、zlib バージョン 1.0.9 以上を
     使用する必要があります。
    </para>
   </section>

   &reference.zlib.configure;

   &reference.zlib.ini;

   <section id="zlib-example">
    <title>簡単なコードの例</title>
    <para>
     テンポラリファイルをオープンし、テスト用文字列を書きこみ、
     続いて、このファイルの内容を2回出力します。
    </para>
    <example>
     <title>簡単な Zlib の例</title>
     <programlisting role="php">
<![CDATA[
<?php
$filename = tempnam ('/tmp', 'zlibtest').'.gz';
print "<html>\n<head></head>\n<body>\n<pre>\n";
$s = "Only a test, test, test, test, test, test, test, test!\n";
// 最大限の圧縮を指定して書きこみ用にファイルをオープン
$zp = gzopen ($filename, "w9");
// 文字列をファイルに書きこむ
gzwrite ($zp, $s);
// ファイルを閉じる
gzclose ($zp);
// 読みこみ用にファイルをオープン
$zp = gzopen ($filename, "r");
// 3文字読みこむ
print gzread ($zp, 3);
// ファイルの終端まで読み、閉じる
gzpassthru ($zp);
print "\n";
// ファイルをオープンし、内容を出力する (2回目)。
if (readgzfile ($filename) != strlen ($s)) {
        echo "Error with zlib functions!";
}
unlink ($filename);
print "</pre>\n</h1></body>\n</html>\n";
?>
]]>
     </programlisting>
    </example>
   </section>
  </partintro>

&reference.zlib.functions;

 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

