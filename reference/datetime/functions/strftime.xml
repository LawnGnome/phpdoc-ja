<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 297028 Maintainer: hirokawa Status: ready -->
<!-- CREDITS: shimooka -->
<refentry xml:id="function.strftime" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>strftime</refname>
  <refpurpose>
   ロケールの設定に基づいてローカルな日付・時間をフォーマットする
  </refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>string</type><methodname>strftime</methodname>
   <methodparam><type>string</type><parameter>format</parameter></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>timestamp</parameter><initializer>time()</initializer></methodparam>
  </methodsynopsis>
  <para>
   ローカルの時刻・日付を、ロケール設定にもとづいてフォーマットします。
   月および曜日の名前、およびその他の言語依存の文字列は、
   <function>setlocale</function> で設定された現在のロケールを尊重して表示されます。
  </para>
  <para>
   使用する C ライブラリで、すべての変換指定子がサポートされているとは限りません。
   そのような場合、該当する変換指定子は PHP の
   <function>strftime</function> ではサポートされません。
   また、全てのプラットフォームが負のタイムスタンプをサポートしているわけではないため、
   Unix Epoch (1970 年 1 月 1 日）以前の日付を扱えないかもしれません。
   つまり、Windows や一部の Linux ディストリビューション、そしてその他のごく一部の
   オペレーティングシステム上では
   %e、%T、%R および %D (あるいはこれ以外も) が
   <literal>Jan 1, 1970</literal> より前の日付について動作しないということです。
   Windwos システム上でサポートされる変換指定子の概要については、
   <link xlink:href="&url.strftime.win32;"><acronym>MSDN</acronym></link>
   に掲載されています。
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>format</parameter></term>
     <listitem>
      <para>
       <table>
        <title>次の変換指定子が <parameter>format</parameter> パラメータ用の文字列として認識されます</title>
        <tgroup cols="3">
         <thead>
          <row>
           <entry><parameter>format</parameter></entry>
           <entry>説明</entry>
           <entry>返り値の例</entry>
          </row>
         </thead>
         <tbody>
          <row>
           <entry align="center"><emphasis>日</emphasis></entry>
           <entry>---</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%a</literal></entry>
           <entry>短縮された曜日の名前</entry>
           <entry><literal>Sun</literal> から <literal>Sat</literal></entry>
          </row>
          <row>
           <entry><literal>%A</literal></entry>
           <entry>完全な曜日の名前</entry>
           <entry><literal>Sunday</literal> から <literal>Saturday</literal></entry>
          </row>
          <row>
           <entry><literal>%d</literal></entry>
           <entry>10 進数で 2 桁の日付 (先頭のゼロつき)</entry>
           <entry><literal>01</literal> から <literal>31</literal></entry>
          </row>
          <row>
           <entry><literal>%e</literal></entry>
           <entry>1 桁の場合は先頭にスペースをいれた日付</entry>
           <entry><literal> 1</literal> から <literal>31</literal></entry>
          </row>
          <row>
           <entry><literal>%j</literal></entry>
           <entry>3 桁で先頭にゼロを含む年間での日付</entry>
           <entry><literal>001</literal> から <literal>366</literal></entry>
          </row>
          <row>
           <entry><literal>%u</literal></entry>
           <entry>ISO-8601 数値表現であらわした曜日</entry>
           <entry><literal>1</literal> (月曜日) から <literal>7</literal> (土曜日)</entry>
          </row>
          <row>
           <entry><literal>%w</literal></entry>
           <entry>数値表現であらわした曜日</entry>
           <entry><literal>0</literal> (日曜日) から <literal>6</literal> (土曜日)</entry>
          </row>
          <row>
           <entry align="center"><emphasis>週</emphasis></entry>
           <entry>---</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%U</literal></entry>
           <entry>指定した年の週番号。最初の日曜日を第一週の開始日とする</entry>
           <entry><literal>13</literal> (年間の第 13 週の場合)</entry>
          </row>
          <row>
           <entry><literal>%V</literal></entry>
           <entry>ISO-8601:1988 で規定された、指定した年の週番号。
           週の開始日は月曜日で、第 1 週は少なくとも 4 日はあることになる</entry>
           <entry><literal>01</literal> から <literal>53</literal> (53
           は年をまたがる週になります)</entry>
          </row>
          <row>
           <entry><literal>%W</literal></entry>
           <entry>その年の週番号の数値表現。最初の月曜日を最初の週の初日とする</entry>
           <entry><literal>46</literal> (46 番目の週の場合。開始日は月曜日)</entry>
          </row>
          <row>
           <entry align="center"><emphasis>月</emphasis></entry>
           <entry>---</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%b</literal></entry>
           <entry>現在のロケールに基づく短縮された月の名前</entry>
           <entry><literal>Jan</literal> から <literal>Dec</literal></entry>
          </row>
          <row>
           <entry><literal>%B</literal></entry>
           <entry>現在のロケールに基づく完全な月の名前</entry>
           <entry><literal>January</literal> から <literal>December</literal></entry>
          </row>
          <row>
           <entry><literal>%h</literal></entry>
           <entry>現在のロケールに基づく短縮された月の名前 (%b のエイリアス)</entry>
           <entry><literal>Jan</literal> から <literal>Dec</literal></entry>
          </row>
          <row>
           <entry><literal>%m</literal></entry>
           <entry>2 桁であらわした月</entry>
           <entry><literal>01</literal> (1 月) から <literal>12</literal> (12 月)</entry>
          </row>
          <row>
           <entry align="center"><emphasis>年</emphasis></entry>
           <entry>---</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%C</literal></entry>
           <entry>2 桁であらわした世紀 (年を 100 で割り、整数に丸めたもの)</entry>
           <entry>20 正規の場合は <literal>19</literal></entry>
          </row>
          <row>
           <entry><literal>%g</literal></entry>
           <entry>2 桁であらわした年。ISO-8601:1988 標準形式 (%V を参照)</entry>
           <entry>2009 年 1 月 6 日の場合は <literal>09</literal></entry>
          </row>
          <row>
           <entry><literal>%G</literal></entry>
           <entry>%g の 4 桁完全版</entry>
           <entry>2009 年 1 月 3 日の場合は <literal>2009</literal></entry>
          </row>
          <row>
           <entry><literal>%y</literal></entry>
           <entry>2 桁であらわした年</entry>
           <entry>2009 年の場合は <literal>09</literal>、1979 年の場合は <literal>79</literal></entry>
          </row>
          <row>
           <entry><literal>%Y</literal></entry>
           <entry>4 桁であらわした年</entry>
           <entry><literal>2038</literal></entry>
          </row>
          <row>
           <entry align="center"><emphasis>時</emphasis></entry>
           <entry>---</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%H</literal></entry>
           <entry>2 桁であらわした 24 時間制の時間</entry>
           <entry><literal>00</literal> から <literal>23</literal></entry>
          </row>
          <row>
           <entry><literal>%I</literal></entry>
           <entry>2 桁であらわした 12 時間制の時間</entry>
           <entry><literal>01</literal> から <literal>12</literal></entry>
          </row>
          <row>
           <entry><literal>%l (lower-case 'L')</literal></entry>
           <entry>12 時間制の時間で、1 桁の場合は先頭にスペースをつけたもの</entry>
           <entry><literal> 1</literal> から <literal>12</literal></entry>
          </row>
          <row>
           <entry><literal>%M</literal></entry>
           <entry>2 桁であらわした分</entry>
           <entry><literal>00</literal> から <literal>59</literal></entry>
          </row>
          <row>
           <entry><literal>%p</literal></entry>
           <entry>指定した時刻に応じた大文字の 'AM' あるいは 'PM'</entry>
           <entry>00:31 なら <literal>AM</literal>、22:23 なら <literal>PM</literal></entry>
          </row>
          <row>
           <entry><literal>%P</literal></entry>
           <entry>指定した時刻に応じた小文字の 'am' あるいは 'pm'</entry>
           <entry>00:31 なら <literal>am</literal>、22:23 なら <literal>pm</literal></entry>
          </row>
          <row>
           <entry><literal>%r</literal></entry>
           <entry>"%I:%M:%S %p" と同じ</entry>
           <entry>21:34:17 なら <literal>09:34:17 PM</literal></entry>
          </row>
          <row>
           <entry><literal>%R</literal></entry>
           <entry>"%H:%M" と同じ</entry>
           <entry>12:35 AM なら <literal>00:35</literal>、4:44 PM なら <literal>16:44</literal></entry>
          </row>
          <row>
           <entry><literal>%S</literal></entry>
           <entry>2 桁であらわした秒</entry>
           <entry><literal>00</literal> から <literal>59</literal></entry>
          </row>
          <row>
           <entry><literal>%T</literal></entry>
           <entry>"%H:%M:%S" と同じ</entry>
           <entry>09:34:17 PM なら <literal>21:34:17</literal></entry>
          </row>
          <row>
           <entry><literal>%X</literal></entry>
           <entry>Preferred time representation based on locale, without the date</entry>
           <entry>Example: <literal>03:59:16</literal> or <literal>15:59:16</literal></entry>
          </row>
          <row>
           <entry><literal>%z</literal></entry>
           <entry>UTC からのオフセットあるいはタイムゾーン略称
           (OS に依存)</entry>
           <entry>東海岸時刻なら <literal>-0500</literal> あるいは <literal>EST</literal></entry>
          </row>
          <row>
           <entry><literal>%Z</literal></entry>
           <entry>タイムゾーンオフセットあるいは略称のうち %z で返されないもの
           (OS に依存)</entry>
           <entry>東海岸時刻なら <literal>-0500</literal> あるいは <literal>EST</literal></entry>
          </row>
          <row>
           <entry align="center"><emphasis>タイムスタンプ</emphasis></entry>
           <entry>---</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%c</literal></entry>
           <entry>現在のロケールにもとづく日付と時間の表現</entry>
           <entry><literal>Tue Feb  5 00:45:10 2009</literal></entry>
          </row>
          <row>
           <entry><literal>%D</literal></entry>
           <entry>"%m/%d/%y" と同じ</entry>
           <entry>2009 年 2 月 5 日なら <literal>02/05/09</literal></entry>
          </row>
          <row>
           <entry><literal>%F</literal></entry>
           <entry>"%Y-%m-%d" と同じ (データベースのタイムスタンプとして一般的)</entry>
           <entry>2009 年 2 月 5 日なら <literal>2009-02-05</literal></entry>
          </row>
          <row>
           <entry><literal>%s</literal></entry>
           <entry>Unix エポックからのタイムスタンプ (<function>time</function>
           関数と同じ)</entry>
           <entry>1979 年 9 月 10 日午前 08:40:00 なら <literal>305815200</literal></entry>
          </row>
          <row>
           <entry><literal>%x</literal></entry>
           <entry>現在のロケールにもとづく日付の表現 (時間は除く)</entry>
           <entry>2009 年 2 月 5 日なら <literal>02/05/09</literal></entry>
          </row>
          <row>
           <entry align="center"><emphasis>その他</emphasis></entry>
           <entry>---</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%n</literal></entry>
           <entry>改行文字 ("\n")</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%t</literal></entry>
           <entry>タブ文字 ("\t")</entry>
           <entry>---</entry>
          </row>
          <row>
           <entry><literal>%%</literal></entry>
           <entry>パーセント文字 ("%")</entry>
           <entry>---</entry>
          </row>
         </tbody>
        </tgroup>
       </table>
      </para>
      <para>
       このパラメータの最大長は 1023 文字です。
      </para>
      <warning>
       <simpara>
        ISO-9889:1999 に反して、Sun Solaris は日曜日を 1 としています。
        そのため、%u はこのマニュアルの説明どおりに機能しないかもしれません。
       </simpara>
      </warning>
     </listitem>
    </varlistentry>

    &date.timestamp.description;

   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   指定した <parameter>timestamp</parameter> または timestamp
   が指定されていない場合に現在のローカル時間を用いて、
   指定したフォーマット文字列に基づき文字列をフォーマットして返します。
   月および曜日の名前、およびその他の言語依存の文字列は、
   <function>setlocale</function> で設定された現在のロケールを尊重して表示されます。
  </para>
 </refsect1>

 <refsect1 role="errors">
  &reftitle.errors;
  &date.timezone.errors.description;
  <para>
   出力内容は元となった C ライブラリに依存するため、サポートしていない変換指定子もあります。
   Windows では、対応していない変換指定子を渡すと
   5 つの <constant>E_WARNING</constant> メッセージが出て &false; を返します。
   その他のオペレーティングシステムでは特に
   <constant>E_WARNING</constant> メッセージは出ず、
   変換指定子が (変換されずに) そのまま出力されます。
  </para>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>

      &date.timezone.errors.changelog;

     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   この例は、それぞれのロケールがシステムにインストールされている場合にのみ動作します。
   <example>
    <title><function>strftime</function> のロケールの例</title>
    <programlisting role="php">
<![CDATA[
<?php
setlocale(LC_TIME, "C");
echo strftime("%A");
setlocale(LC_TIME, "fi_FI");
echo strftime(" in Finnish is %A,");
setlocale(LC_TIME, "fr_FR");
echo strftime(" in French %A and");
setlocale(LC_TIME, "de_DE");
echo strftime(" in German %A.\n");
?>
]]>
    </programlisting>
   </example>
   <example>
    <title>ISO 8601:1988 の週番号の例</title>
    <programlisting role="php">
<![CDATA[
<?php
/*     December 2002 / January 2003
ISOWk  M   Tu  W   Thu F   Sa  Su
----- ----------------------------
51     16  17  18  19  20  21  22
52     23  24  25  26  27  28  29
1      30  31   1   2   3   4   5
2       6   7   8   9  10  11  12
3      13  14  15  16  17  18  19   */

// Outputs: 12/28/2002 - %V,%G,%Y = 52,2002,2002
echo "12/28/2002 - %V,%G,%Y = " . strftime("%V,%G,%Y", strtotime("12/28/2002")) . "\n";

// Outputs: 12/30/2002 - %V,%G,%Y = 1,2003,2002
echo "12/30/2002 - %V,%G,%Y = " . strftime("%V,%G,%Y", strtotime("12/30/2002")) . "\n";

// Outputs: 1/3/2003 - %V,%G,%Y = 1,2003,2003
echo "1/3/2003 - %V,%G,%Y = " . strftime("%V,%G,%Y",strtotime("1/3/2003")) . "\n";

// Outputs: 1/10/2003 - %V,%G,%Y = 2,2003,2003
echo "1/10/2003 - %V,%G,%Y = " . strftime("%V,%G,%Y",strtotime("1/10/2003")) . "\n";



/*     December 2004 / January 2005
ISOWk  M   Tu  W   Thu F   Sa  Su
----- ----------------------------
51     13  14  15  16  17  18  19
52     20  21  22  23  24  25  26
53     27  28  29  30  31   1   2
1       3   4   5   6   7   8   9
2      10  11  12  13  14  15  16   */

// Outputs: 12/23/2004 - %V,%G,%Y = 52,2004,2004
echo "12/23/2004 - %V,%G,%Y = " . strftime("%V,%G,%Y",strtotime("12/23/2004")) . "\n";

// Outputs: 12/31/2004 - %V,%G,%Y = 53,2004,2004
echo "12/31/2004 - %V,%G,%Y = " . strftime("%V,%G,%Y",strtotime("12/31/2004")) . "\n";

// Outputs: 1/2/2005 - %V,%G,%Y = 53,2004,2005
echo "1/2/2005 - %V,%G,%Y = " . strftime("%V,%G,%Y",strtotime("1/2/2005")) . "\n";

// Outputs: 1/3/2005 - %V,%G,%Y = 1,2005,2005
echo "1/3/2005 - %V,%G,%Y = " . strftime("%V,%G,%Y",strtotime("1/3/2005")) . "\n";

?>
]]>
    </programlisting>
   </example>
  </para>
 </refsect1>

 <refsect1 role="notes">
  &reftitle.notes;
  <note>
   <simpara>
    ISO 8601:1988 week numbers に基づいている %G と %V は、
    もしナンバリングシステムが完全に理解されていなければ
    期待とは違う結果をもたらします。
    このマニュアルの %V の例を参照ください。
   </simpara>
  </note>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>setlocale</function></member>
    <member><function>mktime</function></member>
    <member><function>strptime</function></member>
    <member><function>gmstrftime</function></member>
    <member><link xlink:href="&spec.strftime;">Open Group による <function>strftime</function> の定義</link></member>
   </simplelist>
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
