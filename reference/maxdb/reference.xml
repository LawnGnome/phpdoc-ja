<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.2 $ -->
<!-- EN-Revision: 1.11 Maintainer: takagi Status: ready -->
<!-- Purpose: database.vendors -->
<!-- Membership: pecl, external -->

 <reference id="ref.maxdb">
  <title>MaxDB PHP 拡張モジュール</title>
  <titleabbrev>MaxDB</titleabbrev>

  <partintro>
   <section id="maxdb.intro">
    &reftitle.intro;
    <para>
     MaxDB PHP 拡張モジュールにより、MaxDB 7.5.0 以降にアクセスできるようになります。
     MaxDB データベースサーバについての詳細な情報は
     <ulink url="&url.maxdb;">&url.maxdb;</ulink> で得られます。
    </para>
    <para>
     MaxDB PHP 拡張モジュールは、MySQL の mysqli 拡張モジュールと互換性があります。
     これらの間にはほんの少しの違いしかなく、その違いは MaxDB と MySQL
     の違いに基づくものです。
    </para>
    <para>
     mysqli との主な相違点は、以下のようになります。
    </para>
    <simplelist>
    <member><function>maxdb_character_set_name</function> - ascii あるいは unicode しか返しません。</member>
    <member><function>maxdb_get_client_info</function> - 異なるバージョン文字列を返します。</member>
    <member><function>maxdb_get_client_version</function> - 異なるバージョン文字列を返します。</member>
    <member><function>maxdb_get_host_info</function> - localhost あるいはホスト名を返します。</member>
    <member><function>maxdb_get_server_info</function> - 異なるバージョン文字列を返します。</member>
    <member><function>maxdb_get_server_version</function> - 異なるバージョン文字列を返します。</member>
    <member><function>maxdb_kill</function> - 単にセッションを切断するだけです。</member>
    <member><function>maxdb_multi_query</function> - 複数の SQL 文を扱うことはできません。</member>
    <member><function>maxdb_next_result</function> - 常に false を返します。</member>
    <member><function>maxdb_options</function> - サポートするオプションが異なります。</member>
    <member><function>maxdb_report</function> - サポートする繰り返しモードが異なります。</member>
    <member><function>maxdb_stat</function> - 異なるシステム状態文字列を返します。</member>
    <member><function>maxdb_stmt_store_result</function> - MaxDB では不要です。</member>
    <member><function>maxdb_store_result</function> - MaxDB では不要です。</member>
    </simplelist>
    <para>
     MaxDB についてのドキュメントは
     <ulink url="&url.maxdb.doc;">&url.maxdb.doc;</ulink> にあります。
    </para>
   </section>

   <section id="maxdb.requirements">
    &reftitle.required;
    <para>
     これらの関数を使用するには、MaxDB のサポートを有効にして
     PHP をコンパイルする必要があります。さらに、MaxDB サーバにアクセスするために
     MaxDB SQLDBC ランタイムライブラリが必要です。
    </para>
    <para>
     MaxDB SQLDBC についてのドキュメントは
     <ulink url="&url.maxdb.doc;">&url.maxdb.doc;</ulink> にあります。
    </para>
    <para>
     MaxDB SQLDBC パッケージは
     <ulink url="&url.maxdb.sdbc;">&url.maxdb.sdbc;</ulink>
     からダウンロードします。
    </para>
   </section>
    
    &reference.maxdb.configure;

    &reference.maxdb.ini;

   <section id='maxdb.classes'>
    &reftitle.classes;

    <section id='maxdb.class.maxdb'>
     <title><classname>maxdb</classname></title>
     <para>
      PHP と MaxDB データベースとの間の接続を表します。
     </para>
     <section id='maxdb.class.maxdb.constructor'>
      &reftitle.constructor;
      <itemizedlist>
       <listitem>
        <para><link linkend='function.maxdb-connect'>maxdb</link> - 新しい maxdb オブジェクトを作成する</para>
       </listitem>
      </itemizedlist>
     </section>
     <section id='maxdb.class.maxdb.methods'>
      &reftitle.methods;
      <itemizedlist>
       <listitem>
        <para><link linkend='function.maxdb-autocommit'>autocommit</link> - データベースの変更内容の自動コミット機能を有効あるいは無効にする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-change-user'>change_user</link> - 指定したデータベース接続のユーザ名を変更する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-character-set-name'>character_set_name</link> - データベース接続のデフォルト文字セットを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-close'>close</link> - 事前にオープンされた接続を閉じる</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-commit'>commit</link> - 現在のトランザクションをコミットする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-connect'>connect</link> - MaxDB データベースサーバへの新しい接続をオープンする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-debug'>debug</link> - デバッグ操作を実行する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-dump-debug-info'>dump_debug_info</link> - デバッグ情報を出力する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-client-info'>get_client_info</link> - クライアントのバージョンを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-host-info'>get_host_info</link> - 使用している接続の型を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-server-info'>get_server_info</link> - MaxDB サーバのバージョンを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-server-version'>get_server_version</link> - MaxDB サーバのバージョンを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-init'>init</link> - maxdb オブジェクトを初期化する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-info'>info</link> - 直近で実行されたクエリの情報を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-kill'>kill</link> - MaxDB スレッドの終了をサーバに要求する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-multi-query'>multi_query</link> - 複数のクエリを実行する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-more-results'>more_results</link> - 現在実行している複数クエリに次の結果があるかどうかを調べる</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-next-result'>next_result</link> - 現在実行している複数クエリの次の結果を読み込む</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-options'>options</link> - オプションを設定する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-ping'>ping</link> - サーバとの接続を確認し、接続されていない場合には再接続する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-prepare'>prepare</link> - SQL クエリを準備する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-query'>query</link> - クエリを実行する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-real-connect'>real_connect</link> - MaxDB データベースサーバとの接続をオープンする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-real-escape-string'>escape_string</link> - 接続の現在の文字セットを考慮したうえで、SQL 文で使用する文字列の特殊文字をエスケープする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-rollback'>rollback</link> - 現在のトランザクションをロールバックする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-select-db'>select_db</link> - デフォルトのデータベースを選択する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-ssl-set'>ssl_set</link> - ssl パラメータを設定する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stat'>stat</link> - 現在のシステム状態を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-init'>stmt_init</link>- <link linkend='function.maxdb-stmt-prepare'>maxdb_stmt_prepare</link> で使用するステートメントを初期化する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-store-result'>store_result</link> - 最後に実行したクエリの結果を転送する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-use-result'>use_result</link> - 最後に実行したクエリのバッファ化されていない結果を転送する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-thread-safe'>thread-safe</link> - スレッドセーフかどうかを返す</para>
       </listitem>
      </itemizedlist>
     </section>
     <section id='maxdb.class.maxdb.properties'>
      &reftitle.properties;
      <itemizedlist>
       <listitem>
        <para><link linkend='function.maxdb-affected-rows'>affected_rows</link> - 直前の MaxDB 操作で変更された行数を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-client-info'>client_info</link> - MaxDB クライアントのバージョンを文字列で返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-client-version'>client_version</link> - MaxDB クライアントのバージョンを整数で返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-errno'>errno</link> - 直近の関数コールのエラーコードを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-error'>error</link> - 直近の関数コールのエラー文字列を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-field-count'>field_count</link> - 直近のクエリのカラム数を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-host-info'>host_info</link> - 使用している接続の型を表す文字列を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-info'>info</link> - 直近に実行されたクエリについての情報を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-insert-id'>insert_id</link> - 直近のクエリで使用した自動生成 ID を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-get-proto-info'>protocol_version</link> - 使用している MaxDB プロトコルのバージョンを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-sqlstate'>sqlstate</link> - 直近のエラーについての SQLSTATE エラーコードを含む文字列を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-thread-id'>thread_id</link> - 現在の接続のスレッド ID を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-warning-count'>warning_count</link> - 直前の SQL 文の実行中に発生した警告の数を返す</para>
       </listitem>

      </itemizedlist>
     </section>
    </section>

    <section id='maxdb.classes.stmt'>
     <title><classname>maxdb_stmt</classname></title>
     <para>
      プリペアドステートメントを表します。
     </para>
     <section id='maxdb.class.stmt.methods'>
      &reftitle.methods;
      <itemizedlist>
       <listitem>
        <para><link linkend='function.maxdb-bind-param'>bind_param</link> - プリペアドステートメントに変数をバインドする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-bind-result'>bind_result</link> - 結果を保存するために、プリペアドステートメントに変数をバインドする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-close'>close</link> - プリペアドステートメントを閉じる</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-data-seek'>data-seek</link> - ステートメントの結果セットの任意の行に移動する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-execute'>execute</link> - プリペアドステートメントを実行する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch'>fetch</link> - プリペアドステートメントから結果を取得してバインド変数に保存する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-free-result'>free_result</link> - 指定したステートメントハンドルの結果メモリを開放する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-result-metadata'>result_metadata</link> - プリペアドステートメントからメタデータ情報の結果セットを取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-prepare'>prepare</link> - SQL クエリを準備する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-send-long-data'>send_long_data</link> - データをチャンクに送る</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-close-long-data'>close_long_data</link> - long データの送信を終了する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-reset'>reset</link> - プリペアドステートメントをリセットする</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-store-result'>store_result</link> - プリペアドステートメントから結果セット全体をバッファに保存する</para>
       </listitem>
      </itemizedlist>
     </section>
     <section id='maxdb.class.stmt.properties'>
      &reftitle.properties;
      <itemizedlist>
       <listitem>
        <para><link linkend='function.maxdb-stmt-affected-rows'>affected_rows</link> - 直近のステートメントの実行で変更された行数を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-errno'>errno</link> - 直近のステートメント関数のエラーコードを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-error'>errno</link> - 直近のステートメントｋな数のエラーメッセージを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-param-count'>param_count</link> - 指定したプリペアドステートメントのパラメータの数を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-stmt-sqlstate'>sqlstate</link> - 直近のステートメント関数の SQLSTATE エラーコードを含む文字列を返す</para>
       </listitem>
      </itemizedlist>
     </section>
    </section>

    <section id='maxdb.classes.result'>
     <title><classname>maxdb_result</classname></title>
     <para>
      データベースに対するクエリによって取得した結果セットを表します。
     </para>
     <section id='maxdb.class.result.methods'>
      &reftitle.methods;
      <itemizedlist>
       <listitem>
        <para><link linkend='function.maxdb-free-result'>close</link> - 結果セットを閉じる</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-data-seek'>data_seek</link> - 内部結果ポインタを移動する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-field'>fetch_field</link> - 結果セットからカラム情報を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-fields'>fetch_fields</link> - 結果セットの全てのカラムの情報を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-field-direct'>fetch_field_direct</link> - 指定したカラムの情報を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-array'>fetch_array</link> - 連想配列、数値添字配列あるいはその両方で結果の行を取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-assoc'>fetch_assoc</link> - 結果の行を連想配列で取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-object'>fetch_object</link> - 結果の行をオブジェクトとして取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-row'>fetch_row</link> - 結果の行を数値添字の配列で取得する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-free-result'>close</link> - 結果のメモリを開放する</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-field-seek'>field_seek</link> - 指定したフィールドオフセットに結果ポインタを移動する</para>
       </listitem>
      </itemizedlist>
     </section>
     <section id='maxdb.class.result.properties'>
      &reftitle.properties;
      <itemizedlist>
       <listitem>
        <para><link linkend='function.maxdb-field-tell'>current_field</link> - 現在のフィールドポインタのオフセットを返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-field-count'>field_count</link> - 結果セットのフィールド数を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-fetch-lengths'>lengths</link> - カラムの長さの配列を返す</para>
       </listitem>
       <listitem>
        <para><link linkend='function.maxdb-num-rows'>num_rows</link> - 結果セットの行数を返す</para>
       </listitem>
      </itemizedlist>
     </section>
    </section>
   </section>

   <section id="maxdb.resources">
    &reftitle.resources;
    <para>
     この拡張モジュールではリソースを定義しています。
    </para>
   </section>

   &reference.maxdb.constants;
    
   <section id="maxdb.examples">
   &reftitle.examples;
    <para>
     MaxDB PHP マニュアルの全ての例は、MaxDB から得られるデモデータベース HOTELDB
     を使用しています。このデータベースについての情報は
     <ulink url="&url.maxdb.sampledb;">&url.maxdb.sampledb;</ulink> で得られます。
    </para>
    <para>
     MaxDB PHP マニュアルのデータベースを使用するには、チュートリアルのデータを
     データベースに読み込む必要があります。その後、&php.ini; の中の
     maxdb.default_db に、チュートリアルデータを含むデータベースを設定します。
    </para>
    <para>
     この単純な例では、MaxDB データベースへの接続・クエリの実行・
     結果の行の表示・接続の切断の方法を示します。
     <example>
      <title>MaxDB 拡張モジュールの概要</title>
      <programlisting role="php">
<![CDATA[
<?php
$link = maxdb_connect("localhost", "MONA", "RED", "DEMODB");
   
/* 接続を調べます */
if (maxdb_connect_errno()) {
   printf("接続に失敗しました: %s\n", maxdb_connect_error());
   exit();
}

/* SQL クエリを実行します */
$query = "SELECT * FROM hotel.city";
$result = maxdb_query($link, $query) or die("クエリに失敗しました: " . maxdb_error());

/* 結果を HTML で表示します */
echo "<table>\n";
while ($line = maxdb_fetch_array($result, MAXDB_ASSOC)) {
    echo "  <tr>\n";
    foreach ($line as $col_value) {
        echo "    <td>$col_value</td>\n";
    }
    echo "  </tr>\n";
}
echo "</table>\n";

/* 結果セットを開放します */
maxdb_free_result($result);

/* 接続を閉じます */
maxdb_close($link);
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     以下の例では、SELECT INTO 文に変数をバインドする方法を示します。
     <example>
      <title>SELECT INTO 文の使用例</title>
      <programlisting role="php">
<![CDATA[
<?php
$link = maxdb_connect("localhost", "MONA", "RED", "DEMODB");

/* 接続を調べます */
if (!$link) {
   printf("接続に失敗しました: %s\n", maxdb_connect_error());
   exit();
}
   
/* SQL クエリを実行します */
$stmt = maxdb_prepare ($link, "SELECT percentage INTO ? FROM hotel.countrylanguage where language = ?");
if (!$stmt) {
  printf ("準備に失敗しました: %s\n", maxdb_error($link));
}

$name = "Mbundu";

maxdb_stmt_bind_param($stmt, 'ds', $percentage, $name);
maxdb_stmt_execute($stmt);

printf ("%f\n", $percentage);

maxdb_stmt_close ($stmt);
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     以下の例では、MaxDB のプロシージャを使用する方法を示します。
     <example>
      <title>データベースプロシージャの使用</title>
      <programlisting role="php">
<![CDATA[
<?php
$link = maxdb_connect("localhost", "MONA", "RED", "DEMODB");

/* 接続を調べます */
if (!$link) {
   printf("接続に失敗しました: %s\n", maxdb_connect_error());
   exit();
}

maxdb_report (MAXDB_REPORT_OFF);
maxdb_query($link,"DROP DBPROC test_proc");
maxdb_report (MAXDB_REPORT_ERROR);

$query = "create dbproc test_proc (INOUT e_text char(72)) AS select * from SYSDBA.DUAL; fetch into :e_text;";

maxdb_query($link, $query);

/* SQL クエリを実行します */
$stmt = maxdb_prepare ($link, "CALL test_proc (?)");
if (!$stmt) {
  printf ("準備に失敗しました: %s\n", maxdb_error($link));
}

maxdb_stmt_bind_param($stmt, 's', $result);
maxdb_stmt_execute($stmt);

printf ("%s\n", $result);

maxdb_stmt_close ($stmt);
?>
]]>
      </programlisting>
     </example>
    </para>
   </section>

  </partintro>

  &reference.maxdb.functions;

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
