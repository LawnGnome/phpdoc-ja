<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.3 $ -->
<section id="sesam.configuration">
 &reftitle.runtime;
 &extension.runtime;
 <variablelist>
  
  <varlistentry id="ini.sesam-oml">
   <term>
    <parameter>sesam_oml</parameter>
    <type>string</type>
   </term>
   <listitem>
    <para>
     ロード可能なSESAMドライバモジュールを含むBS2000 PLAM ライブラ
     リの名前。SESAM関数を使用する際に必要。BS2000 PLAMライブラリは、
     ACCESS=READ,SHARE=YES に設定する必要があります。これは、Apache
     サーバのユーザIDにより読み込み可能とする必要があるためです。
    </para>
   </listitem>
  </varlistentry>
  
  <varlistentry id="ini.sesam-configfile">
   <term>
    <parameter>sesam_configfile</parameter>
    <type>string</type>
   </term>
   <listitem>
    <para>
     SESAMアプリケーション設定ファイルの名前。SESAM関数を使用する際
     に必要。BS2000 ファイルは、ApacheのユーザIDにより読み込み可と
     する必要があります。
    </para>
    <para>
     アプリケーション設定ファイルは、通常、次のような設定を有してい
     ます。(SESAMリファレンスを参照)
     <informalexample>
      <programlisting role="bs2000">
<![CDATA[
CNF=B
NAM=K
NOTYPE
]]>
      </programlisting>
     </informalexample>
    </para>
   </listitem>
  </varlistentry>
  
  <varlistentry id="ini.sesam-messagecatalog">
   <term>
    <parameter>sesam_messagecatalog</parameter>
    <type>string</type>
   </term>
   <listitem>
    <para>
     SESAMメッセージカタログファイルの名前。多くの場合、このディレ
     クティブは不要です。SESAMメッセージファイルがシステムのBS2000
     メッセージファイルテーブルにインストールされていない場合にのみ
     このディレクティブを設定することが可能です。
    </para>
    <para>
     メッセージカタログは、ACCESS=READ,SHARE=YES に設定する必要があ
     ります。これは、Apache サーバのユーザIDから読み込み可能とする
     必要があります。
    </para>
   </listitem>
  </varlistentry>
  
 </variablelist>
 </section>
   
<section id="sesam.config-notes">
 <title>設定上の注意</title>
 <para>
  PHP SESAMインタフェースは、スタンドアロン版をサポートしていません。
  Apache モジュール版として組み込まれた場合のみ動作します。Apache
  PHP モジュールにおいて、<link linkend="sesam.configuration">SESAMイン
   タフェース</link> は、Apache 用ディレクティブにより設定されます。
  <table>
   <title>SESAM 設定用ディレクティブ</title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>ディレクティブ</entry>
      <entry>意味</entry>
        </row>
    </thead>
    <tbody>
     <row>
      <entry><literal>php3_sesam_oml</literal></entry>
      <entry>
       ロード可能なSESAMドライバモジュールが含まれるBS2000 PLAM ラ
       イブラリの名前。SESAM関数を使用するために必要。
       <para>
        例:
        <informalexample>
         <programlisting role="apache">
<![CDATA[
php3_sesam_oml $.SYSLNK.SESAM-SQL.030
]]>
         </programlisting>
        </informalexample>
       </para>
      </entry>
     </row>
     <row>
      <entry><literal>php3_sesam_configfile</literal></entry>
      <entry>
       SESAM
       SESAMアプリケーション設定ファイルの名前。SESAM関数を使用する
       際に必要。
       <para>
        例:
        <informalexample>
         <programlisting role="apache">
<![CDATA[
php3_sesam_configfile $SESAM.SESAM.CONF.AW
]]>
         </programlisting>
        </informalexample>
        通常、次のような設定が含まれます。(SESAMリファレンスマニュ
        アルを参照)
        <informalexample>
         <programlisting role="bs2000">
<![CDATA[
CNF=B
NAM=K
NOTYPE
]]>
         </programlisting>
        </informalexample>
       </para>
      </entry>
     </row>
     <row>
      <entry><literal>php3_sesam_messagecatalog</literal></entry>
      <entry>
       SESAMメッセージカタログファイルの名前。多くの場合、このディ
       レクティブは不要です。SESAMメッセージファイルがシステム
       BS2000メッセージファイルてーぶりにインストールされていない場
       合にのみ、このディレクティブを設定することが可能です。
       <para>
        例:
        <informalexample>
         <programlisting role="apache">
<![CDATA[
php3_sesam_messagecatalog $.SYSMES.SESAM-SQL.030
]]>
         </programlisting>
        </informalexample>
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>
 </para>
 <para>
  PHP/SESAMインターフェースの設定に加えて、メインフレーム上のSESAM
  データベースサーバー自体を設定する必要があります。これは、次のよ
  うになります。
  <itemizedlist>
   <listitem>
    <simpara>
     SESAMデータベースハンドラ(DBH)を開始
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     SESAMデータベースハンドラを指定して、データベースに接続
    </simpara>
   </listitem>
  </itemizedlist>
 </para>
 <para>
  PHPスクリプトとデータベースハンドラの間の接続を得るには、選択した
  SESAM設定ファイルのパラメータ <literal>CNF</literal> および
  <literal>NAM</literal> が実行中のデータベースハンドラのIDに一致し
  ている必要があります。
 </para>
 <para>
  分散型データベースの場合、ホストおよびデータベース名を有する分配
  テーブルを指定してSESAM/SQL-DCNエージェントを開始する必要がありま
  す。
 </para>
 <para>
  (POSIXサブシステムで実行されている)PHPと(POSIXサブシステムの外で
  実行されている)データベースハンドラの間の通信は、SQLSCIという名前
  の特別なドライバモジュールと通常メモリを使用するSESAM接続モジュー
  ルで実現されます。通常メモリアクセスのため、そして、PHPはWebサー
  バの静的部分であるため、ODBC、JDBC、UTM経由のリモートアクセスは不
  要であり、データベースへのアクセスは非常に高速です。
 </para>
 <para>
  スモールスタブローダ(SESMOD)のみがPHPにリンクされており、SESAM接
  続モジュールはSESAMのOML PLAMライブラリからロードされます。
  <link linkend="sesam.configuration">設定</link>の際、このPLAMライブラ
  リの名前とSESAM設定ファイルを使用するためのファイルリンクをPHPに
  指定する必要があります。(SESAM V3.0 において、SQLSCI は標準配布の
  SESAMツールライブラリから入手可能です)
 </para>
 <para>
  SQLコマンドにおけるシングルクオートのクオートは、(シングルクオー
  トの前にバックスラッシュを付加するのではなく、)シングルクオートを
  2つ重ねて使用するため、SESAMインターフェースを使用する全てのPHPス
  クリプトについて、PHP設定ディレクティブで <link
   linkend="ini.magic-quotes-gpc"><literal>php3_magic_quotes_gpc</literal></link>
  および <link linkend="ini.magic-quotes-sybase">
   <literal>php3_magic_quotes_sybase</literal></link> を
  <literal>On</literal> にしておく方が賢明でしょう。
 </para>
 </section>
 
 <section id="sesam.runtime">
 <title>実行時の考慮</title>
 <para>
  BS2000 モデルの制限のために、ドライバは、Apache サーバがそのサー
  バの子プロセスをフォークした後にのみロード可能となります。これは、
  各子プロセスの最初のSESAMリクエストを若干遅くしますが、その後のア
  クセスへの応答は最高速度となります。
 </para>
 <para>
  SESAM用の明示的にメッセージカタログを定義した場合、そのカタログは
  ドライバがロードされる度(すなわち、最初のSESAMリクエスト時に)にロー
  ドされます。BS2000 オペレーティングシステムはメッセージカタログの
  ロードに成功した後にメッセージを出力します。このメッセージは、
  Apacheのerror_logファイルに送信されます。BS2000は現在、このメッセー
  ジの出力を停止することができません。このため、ログを段々と埋めて
  いきます。
 </para>
 <para>
  SESAM OML PLAM ライブラリとSESAM設定ファイルは、Webサーバを実行し
  ているユーザIDから読み込み可能であることを確認して下さい。そうで
  ない場合、サーバはドライバをロードすることができず、SESAM関数をコー
  ルすることができません。また、Apacheサーバを実行しているユーザID
  にデータベースへのアクセスが許可されている必要があります。そうで
  ない場合、SESAMデータベースハンドラへの接続は失敗します。
 </para>

</section>


<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
