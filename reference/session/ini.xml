<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.1 $ -->
<section id="session.configuration">
 &reftitle.runtime;
 &extension.runtime;
 <para>
 <table>
  <title>セッションの設定オプション</title>
  <tgroup cols="3">
   <thead>
    <row>
     <entry>名前</entry>
     <entry>デフォルト</entry>
     <entry>変更の可否</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>session.save_path</entry>
     <entry>"/tmp"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.name</entry>
     <entry>"PHPSESSID"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.save_handler</entry>
     <entry>"files"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.auto_start</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.gc_probability</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.gc_maxlifetime</entry>
     <entry>"1440"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.serialize_handler</entry>
     <entry>"php"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_lifetime</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_path</entry>
     <entry>"/"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_domain</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_secure</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.use_cookies</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.use_only_cookies</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.referer_check</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.entropy_file</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.entropy_length</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cache_limiter</entry>
     <entry>"nocache"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cache_expire</entry>
     <entry>"180"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.use_trans_sid</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_SYSTEM|PHP_INI_PERDIR</entry>
    </row>
    <row>
     <entry>url_rewriter.tags</entry>
     <entry>"a=href,area=href,frame=src,input=src,form=fakeentry"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    
<!-- Not yet
    <row>
     <entry>session.encode_sources</entry>
     <entry>"globals</entry>
     <entry>track"</entry>
    </row>
-->

   </tbody>
  </tgroup>
 </table>
  PHP_INI_* 定数の詳細と定義については、
  <function>ini_set</function>を参照して下さい。
 </para>
 <para>
  セッション管理システムは、&php.ini;ファイルに記述可能な多くの設定オ
  プションをサポートします。以下に概要を示します。
 <variablelist>

  <varlistentry id="ini.session.save-handler">
   <term>
    <parameter>session.save_handler</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
      <literal>session.save_handler</literal> は、セッションに関連す
      るデータの保存および取得に使用されるハンドル名を定義します。デ
      フォルトは、<literal>files</literal>です。
      <function>session_set_save_handler</function>も参照して下さい。
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.save-path">
   <term>
    <parameter>session.save_path</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
      <literal>session.save_path</literal> は、保存ハンドラに渡される
      引数を定義します。デフォルトのファイルハンドラを選択した場合、
      ファイルが作成される場所のパスになります。デフォルトは、
      <literal>/tmp</literal> です。
      <literal>session.save_path</literal>のパスの深さが2より大きい場
      合、ガーベッジコレクションは行われません。
      <function>session_save_path</function>も参照して下さい。
     </simpara>
     <warning>
      <para>
       この設定を<filename>/tmp</filename> (デフォルト)のようにどこか
       らでも読み込み可能なディレクトリのままにしている場合、サーバ上
       の他のユーザがこのディレクトリのファイルのリストを取得すること
       により、セッションをハイジャックをすることが可能となります。
      </para>
     </warning>
     <note>
      <simpara>
       WindowsユーザがPHPのsession関数を使用するためには、この変数を変
       更する必要があります。<filename>c:/temp</filename>のような有効
       なパスを指定するようにして下さい。
      </simpara>
     </note>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.name">
    <term>
     <parameter>session.name</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.name</literal> はセッション名を指定し、
      クッキー名として使用されます。
      アルファベット文字のみで指定する必要があります。
      デフォルトは、<literal>PHPSESSID</literal> です。
      <function>session_name</function>も参照して下さい。
     </simpara>
    </listitem>
   </varlistentry>
  
   <varlistentry id="ini.session.auto-start">
    <term>
     <parameter>session.auto_start</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.auto_start</literal> はリクエスト開始時に
      セッションモジュールがセッションを自動的に開始するかどうかを
      指定します。デフォルトは、<literal>0</literal>(無効)です。
     </simpara>
    </listitem>
   </varlistentry>

  <varlistentry id="ini.session.serialize-handler">
   <term>
    <parameter>session.serialize_handler</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
      <literal>session.serialize_handler</literal> は、シリアル化また
      はシリアル化データを復元するために使用されるハンドラの名前を定
      義します。現在、( <literal>php</literal>という名前の)PHP 内部
      フォーマットおよび(<literal>wddx</literal>という名前の)WDDX が
      サポートされています。WDDXは、PHP が<link
       linkend="ref.wddx">WDDX サポート</link> を有効にしてコンパイル
      されている場合のみ使用可能です。デフォルトは、
      <literal>php</literal> です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.gc-probability">
    <term>
     <parameter>session.gc_probability</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.gc_probability</literal> は、gc (ガーベッジ・
      コレクション)ルーチンが各リクエストにおいて開始される確率をパー
      セントで指定します。デフォルトは、<literal>1</literal> です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.gc-maxlifetime">
   <term>
     <parameter>session.gc_maxlifetime</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.gc_maxlifetime</literal> は、データが'ごみ'と
      みなされてから消去されるまでの秒数を指定します。
     </simpara>
     <note>
      <simpara>
       デフォルトのファイルに基づくセッションハンドラを使用している場
       合、使用するファイルシステムは、アクセス時間(atime)を記録できる
       必要があります。Windows FATはこれができないため、
       FATファイルシステムまたはatimeの記録ができない他のファイルシス
       テムで問題を発生した場合は、セッションのガベージコレクト処理を
       行う他の手段を用意する必要があります。
      </simpara>
     </note>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.referer-check">
    <term>
     <parameter>session.referer_check</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.referer_check</literal> には、HTTP Referer に
       おいて確認を行う文字列を指定します。Refererがクライアントにより
      送信されており、かつ、指定した文字列が見付からない場合、埋め込
       まれたセッションIDは無効となります。デフォルトは空の文字列です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.entropy-file">
    <term>
     <parameter>session.entropy_file</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.entropy_file</literal> は、
      セッションIDを作成する際の別のエントロピソースとして使用する
      外部リソースへのパスを指定します。
      例としては、多くの UNIX で利用可能な <literal>/dev/random</literal> 
      または <literal>/dev/urandom</literal> があげられます。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.entropy-length">
    <term>
     <parameter>session.entropy_length</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.entropy_length</literal> は、前記のファイルから
      読みこむバイト数を指定します。デフォルトは、<literal>0</literal>
      (無効)です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.use-cookies">
    <term>
     <parameter>session.use_cookies</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.use_cookies</literal>によりクライアント側にセッ
      ションIDを保存する際にクッキーを使用するかどうかを指定します。デ
      フォルトは<literal>1</literal> (有効)です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.use-only_cookies">
    <term>
     <parameter>session.use_only_cookies</parameter>
     <type>boolean</type>
    </term>
    <listitem>
    <simpara>
      <literal>session.use_only_cookies</literal>は、
      このモジュールがクライアント側へのセッションIDの保存に
      Cookie<emphasis role="strong">のみ</emphasis>を使用することを指
      定します。デフォルトは、<literal>0</literal> (無効、下位互換性の
      ため)です。この設定を有効にすることにより、セッションIDをURLに埋
      め込む攻撃を防ぐことができます。この設定は、
      <literal>PHP</literal> 4.3.0で追加されました。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-lifetime">
    <term>
     <parameter>session.cookie_lifetime</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cookie_lifetime</literal>は、ブラウザに送信す
      るクッキーの有効期間を秒単位で指定します。値0は、"ブラウザを閉じ
      るまで"を意味します。デフォルトは、<literal>0</literal>です。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照して下さい。
    </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-path">
    <term>
     <parameter>session.cookie_path</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
       <literal>session.cookie_path</literal>によりsession_cokkieで設
       定するパスを指定します。デフォルトは<literal>/</literal>です。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照して下さい。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-domain">
    <term>
     <parameter>session.cookie_domain</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
       <literal>session.cookie_domain</literal>によりsession_cookieで
       指定するドメインを指定します。デフォルトでは指定されません。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照して下さい。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-secure">
    <term>
     <parameter>session.cookie_secure</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cookie_secure</literal>は、
      セキュアな接続を通じてのみCookieを送信できるかどうかを指定します。
      デフォルトは、<literal>off</literal>です。
      この設定は、<literal>PHP</literal> 4.0.4で追加されました。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照して下さい。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cache-limiter">
    <term>
     <parameter>session.cache_limiter</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cache_limiter</literal>により
      セッションページにおけるキャッシュ制御の方法
      (none/nocache/private/private_no_expire/public)
      を指定します。デフォルトは、<literal>nocache</literal>です。
      <function>session_cache_limiter</function>も参照して下さい。
     </simpara>
    </listitem>
   </varlistentry>

   <varlistentry id="ini.session.cache-expire">
    <term>
     <parameter>session.cache_expire</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cache_expire</literal>によりキャッシュされた
      セッションページの有効期間を分単位で指定します。
      このオプションは、nocacheリミッタに関しては効果がありません。
      デフォルトは、<literal>180</literal>です。
      <function>session_cache_expire</function>も参照して下さい。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.use-trans_sid">
    <term>
     <parameter>session.use_trans_sid</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.use_trans_sid</literal>は、透過的なセッション
      IDの付加をするかどうかを指定します。
      デフォルトは、<literal>0</literal>(無効)です。
     </simpara>
     <note>
      <simpara>
       PHP 4.1.2より前のバージョンでは、このオプションは
       <link linkend="install.configure.enable-trans-sid">
        <literal>--enable-trans-sid</literal></link>により
       コンパイル時に有効とされていました。
       PHP 4.2.0以降、trans-sid機能は常にコンパイルされます。
      </simpara>
      <simpara>
       URLに基づくセッション管理は、Cookieに基づくセッション管理と比べ
       てセキュリティリスクが大きくなります。例えば、ユーザは、emailに
       より友人にアクティブなセッションIDを含むURLを送信する可能性があ
       り、また、ユーザは自分のブックマークにセッションIDを含むURLを保
       存し、常に同じセッションIDで使用するサイトにアクセスする可能性
       があります。
      </simpara>
     </note>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.url-rewriter.tags">
    <term>
    <parameter>url_rewriter.tags</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>url_rewriter.tags</literal>は、透過的なセッションIDの
      付加機能が有効となった場合に、セッションIDを含めるために書き換
      えられるHTMLタグを指定します。デフォルトは、
      <literal>a=href,area=href,frame=src,input=src,form=fakeentry</literal>
      です。
     </simpara>
    </listitem>
   </varlistentry>
  </variablelist>
 </para>
 
 <para>
  <link
   linkend="ini.track-vars"><literal>track_vars</literal></link>および
  <link
   linkend="ini.register-globals"><literal>register_globals</literal></link>
  設定はセッション変数の保存および回復方法に影響を与えます。
 </para>

 <note>
  <para>
   PHP 4.0.3以降、<link
   linkend="ini.track-vars"><literal>track_vars</literal></link> は常
   にonとなっています。
  </para>
 </note>

</section>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

