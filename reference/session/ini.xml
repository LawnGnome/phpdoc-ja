<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.7 $ -->
<!-- EN-Revision: 1.26 Maintainer: hirokawa Status: ready -->
<section id="session.configuration">
 &reftitle.runtime;
 &extension.runtime;
 <para>
 <table>
  <title>セッションの設定オプション</title>
  <tgroup cols="3">
   <thead>
    <row>
     <entry>名前</entry>
     <entry>デフォルト</entry>
     <entry>変更の可否</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>session.save_path</entry>
     <entry>"/tmp"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.name</entry>
     <entry>"PHPSESSID"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.save_handler</entry>
     <entry>"files"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.auto_start</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.gc_probability</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.gc_divisor</entry>
     <entry>"100"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.gc_maxlifetime</entry>
     <entry>"1440"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.serialize_handler</entry>
     <entry>"php"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_lifetime</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_path</entry>
     <entry>"/"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_domain</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cookie_secure</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.use_cookies</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.use_only_cookies</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.referer_check</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.entropy_file</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.entropy_length</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cache_limiter</entry>
     <entry>"nocache"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.cache_expire</entry>
     <entry>"180"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.use_trans_sid</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_SYSTEM|PHP_INI_PERDIR</entry>
    </row>
    <row>
     <entry>session.bug_compat_42</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.bug_compat_warn</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.hash_function</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>session.hash_bits_per_character</entry>
     <entry>"4"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    <row>
     <entry>url_rewriter.tags</entry>
     <entry>"a=href,area=href,frame=src,input=src,form=fakeentry"</entry>
     <entry>PHP_INI_ALL</entry>
    </row>
    
<!-- Not yet
    <row>
     <entry>session.encode_sources</entry>
     <entry>"globals</entry>
     <entry>track"</entry>
    </row>
-->

   </tbody>
  </tgroup>
 </table>
  PHP_INI_* 定数の詳細と定義については、
  <function>ini_set</function>を参照してください。
 </para>
 <para>
  セッション管理システムは、&php.ini;ファイルに記述可能な多くの設定オ
  プションをサポートします。以下に概要を示します。
 <variablelist>

  <varlistentry id="ini.session.save-handler">
   <term>
    <parameter>session.save_handler</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
      <literal>session.save_handler</literal> は、セッションに関連す
      るデータの保存および取得に使用されるハンドル名を定義します。デ
      フォルトは、<literal>files</literal>です。
      <function>session_set_save_handler</function>も参照してください。
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.save-path">
   <term>
    <parameter>session.save_path</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
      <literal>session.save_path</literal> は、保存ハンドラに渡される
      引数を定義します。デフォルトのファイルハンドラを選択した場合、
      ファイルが作成される場所のパスになります。デフォルトは、
      <literal>/tmp</literal> です。
      <literal>session.save_path</literal>のパスの深さが2より大きい場
      合、ガーベッジコレクションは行われません。
      <function>session_save_path</function>も参照してください。
     </simpara>
    <para>
     オプションの引数としてN（数値）を指定できます。
     これはセッションファイルを分散して保存する際に
     ディレクトリ階層レベルを決定します。
     例えば、<literal>'5;/tmp'</literal>とすると
     <literal>/tmp/4/b/1/e/3/sess_4b1e384ad74619bd212e236e52a5a174If</literal>
     という位置にセッションファイルを生成します。
     Nを使用するには、これらすべてのディレクトリが
     事前に作成されている必要があります。
     そのためのシェルスクリプトが<filename>ext/session</filename>に
     <filename>mod_files.sh</filename>というファイル名であります。
     また、0以上のNが指定されている場合には自動ガーベッジコレクション
     が機能しないことに注意してください。詳細は &php.ini; を見てください。
     また、Nを指定する場合は、
     <literal>session.save_path</literal>を"quotes"で囲う必要があります。
     なぜならセパレータ(<literal>;</literal>) は
     &php.ini; ではコメントとしても利用されているからです。
    </para>
     <warning>
      <para>
       この設定を<filename>/tmp</filename> (デフォルト)のようにどこか
       らでも読み込み可能なディレクトリのままにしている場合、サーバ上
       の他のユーザがこのディレクトリのファイルのリストを取得すること
       により、セッションをハイジャックをすることが可能となります。
      </para>
     </warning>
     <note>
      <simpara>
       WindowsユーザがPHPのsession関数を使用するためには、この変数を変
       更する必要があります。<filename>c:/temp</filename>のような有効
       なパスを指定するようにしてください。
      </simpara>
     </note>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.name">
    <term>
     <parameter>session.name</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.name</literal> はセッション名を指定し、
      クッキー名として使用されます。
      アルファベット文字のみで指定する必要があります。
      デフォルトは、<literal>PHPSESSID</literal> です。
      <function>session_name</function>も参照してください。
     </simpara>
    </listitem>
   </varlistentry>
  
   <varlistentry id="ini.session.auto-start">
    <term>
     <parameter>session.auto_start</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.auto_start</literal> はリクエスト開始時に
      セッションモジュールがセッションを自動的に開始するかどうかを
      指定します。デフォルトは、<literal>0</literal>(無効)です。
     </simpara>
    </listitem>
   </varlistentry>

  <varlistentry id="ini.session.serialize-handler">
   <term>
    <parameter>session.serialize_handler</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
      <literal>session.serialize_handler</literal> は、シリアル化また
      はシリアル化データを復元するために使用されるハンドラの名前を定
      義します。現在、( <literal>php</literal>という名前の)PHP 内部
      フォーマットおよび(<literal>wddx</literal>という名前の)WDDX が
      サポートされています。WDDXは、PHP が<link
       linkend="ref.wddx">WDDX サポート</link> を有効にしてコンパイル
      されている場合のみ使用可能です。デフォルトは、
      <literal>php</literal> です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.gc-probability">
    <term>
     <parameter>session.gc_probability</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.gc_probability</literal>と
      <literal>session.gc_divisor</literal>の組み合わせでgc
     （ガーベッジコレクション）ルーチンの始動を制御します。
      デフォルトは、<literal>1</literal> です。
      詳細は<link
      linkend="ini.session.gc-divisor">session.gc_divisor</link>
      をご覧ください
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.gc-divisor">
    <term>
     <parameter>session.gc_divisor</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.gc_divisor</literal>と
      <literal>session.gc_probability</literal>の組み合わせで
      すべてのセッションの初期化過程でgc（ガーベッジコネクション）プロセス
      も始動する確率を制御します。確率は gc_probability/gc_divisor 
      で計算されます。例えば、1/100は各リクエスト毎に1%の確率でGCプロセスが
      始動します。
      <literal>session.gc_divisor</literal>のデフォルトは<literal>100</literal>です。
     </simpara>
    </listitem>
   </varlistentry>

   <varlistentry id="ini.session.gc-maxlifetime">
   <term>
     <parameter>session.gc_maxlifetime</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.gc_maxlifetime</literal> は、データが'ごみ'と
      みなされ、消去されるまでの秒数を指定します。
     </simpara>
     <note>
      <simpara>
       デフォルトのファイルに基づくセッションハンドラを使用している場
       合、使用するファイルシステムは、アクセス時間(atime)を記録できる
       必要があります。Windows FATはこれができないため、
       FATファイルシステムまたはatimeの記録ができない他のファイルシス
       テムで問題を発生した場合は、セッションのガベージコレクト処理を
       行う他の手段を用意する必要があります。
       PHP4.2.3以降、atimeの代わりにmtime（更新時刻）が使用されます。
       このため、atimeが利用できないファイルシステムでの問題は無くなりました。
      </simpara>
     </note>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.referer-check">
    <term>
     <parameter>session.referer_check</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.referer_check</literal> には、HTTP Referer に
       おいて確認を行う文字列を指定します。Refererがクライアントにより
      送信されており、かつ、指定した文字列が見付からない場合、埋め込
       まれたセッションIDは無効となります。デフォルトは空の文字列です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.entropy-file">
    <term>
     <parameter>session.entropy_file</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.entropy_file</literal> は、
      セッションIDを作成する際の別のエントロピソースとして使用する
      外部リソースへのパスを指定します。
      例としては、多くの UNIX で利用可能な <literal>/dev/random</literal> 
      または <literal>/dev/urandom</literal> があげられます。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.entropy-length">
    <term>
     <parameter>session.entropy_length</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.entropy_length</literal> は、前記のファイルから
      読みこむバイト数を指定します。デフォルトは、<literal>0</literal>
      (無効)です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.use-cookies">
    <term>
     <parameter>session.use_cookies</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.use_cookies</literal>によりクライアント側にセッ
      ションIDを保存する際にクッキーを使用するかどうかを指定します。デ
      フォルトは<literal>1</literal> (有効)です。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.use-only_cookies">
    <term>
     <parameter>session.use_only_cookies</parameter>
     <type>boolean</type>
    </term>
    <listitem>
    <simpara>
      <literal>session.use_only_cookies</literal>は、
      このモジュールがクライアント側へのセッションIDの保存に
      Cookie<emphasis role="strong">のみ</emphasis>を使用することを指
      定します。デフォルトは、<literal>0</literal> (無効、下位互換性の
      ため)です。この設定を有効にすることにより、セッションIDをURLに埋
      め込む攻撃を防ぐことができます。この設定は、
      <literal>PHP</literal> 4.3.0で追加されました。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-lifetime">
    <term>
     <parameter>session.cookie_lifetime</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cookie_lifetime</literal>は、ブラウザに送信す
      るクッキーの有効期間を秒単位で指定します。値0は、"ブラウザを閉じ
      るまで"を意味します。デフォルトは、<literal>0</literal>です。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照してください。
    </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-path">
    <term>
     <parameter>session.cookie_path</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
       <literal>session.cookie_path</literal>によりsession_cookieで設
       定するパスを指定します。デフォルトは<literal>/</literal>です。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照してください。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-domain">
    <term>
     <parameter>session.cookie_domain</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
       <literal>session.cookie_domain</literal>によりsession_cookieで
       指定するドメインを指定します。デフォルトでは指定されません。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照してください。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cookie-secure">
    <term>
     <parameter>session.cookie_secure</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cookie_secure</literal>は、
      セキュアな接続を通じてのみCookieを送信できるかどうかを指定します。
      デフォルトは、<literal>off</literal>です。
      この設定は、<literal>PHP</literal> 4.0.4で追加されました。
      <function>session_get_cookie_params</function>および
      <function>session_set_cookie_params</function>も参照してください。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.cache-limiter">
    <term>
     <parameter>session.cache_limiter</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cache_limiter</literal>により
      セッションページにおけるキャッシュ制御の方法
      (none/nocache/private/private_no_expire/public)
      を指定します。デフォルトは、<literal>nocache</literal>です。
      <function>session_cache_limiter</function>も参照してください。
     </simpara>
    </listitem>
   </varlistentry>

   <varlistentry id="ini.session.cache-expire">
    <term>
     <parameter>session.cache_expire</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.cache_expire</literal>によりキャッシュされた
      セッションページの有効期間を分単位で指定します。
      このオプションは、nocacheリミッタに関しては効果がありません。
      デフォルトは、<literal>180</literal>です。
      <function>session_cache_expire</function>も参照してください。
     </simpara>
    </listitem>
   </varlistentry>
   
   <varlistentry id="ini.session.use-trans_sid">
    <term>
     <parameter>session.use_trans_sid</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <simpara>
      <literal>session.use_trans_sid</literal>は、透過的なセッション
      IDの付加をするかどうかを指定します。
      デフォルトは、<literal>0</literal>(無効)です。
     </simpara>
     <note>
      <simpara>
       PHP 4.1.2より前のバージョンでは、このオプションは
       <link linkend="install.configure.enable-trans-sid">
        <literal>--enable-trans-sid</literal></link>により
       コンパイル時に有効とされていました。
       PHP 4.2.0以降、trans-sid機能は常にコンパイルされます。
      </simpara>
      <simpara>
       URLに基づくセッション管理は、Cookieに基づくセッション管理と比べ
       てセキュリティリスクが大きくなります。例えば、ユーザは、emailに
       より友人にアクティブなセッションIDを含むURLを送信する可能性があ
       り、また、ユーザは自分のブックマークにセッションIDを含むURLを保
       存し、常に同じセッションIDで使用するサイトにアクセスする可能性
       があります。
      </simpara>
     </note>
    </listitem>
   </varlistentry>
   
  <varlistentry id="ini.session.bug-compat-42">
   <term>
    <parameter>session.bug_compat_42</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     PHP versions 4.2.0 and lower have an undocumented feature/bug that
     allows you to to initialize a session variable in the global scope,
     albeit <link linkend="ini.register-globals">register_globals</link>
     is disabled.  PHP 4.3.0 and later will warn you, if this feature is
     used, and if <link linkend="ini.session.bug-compat-warn">
     session.bug_compat_warn</link> is also enabled.  
    </simpara>
   </listitem>
  </varlistentry>
  
  <varlistentry id="ini.session.bug-compat-warn">
   <term>
    <parameter>session.bug_compat_warn</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     PHP versions 4.2.0 and lower have an undocumented feature/bug that
     allows you to to initialize a session variable in the global scope,
     albeit <link linkend="ini.register-globals">register_globals</link>
     is disabled.  PHP 4.3.0 and later will warn you, if this feature is
     used by enabling both 
     <link linkend="ini.session.bug-compat-42">session.bug_compat_42</link>
     and <link linkend="ini.session.bug-compat-warn">
     session.bug_compat_warn</link>.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.hash-function">
   <term>
    <parameter>session.hash_function</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.hash_function</literal> allows you to specify the hash
     algorithm used to generate the session IDs. '0' means MD5 (128 bits) and
     '1' means SHA-1 (160 bits).
    </simpara>
    <note>
     <para>
      This was introduced in PHP 5.
     </para>
    </note>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.hash-bits-per-character">
   <term>
    <parameter>session.hash_bits_per_character</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.hash_bits_per_character</literal> allows you to define
     how many bits are stored in each character when converting the binary
     hash data to something readable. The possible values are '4' (0-9, a-f),
     '5' (0-9, a-v), and '6' (0-9, a-z, A-Z, "-", ",").
    </simpara>
    <note>
     <para>
      This was introduced in PHP 5.
     </para>
    </note>
   </listitem>
  </varlistentry>

   <varlistentry id="ini.url-rewriter.tags">
    <term>
    <parameter>url_rewriter.tags</parameter>
     <type>string</type>
    </term>
    <listitem>
     <simpara>
      <literal>url_rewriter.tags</literal>は、透過的なセッションIDの
      付加機能が有効となった場合に、セッションIDを含めるために書き換
      えられるHTMLタグを指定します。デフォルトは、
      <literal>a=href,area=href,frame=src,input=src,form=fakeentry,fieldset=</literal>
      です。
     </simpara>
    <note>
     <simpara>
      XHTML に適合させたい場合には <literal>form</literal> エントリは削除し、
      formフィールドの前後に&lt;fieldset&gt; タグを使ってください。
     </simpara>
    </note>
    </listitem>
   </varlistentry>
  </variablelist>
 </para>
 
 <para>
  <link
   linkend="ini.track-vars"><literal>track_vars</literal></link>および
  <link
   linkend="ini.register-globals"><literal>register_globals</literal></link>
  設定はセッション変数の保存および回復方法に影響を与えます。
 </para>

 <note>
  <para>
   PHP 4.0.3以降、<link
   linkend="ini.track-vars"><literal>track_vars</literal></link> は常
   にonとなっています。
  </para>
 </note>

</section>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

