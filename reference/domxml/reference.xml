<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.9 $ -->
<!-- EN-Revision: 1.22 Maintainer: hirokawa Status: ready -->
<!-- CREDITS: shimooka -->
<!-- Purpose: xml -->
<!-- Membership: pecl, external -->

 <reference id="ref.domxml">
  <title>DOM XML 関数</title>
  <titleabbrev>DOM XML</titleabbrev>

  <partintro>
   <section id="domxml.intro">
    &reftitle.intro;
    <para>
     domxml 拡張モジュールは、DOM 標準に対する互換性を改善するため PHP
     バージョン 4.3.0 で書き直されました。拡張モジュールには
     まだ多くの古い関数が含まれていますが、使用は推奨されません。
     特にオブジェクト指向でない関数の使用は避けるべきです。
    </para>
    <para>
     拡張モジュールにより、DOM API で XML ドキュメントを処理することが
     可能となります。また、完全な XML ドキュメントを PHP オブジェクトツリーに
     変換する関数 <function>domxml_xmltree</function> も提供されています。
     現在、このツリーは読み込み専用とされています。
     このツリーを修正することは可能ですが、<function>DomDocument_dump_mem</function>
     にこれを適用することはできないため、意味はないでしょう。
     XML ファイルを読み込んで修正した版を書き込みたい場合は
     <function>DomDocument_create_element</function>、
     <function>DomDocument_create_text</function>、
     <function>set_attribute</function> 等を使用し、最後に
     <function>DomDocument_dump_mem</function> 関数を使用してください。
    </para>
    <note>
     <para>
      &pecl.moved-ver;5.0.0.
     </para>
    </note>
    <note>
     <simpara>
      この拡張は実験的なものではありません。しかしながら、PHP 5 版は決してリリースされないでしょう。PHP 4 でのみ配布されます。
      もし PHP 5 でDOM XML をサポートする必要がある場合、
      <link linkend="ref.dom">DOM</link> 拡張を使用することができます。
      この <literal>domxml</literal> 拡張は <link linkend="ref.dom">DOM</link>
      拡張と互換性はありません。
     </simpara>
    </note>
   </section>

   <section id="domxml.requirements">
    &reftitle.required;
    <para>
     この拡張モジュールは、<ulink url="&url.libxml;">GNOME XML
     ライブラリ</ulink>を使用します。このライブラリをダウンロードし、
     インストールしてください。少なくとも libxml-2.4.14 が必要です。
     DOM XSLT 機能を使用するために <ulink url="&url.libxslt;">libxslt
     ライブラリ</ulink>と <ulink url="&url.exslt;">&url.exslt;</ulink>
     による EXSLT 拡張を使用することができます。
     (拡張) XSLT 機能を使用するには、これらのライブラリをダウンロード、
     インストールしてください。少なくとも libxslt-1.0.18 が必要です。
    </para>
   </section>

   &reference.domxml.configure;

   <section id="domxml.deprecated">
    <title>古い関数</title>
    <para>
     DOM 標準に沿っておらず、もう使うべきではない関数がごく少数あります。
     これらの関数を以下の表に示します。
     関数 <function>DomNode_append_child</function> はその動作が変更されました。
     この関数は、子を追加しますが、兄弟は追加しません。
     これにより、アプリケーションの動作に影響が生じる場合、DOM ではない関数
     <function>DomNode_append_sibling</function> を使用してください。
    </para>
    <para>
    <table>
     <title>古い関数とその代替関数</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>古い関数</entry>
        <entry>新しい関数</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>xmldoc</entry>
        <entry><function>domxml_open_mem</function></entry>
       </row>
       <row>
        <entry>xmldocfile</entry>
        <entry><function>domxml_open_file</function></entry>
       </row>
       <row>
        <entry>domxml_new_xmldoc</entry>
        <entry><function>domxml_new_doc</function></entry>
       </row>
       <row>
        <entry>domxml_dump_mem</entry>
        <entry><function>DomDocument_dump_mem</function></entry>
       </row>
       <row>
        <entry>domxml_dump_mem_file</entry>
        <entry><function>DomDocument_dump_file</function></entry>
       </row>
       <row>
        <entry>DomDocument_dump_mem_file</entry>
        <entry><function>DomDocument_dump_file</function></entry>
       </row>
       <row>
        <entry>DomDocument_add_root</entry>
        <entry>
          <function>DomDocument_create_element</function>の後に
          <function>DomNode_append_child</function>
         </entry>
       </row>
       <row>
        <entry>DomDocument_dtd</entry>
        <entry><function>DomDocument_doctype</function></entry>
       </row>
       <row>
        <entry>DomDocument_root</entry>
        <entry><function>DomDocument_document_element</function></entry>
       </row>
       <row>
        <entry>DomDocument_children</entry>
        <entry><function>DomNode_child_nodes</function></entry>
       </row>
       <row>
        <entry>DomDocument_imported_node</entry>
        <entry>代替関数なし。</entry>
       </row>
       <row>
        <entry>DomNode_add_child</entry>
        <entry>
          例えば <function>DomDocument_create_element</function> により、
          新しいノードを作成し、
          <function>DomNode_append_child</function> により追加します。
        </entry>
       </row>
       <row>
        <entry>DomNode_children</entry>
        <entry><function>DomNode_child_nodes</function></entry>
       </row>
       <row>
        <entry>DomNode_parent</entry>
        <entry><function>DomNode_parent_node</function></entry>
       </row>
       <row>
        <entry>DomNode_new_child</entry>
        <entry>
         例えば <function>DomDocument_create_element</function> で
         新規ノードを作成し、
         <function>DomNode_append_child</function> で追加します。
        </entry>
       </row>
       <row>
        <entry>DomNode_set_content</entry>
        <entry>
         例えば <function>DomDocument_create_element</function> で
         新規ノードを作成し、
         <function>DomNode_append_child</function> で追加します。
        </entry>
       </row>
       <row>
        <entry>DomNode_get_content</entry>
        <entry>
         コンテンツは単なるテキストノードであり、
         <function>DomNode_child_nodes</function> でアクセス可能です。
        </entry>
       </row>
       <row>
        <entry>DomNode_set_content</entry>
        <entry>
         コンテンツは単なるテキストノードであり、
         <function>DomNode_append_child</function> で追加できます。
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>
   </section>

   &reference.domxml.constants;

   <section id="domxml.classes">
    <title>クラス</title>
    <para>
     モジュールの API は、DOM レベル 2 標準に可能な限り基づいています。
     結果的に API は完全にオブジェクト指向です。このモジュールを使用する際に
     DOM 標準が利用できることは望ましいことです。
     この API はオブジェクト指向ですが、
     最初の引数として処理するオブジェクトを渡すことによってコールできる、
     オブジェクト指向でない関数も多くあります。
     これらの関数は、主に過去のバージョンとの互換性確保のために維持されていますが、
     新規開発での使用はもはや推奨されません。
    </para>
    <para>
     この API は、公式な DOM API とは二つの点で異なっています。まず、
     全てのクラスの属性は、同じ名前を有する関数として実装され、関数名は PHP
     の命名表記に基づいています。これは、DOM 関数 lastChild() が
     last_child() と書かれることを意味します。
    </para>
    <para>
     このモジュールは、一連のクラスを定義します。メソッドも含めたリストを
     以下の表に示します。クラスは、DOM 標準で DOMxxx という名前のものと等価です。
    </para>

    <para>
    <table>
     <title>クラスの一覧</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>クラス名</entry>
        <entry>親クラス</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>DomAttribute</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomCData</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomComment</entry>
        <entry>DomCData : DomNode</entry>
       </row>
       <row>
        <entry>DomDocument</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomDocumentType</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomElement</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomEntity</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomEntityReference</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomProcessingInstruction</entry>
        <entry>DomNode</entry>
       </row>
       <row>
        <entry>DomText</entry>
        <entry>DomCData : DomNode</entry>
       </row>
       <row>
        <entry>Parser</entry>
        <entry>現在はまだ DomParser と呼ばれています</entry>
       </row>
       <row>
        <entry>XPathContext</entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomDocument クラス (DomDocument : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>doctype</entry>
        <entry><function>DomDocument_doctype</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>document_element</entry>
        <entry><function>DomDocument_document_element</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>create_element</entry>
        <entry><function>DomDocument_create_element</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>create_text_node</entry>
        <entry><function>DomDocument_create_text_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>create_comment</entry>
        <entry><function>DomDocument_create_comment</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>create_cdata_section</entry>
        <entry><function>DomDocument_create_cdata_section</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>create_processing_instruction</entry>
        <entry><function>DomDocument_create_processing_instruction</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>create_attribute</entry>
        <entry><function>DomDocument_create_attribute</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>create_entity_reference</entry>
        <entry><function>DomDocument_create_entity_reference</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>get_elements_by_tagname</entry>
        <entry><function>DomDocument_get_elements_by_tagname</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>get_element_by_id</entry>
        <entry><function>DomDocument_get_element_by_id</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>dump_mem</entry>
        <entry><function>DomDocument_dump_mem</function></entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry>dump_file</entry>
        <entry><function>DomDocument_dump_file</function></entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry>html_dump_mem</entry>
        <entry><function>DomDocument_html_dump_mem</function></entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry>xpath_init</entry>
        <entry>xpath_init</entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry>xpath_new_context</entry>
        <entry>xpath_new_context</entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry>xptr_new_context</entry>
        <entry>xptr_new_context</entry>
        <entry>DOM 標準ではありません</entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomElement クラス (DomElement : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>tagname</entry>
        <entry><function>DomElement_tagname</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>get_attribute</entry>
        <entry><function>DomElement_get_attribute</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>set_attribute</entry>
        <entry><function>DomElement_set_attribute</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>remove_attribute</entry>
        <entry><function>DomElement_remove_attribute</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>get_attribute_node</entry>
        <entry><function>DomElement_get_attribute_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>set_attribute_node</entry>
        <entry><function>DomElement_set_attribute_node</function></entry>
        <entry></entry>
       </row>

       <row>
        <entry>get_elements_by_tagname</entry>
        <entry><function>DomElement_get_elements_by_tagname</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>has_attribute</entry>
        <entry><function>DomElement_has_attribute</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomNode クラス</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry><function>DomNode_node_name</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_node_value</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_node_type</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_last_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_first_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_child_nodes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_previous_sibling</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_next_sibling</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_parent_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_owner_document</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_insert_before</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_append_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_append_sibling</function></entry>
        <entry>DOM 標準ではありません。この関数は
               先ほどの <function>DomNode_append_child</function>
               の動作をエミュレートします。
        </entry>
       </row>
       <row>
        <entry><function>DomNode_remove_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_has_child_nodes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_has_attributes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_clone_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_attributes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_unlink_node</function></entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry><function>DomNode_replace_node</function></entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry><function>DomNode_set_content</function></entry>
        <entry>DOM 標準にはなく、古いメソッドです</entry>
       </row>
       <row>
        <entry><function>DomNode_get_content</function></entry>
        <entry>DOM 標準にはなく、古いメソッドです</entry>
       </row>
       <row>
        <entry><function>DomNode_dump_node</function></entry>
        <entry>DOM 標準ではありません</entry>
       </row>
       <row>
        <entry><function>DomNode_is_blank_node</function></entry>
        <entry>DOM 標準ではありません</entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomAttribute クラス (DomAttribute : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry></entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>name</entry>
        <entry><function>DomAttribute_name</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>value</entry>
        <entry><function>DomAttribute_value</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>specified</entry>
        <entry><function>DomAttribute_specified</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomProcessingInstruction クラス (DomProcessingInstruction : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>target</entry>
        <entry><function>DomProcessingInstruction_target</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>data</entry>
        <entry><function>DomProcessingInstruction_data</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>Parser クラス</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注記</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>add_chunk</entry>
        <entry><function>Parser_add_chunk</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>end</entry>
        <entry><function>Parser_end</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>XPathContext クラス</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注記</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>eval</entry>
        <entry><function>XPathContext_eval</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>eval_expression</entry>
        <entry><function>XPathContext_eval_expression</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>register_ns</entry>
        <entry><function>XPathContext_register_ns</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
      <title>DomDocumentType クラス (DomDocumentType : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注記</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>name</entry>
        <entry><function>DomDocumentType_name</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>entities</entry>
        <entry><function>DomDocumentType_entities</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>notations</entry>
        <entry><function>DomDocumentType_notations</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>public_id</entry>
        <entry><function>DomDocumentType_public_id</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>system_id</entry>
        <entry><function>DomDocumentType_system_id</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>internal_subset</entry>
        <entry><function>DomDocumentType_internal_subset</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
     クラス DomDtd は DomNode から派生したものです。DomComment は
     DomCData から派生したものです。
    </para>
   </section>

   <section id="domxml.examples">
    &reftitle.examples;
    <para>
     このリファレンスにおける多くの例は、XML 文字列を必要とします。
     この文字列を全ての例で繰りかえし記述するかわりに、ファイルに書き込んで
     各例で読み込むことにします。この読み込まれるファイルは、
     以下の例に示されています。XML ドキュメントを作成し、
     <function>DomDocument_open_file</function> で読み込むことも可能です。
    </para>
    <para>
     <example>
      <title>XML 文字列を有するファイル example.inc を読み込む</title>
      <programlisting role="php">
<![CDATA[
<?php
$xmlstr = "<?xml version='1.0' standalone='yes'?>
<!DOCTYPE chapter SYSTEM '/share/sgml/Norman_Walsh/db3xml10/db3xml10.dtd'
[ <!ENTITY sp \"spanish\">
]>
<!-- lsfj  -->
<chapter language='en'><title language='en'>Title</title>
 <para language='ge'>
  &sp;
  <!-- comment -->
  <informaltable ID='findme' language='&sp;'>
   <tgroup cols='3'>
    <tbody>
     <row><entry>a1</entry><entry
morerows='1'>b1</entry><entry>c1</entry></row>
<row><entry>a2</entry><entry>c2</entry></row>
     <row><entry>a3</entry><entry>b3</entry><entry>c3</entry></row>
    </tbody>
   </tgroup>
  </informaltable>
 </para>
</chapter>";
?>
]]>
      </programlisting>
     </example>
    </para>
   </section>
  </partintro>

&reference.domxml.functions;

 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
