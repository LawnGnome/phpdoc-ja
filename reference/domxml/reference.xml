<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.2 $ -->
 <reference id="ref.domxml">
  <title>DOM XML関数</title>
  <titleabbrev>DOM XML</titleabbrev>

  <partintro>
   <section id="domxml-intro">
    <title>はじめに</title>
     &warn.experimental;
    <para>
     domxml拡張モジュールは、DOM標準に対する互換性を改善するためPHPバー
     ジョン4.3.0で書き直されました。拡張モジュールには、まだ、多くの古
     い関数が含まれていますが、使用は推奨されません。特にオブジェクト
     指向でない関数の使用は避けるべきです。
    </para>
    <para>
     拡張モジュールによりDOM APIでXMLドキュメントを処理することが可能
     となります。また、完全なXMLドキュメントをPHPオブジェクトツリーに
     変換する関数<function>domxml_xmltree</function>も提供されています。
     現在、このツリーは読み込み可とされています。このツリーを修正する
     ことは可能ですが、<function>DomDocument_dump_mem</function>にこれ
     を適用することはできないため、意味はありません。
     そこで、XMLファイルを読み込み、修正した版を書き込みたい場合、
     <function>DomDocument_create_element</function>,
     <function>DomDocument_create_text</function>,
     <function>set_attribute</function>等を使用し、最後に
     <function>DomDocument_dump_mem</function>関数を使用して下さい。
    </para>
   </section>

   <section id="domxml-requirements">
    <title>必要なもの</title>
    <para>
     この拡張モジュールは、PHPのconfigureが
     <ulink url="&url.domxml;">GNOME XMLライブラリ</ulink>を用いて
     <option role="configure">--with-dom=[DIR]</option>を指定して
     実行されている場合のみ利用可能です。libxml-2.2.7以降が必要です。
    </para>
   </section>

   <section id="domxml-deprecated">
    <title>古い関数</title>
    <para>
    <table>
     <title>古い関数とその代替関数</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>古い関数</entry>
        <entry>新しい関数</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>xmldoc</entry>
        <entry><function>domxml_open_mem</function></entry>
       </row>
       <row>
        <entry>xmldocfiel</entry>
        <entry><function>domxml_open_file</function></entry>
       </row>
       <row>
        <entry>domxml_new_xmldoc</entry>
        <entry><function>domxml_new_doc</function></entry>
       </row>
       <row>
        <entry>domxml_dump_mem</entry>
        <entry><function>DomDocument_dump_mem</function></entry>
       </row>
       <row>
        <entry>domxml_dump_mem_file</entry>
        <entry><function>DomDocument_dump_file</function></entry>
       </row>
       <row>
        <entry>DomDocument_dump_mem_file</entry>
        <entry><function>DomDocument_dump_file</function></entry>
       </row>
       <row>
        <entry>DomDocument_add_root</entry>
        <entry>
          <function>DomDocument_create_element</function>の後に
          <function>DomNode_append_child</function>
         </entry>
       </row>
       <row>
        <entry>DomDocument_dtd</entry>
        <entry><function>DomDocument_doctype</function></entry>
       </row>
       <row>
        <entry>DomDocument_root</entry>
        <entry><function>DomDocument_document_element</function></entry>
       </row>
       <row>
        <entry>DomDocument_children</entry>
        <entry><function>DomNode_child_nodes</function></entry>
       </row>
       <row>
        <entry>DomDocument_imported_node</entry>
        <entry>No replacement.</entry>
       </row>
       <row>
        <entry>DomNode_add_child</entry>
        <entry>
          Create a new node with e.g.
          <function>DomDocument_create_element</function> und add it with
          <function>DomNode_append_child</function>.
         </entry>
        </row>
        <row>
         <entry>DomNode_children</entry>
         <entry><function>DomNode_child_nodes</function></entry>
        </row>
        <row>
         <entry>DomNode_parent</entry>
         <entry><function>DomNode_parent_node</function></entry>
        </row>
        <row>
         <entry>DomNode_new_child</entry>
         <entry>
          例えば<function>DomDocument_create_element</function>で
          新規ノードを作成し、
          <function>DomNode_append_child</function>で追加します。
         </entry>
        </row>
        <row>
         <entry>DomNode_set_content</entry>
         <entry>
          例えば<function>DomDocument_create_element</function>で
          新規ノードを作成し、
          <function>DomNode_append_child</function>で追加します。
         </entry>
        </row>
        <row>
         <entry>DomNode_get_content</entry>
         <entry>
          コンテンツはテキストノードであり、
          <function>DomNode_child_nodes</function>でアクセス可能です。
         </entry>
        </row>
        <row>
         <entry>DomNode_set_content</entry>
         <entry>
          コンテンツはテキストノードであり、
          <function>DomNode_append_child</function>で追加できます。
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>
   </section>

   <section id="domxml-constants">
    <title>定数</title>
    <para>
     このモジュールは、以下の定数を定義します。
    </para>
    <table>
     <title>XML定数</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>定数</entry>
        <entry>値</entry>
        <entry>説明</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>XML_ELEMENT_NODE</entry>
        <entry>1</entry>
        <entry>ノードは要素(element)である</entry>
       </row>
       <row>
        <entry>XML_ATTRIBUTE_NODE</entry>
        <entry>2</entry>
        <entry>ノードは属性(attribute)である</entry>
       </row>
       <row>
        <entry>XML_TEXT_NODE</entry>
        <entry>3</entry>
        <entry>ノードはテキストの一部である</entry>
       </row>
       <row>
        <entry>XML_CDATA_SECTION_NODE</entry>
        <entry>4</entry>
        <entry></entry>
       </row>
       <row>
        <entry>XML_ENTITY_REF_NODE</entry>
        <entry>5</entry>
        <entry></entry>
       </row>
       <row>
        <entry>XML_ENTITY_NODE</entry>
        <entry>6</entry>
        <entry>ノードは&amp;nbsp;のようなエンティティである</entry>
       </row>
       <row>
        <entry>XML_PI_NODE</entry>
        <entry>7</entry>
        <entry>ノードは処理命令(PI)である</entry>
       </row>
       <row>
        <entry>XML_COMMENT_NODE</entry>
        <entry>8</entry>
        <entry>ノードはコメントである</entry>
       </row>
       <row>
        <entry>XML_DOCUMENT_NODE</entry>
        <entry>9</entry>
        <entry>ノードはドキュメントである</entry>
       </row>
       <row>
        <entry>XML_DOCUMENT_TYPE_NODE</entry>
        <entry>10</entry>
        <entry></entry>
       </row>
       <row>
        <entry>XML_DOCUMENT_FRAG_NODE</entry>
        <entry>11</entry>
        <entry></entry>
       </row>
       <row>
        <entry>XML_NOTATION_NODE</entry>
        <entry>12</entry>
        <entry></entry>
       </row>
       <row>
        <entry>XML_GLOBAL_NAMESPACE</entry>
        <entry>1</entry>
        <entry></entry>
       </row>
       <row>
        <entry>XML_LOCAL_NAMESPACE</entry>
        <entry>2</entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </section>

   <section id="domxml-classes">
    <title>クラス</title>
    <para>
     モジュールのAPIは、DOMレベル2標準に可能な限り基づいています。結果
     的にAPIは完全にオブジェクト指向です。このモジュールを使用する際に
     DOM標準が利用できることは望ましいことです。
     このAPIはオブジェクト指向ですが、最初の引数として処理するオブジェ
     クトを渡すオブジェクト指向でない方法でコールすることができる多く
     の関数があります。これらの関数は、主に過去のバージョンとの互換性
     確保のために維持されていますが、新規開発での使用はもはや推奨され
     ません。
    </para>
    <para>
     このAPIは、公式なDOM APIとは二つの点で異なっています。まず、全て
     のクラスの属性は、同じ名前を有する関数として実装され、関数名はPHP
     の命名表記に基づいています。これは、DOM関数lastChild()が
     last_child()と書かれることを意味します。
    </para>
    <para>
     このモジュールは、一連のクラスを定義します。メソッドも含めたリス
     トを以下の表に示します。クラスは、DOM標準でDOMxxxという名前のもの
     と等価です。
    </para>
    
    <para>
     <table>
      <title>クラスの一覧</title>
      <tgroup cols="2">
       <thead>
        <row>
         <entry>クラス名</entry>
         <entry>親クラス</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>DomAttribute</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomCData</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomComment</entry>
         <entry>DomCData : DomNode</entry>
        </row>
        <row>
         <entry>DomDocument</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomDocumentType</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomElement</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomEntity</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomEntityReference</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomProcessingInstruction</entry>
         <entry>DomNode</entry>
        </row>
        <row>
         <entry>DomText</entry>
         <entry>DomCData : DomNode</entry>
        </row>
        <row>
         <entry>Parser</entry>
         <entry>現在はまだDomParserと呼ばれています</entry>
        </row>
        <row>
         <entry>XPathContext</entry>
         <entry></entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>
    
    <para>
     <table>
      <title>DomDocument クラス (DomDocument : DomNode)</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>メソッド名</entry>
         <entry>関数名</entry>
         <entry>注意</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>doctype</entry>
         <entry><function>DomDocument_doctype</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>document_elemnent</entry>
         <entry><function>DomDocument_document_element</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>create_element</entry>
         <entry><function>DomDocument_create_element</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>create_text_node</entry>
         <entry><function>DomDocument_create_text_node</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>create_comment</entry>
         <entry><function>DomDocument_create_comment</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>create_cdata_section</entry>
         <entry><function>DomDocument_create_cdata_section</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>create_processing_instruction</entry>
         <entry><function>DomDocument_create_processing_instruction</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>create_attribute</entry>
         <entry><function>DomDocument_create_attribute</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>create_entity_reference</entry>
         <entry><function>DomDocument_create_entity_reference</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>get_elements_by_tagname</entry>
         <entry><function>DomDocument_get_elements_by_tagname</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>get_element_by_id</entry>
         <entry><function>DomDocument_get_element_by_id</function></entry>
         <entry></entry>
        </row>
        <row>
         <entry>dump_mem</entry>
         <entry><function>DomDocument_dump_mem</function></entry>
         <entry>DOM標準ではない</entry>
       </row>
        <row>
         <entry>dump_file</entry>
         <entry><function>DomDocument_dump_file</function></entry>
         <entry>DOM標準ではない</entry>
        </row>
        <row>
         <entry>html_dump_mem</entry>
         <entry><function>DomDocument_html_dump_mem</function></entry>
         <entry>DOM標準ではない</entry>
        </row>
        <row>
         <entry>xpath_init</entry>
         <entry>xpath_init</entry>
         <entry>DOM標準ではない</entry>
        </row>
        <row>
         <entry>xpath_new_context</entry>
         <entry>xpath_new_context</entry>
         <entry>DOM標準ではない</entry>
        </row>
        <row>
         <entry>xptr_new_context</entry>
         <entry>xptr_new_context</entry>
         <entry>DOM標準ではない</entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>
    
    <para>
    <table>
     <title>DomElement クラス (DomElement : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>tagname</entry>
        <entry><function>DomElement_tagname</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>get_attribute</entry>
        <entry><function>DomElement_get_attribute</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>set_attribute</entry>
        <entry><function>DomElement_set_attribute</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>remove_attribute</entry>
        <entry><function>DomElement_remove_attribute</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>get_attribute_node</entry>
        <entry><function>DomElement_get_attribute_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>set_attribute_node</entry>
        <entry><function>DomElement_set_attribute_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>get_elements_by_tagname</entry>
        <entry><function>DomElement_get_elements_by_tagname</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>has_attribute</entry>
        <entry><function>DomElement_has_attribute</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomNode クラス</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry><function>DomNode_node_name</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_node_value</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_node_type</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_last_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_first_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_child_nodes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_previous_sibling</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_next_sibling</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_parent_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_owner_document</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_insert_before</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_append_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_remove_child</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_has_child_nodes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_has_attributes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_clone_node</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_attributes</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry><function>DomNode_unlink_node</function></entry>
         <entry>DOM標準ではない</entry>
       </row>
       <row>
        <entry><function>DomNode_replace_node</function></entry>
        <entry>DOM標準ではない</entry>
       </row>
       <row>
        <entry><function>DomNode_set_content</function></entry>
        <entry>DOM標準にはなく、古いメソッドです</entry>
       </row>
       <row>
        <entry><function>DomNode_get_content</function></entry>
        <entry>DOM標準にはなく、古いメソッドです</entry>
       </row>
       <row>
        <entry><function>DomNode_dump_node</function></entry>
        <entry>DOM標準ではない</entry>
       </row>
       <row>
        <entry><function>DomNode_is_blank_node</function></entry>
        <entry>DOM標準ではない</entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomAttribute クラス (DomAttribute : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry></entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>name</entry>
        <entry><function>DomAttribute_name</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>value</entry>
        <entry><function>DomAttribute_value</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>specified</entry>
        <entry><function>DomAttribute_specified</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>DomProcessingInstruction クラス (DomProcessingInstruction : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注意</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>target</entry>
        <entry><function>DomProcessingInstruction_target</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>data</entry>
        <entry><function>DomProcessingInstruction_data</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>Parser クラス</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注記</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>add_chunk</entry>
        <entry><function>Parser_add_chunk</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>end</entry>
        <entry><function>Parser_end</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
     <title>XPathContext クラス</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注記</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>eval</entry>
        <entry><function>XPathContext_eval</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>eval_expression</entry>
        <entry><function>XPathContext_eval_expression</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>register_ns</entry>
        <entry><function>XPathContext_register_ns</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
    <table>
      <title>DomDocumentType クラス (DomDocumentType : DomNode)</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>メソッド名</entry>
        <entry>関数名</entry>
        <entry>注記</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>name</entry>
        <entry><function>DomDocumentType_name</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>entities</entry>
        <entry><function>DomDocumentType_entities</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>notations</entry>
        <entry><function>DomDocumentType_notations</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>public_id</entry>
        <entry><function>DomDocumentType_public_id</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>system_id</entry>
        <entry><function>DomDocumentType_system_id</function></entry>
        <entry></entry>
       </row>
       <row>
        <entry>internal_subset</entry>
        <entry><function>DomDocumentType_internal_subset</function></entry>
        <entry></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    </para>

    <para>
     クラスDomDtdはDomNodeから派生したものです。DomCommentはDomCDataか
     ら派生したものです。
    </para>
   </section>

   <section id="domxml-examples">
    <title>例</title>
    <para>
     このリファレンスにおける多くの例は、XML文字列を必要とします。この
     文字列を全ての例で繰りかえし記述するかわりに、ファイルに書き込ん
     で、各例で読み込むことにします。この読み込まれるファイルは、以下
     の例に示されています。XMLドキュメントを作成し、
     <function>DomDocument_open_file</function>で読み込むことも可能で
     す。
    </para>
    <para>
     <example>
      <title>XML文字列を有するファイルexample.incを読み込む</title>
      <programlisting role="php">
<![CDATA[
<?php
$xmlstr = "<?xml version='1.0' standalone='yes'?>
<!DOCTYPE chapter SYSTEM '/share/sgml/Norman_Walsh/db3xml10/db3xml10.dtd'
[ <!ENTITY sp \"spanish\">
]>
<!-- lsfj  -->
<chapter language='en'><title language='en'>Title</title>
 <para language='ge'>
  &amp;sp;
  <!-- comment -->
  <informaltable ID='findme' language='&amp;sp;'>
   <tgroup cols='3'>
    <tbody>
     <row><entry>a1</entry><entry
morerows='1'>b1</entry><entry>c1</entry></row>
<row><entry>a2</entry><entry>c2</entry></row>
     <row><entry>a3</entry><entry>b3</entry><entry>c3</entry></row>
    </tbody>
   </tgroup>
  </informaltable>
 </para>
</chapter>";
?>
]]>
      </programlisting>
     </example>
    </para>
   </section>
  </partintro>

&reference.domxml.functions;

 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

